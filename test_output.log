============================= test session starts ==============================
platform linux -- Python 3.13.3, pytest-8.4.2, pluggy-1.6.0 -- /home/frankbria/projects/codeframe/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /home/frankbria/projects/codeframe
configfile: pytest.ini
plugins: cov-7.0.0, anyio-4.11.0, asyncio-1.2.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1852 items

tests/agents/test_agent_factory.py::TestAgentFactory::test_factory_initialization PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_list_available_agents PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_create_backend_worker_agent PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_create_backend_architect_agent PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_create_frontend_specialist_agent PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_create_test_engineer_agent PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_create_code_reviewer_agent PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_get_agent_capabilities PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_get_agent_capabilities_unknown_type PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_create_agent_unknown_type PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_create_agent_with_custom_maturity PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_get_agent_definition PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_get_agents_by_type PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_backward_compatibility_with_existing_code PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_agent_has_system_prompt PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_agent_has_capabilities_attribute PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_agent_has_tools_attribute PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_agent_has_constraints_attribute PASSED [  0%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_reload_definitions PASSED [  1%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_worker_agent_maintains_backward_compatibility PASSED [  1%]
tests/agents/test_agent_factory.py::TestAgentFactory::test_worker_agent_with_system_prompt PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentEndpoint::test_start_agent_endpoint_returns_202_accepted FAILED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentEndpoint::test_start_agent_endpoint_handles_nonexistent_project PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentEndpoint::test_start_agent_endpoint_handles_already_running FAILED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentEndpoint::test_start_agent_endpoint_triggers_background_task PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentFunction::test_start_agent_creates_lead_agent_instance PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentFunction::test_start_agent_updates_project_status_to_running PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentFunction::test_start_agent_saves_greeting_to_database PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestStartAgentFunction::test_start_agent_broadcasts_via_websocket PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestWebSocketMessageProtocol::test_broadcast_message_formats_status_update PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestWebSocketMessageProtocol::test_broadcast_message_formats_chat_message PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestWebSocketMessageProtocol::test_broadcast_message_formats_agent_started PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestAgentLifecycleIntegration::test_complete_start_workflow_end_to_end PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestRunningAgentsDictionary::test_running_agents_dictionary_stores_agent_reference PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestRunningAgentsDictionary::test_running_agents_dictionary_handles_multiple_projects PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestRunningAgentsDictionary::test_running_agents_dictionary_allows_agent_removal PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestAgentLifecycleErrorHandling::test_start_agent_handles_database_error_gracefully PASSED [  1%]
tests/agents/test_agent_lifecycle.py::TestAgentLifecycleErrorHandling::test_start_agent_handles_lead_agent_initialization_error PASSED [  2%]
tests/agents/test_agent_lifecycle.py::TestAgentLifecycleErrorHandling::test_start_agent_handles_websocket_broadcast_failure PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentPoolManagerInitialization::test_initialization_with_defaults PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentPoolManagerInitialization::test_initialization_with_custom_max PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentCreation::test_create_backend_agent PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentCreation::test_create_frontend_agent PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentCreation::test_create_test_agent PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentCreation::test_create_multiple_agents_increments_number PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentCreation::test_create_agent_invalid_type PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentPoolLimits::test_create_agent_at_max_limit_raises_error PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentPoolLimits::test_create_agent_after_retirement_succeeds PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentStatusManagement::test_mark_agent_busy PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentStatusManagement::test_mark_agent_idle PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentStatusManagement::test_mark_agent_blocked PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentRetirement::test_retire_agent_removes_from_pool PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentRetirement::test_retire_nonexistent_agent_raises_error PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestAgentRetirement::test_retire_all_agents PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestEdgeCases::test_mark_busy_nonexistent_agent PASSED [  2%]
tests/agents/test_agent_pool_manager.py::TestEdgeCases::test_mark_idle_nonexistent_agent PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestEdgeCases::test_double_retirement_raises_error PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestTasksCompletedTracking::test_increment_tasks_completed PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestTasksCompletedTracking::test_tasks_completed_resets_on_new_agent PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestSDKModeInitialization::test_initialization_with_use_sdk_false PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestSDKModeInitialization::test_initialization_with_use_sdk_true PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestSDKModeInitialization::test_initialization_with_model PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestSDKModeInitialization::test_initialization_with_cwd PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestHybridAgentCreation::test_create_hybrid_agent_when_use_sdk_true PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestHybridAgentCreation::test_create_traditional_agent_when_use_sdk_false PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestHybridAgentCreation::test_create_agent_with_use_sdk_override PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestAgentStatusWithSDKFields::test_get_agent_status_includes_hybrid_field PASSED [  3%]
tests/agents/test_agent_pool_manager.py::TestAgentStatusWithSDKFields::test_get_agent_status_includes_session_id PASSED [  3%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentInitialization::test_init_with_required_parameters PASSED [  3%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentInitialization::test_init_with_default_provider PASSED [  3%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentInitialization::test_init_with_custom_provider PASSED [  3%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentInitialization::test_init_with_api_key PASSED [  3%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskFetching::test_fetch_next_task_returns_pending_task PASSED [  3%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskFetching::test_fetch_next_task_returns_none_when_no_tasks PASSED [  3%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskFetching::test_fetch_next_task_respects_priority_ordering PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskFetching::test_fetch_next_task_respects_workflow_step_ordering PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskFetching::test_fetch_next_task_filters_by_project_id PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskFetching::test_fetch_next_task_skips_non_pending_tasks PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_symbols PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_issue_data PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_files PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_handles_empty_codebase_index PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_handles_missing_issue_id PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentCodeGeneration::test_generate_code_creates_single_file PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentCodeGeneration::test_generate_code_modifies_multiple_files PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentCodeGeneration::test_generate_code_handles_api_error PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentCodeGeneration::test_generate_code_handles_malformed_response PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_creates_new_file PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_modifies_existing_file PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_deletes_file PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_creates_parent_directories PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_handles_multiple_files PASSED [  4%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_prevents_path_traversal PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_handles_absolute_paths PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_handles_file_not_found_for_modify PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentFileOperations::test_apply_file_changes_handles_file_not_found_for_delete PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskStatus::test_update_task_status_to_in_progress PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskStatus::test_update_task_status_to_completed PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTaskStatus::test_update_task_status_to_failed PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentExecution::test_execute_task_success PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentExecution::test_execute_task_handles_api_failure PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentExecution::test_execute_task_handles_file_operation_failure PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTestRunnerIntegration::test_execute_task_runs_tests_after_code_generation PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTestRunnerIntegration::test_execute_task_handles_test_failures PASSED [  5%]
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTestRunnerIntegration::test_execute_task_handles_test_runner_errors PASSED [  5%]
tests/agents/test_backend_worker_auto_commit.py::test_backend_worker_commits_after_successful_task PASSED [  5%]
tests/agents/test_backend_worker_auto_commit.py::test_backend_worker_no_commit_on_failure PASSED [  5%]
tests/agents/test_backend_worker_auto_commit.py::test_backend_worker_graceful_commit_failure PASSED [  5%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_test_worker_agent_uses_sdk_for_pytest PASSED [  5%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_test_worker_agent_sdk_bash_tool_pattern PASSED [  5%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_test_worker_agent_bash_tool_error_handling PASSED [  5%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_backend_worker_agent_already_uses_sdk PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_backend_worker_agent_sdk_allowed_tools PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_backend_worker_agent_sdk_bash_usage PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_test_runner_still_uses_subprocess PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_test_runner_unchanged_import PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_git_status_via_sdk_bash_tool PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_git_add_via_sdk_bash_tool PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_git_commit_via_sdk_bash_tool PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_ruff_check_via_sdk_bash_tool PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_black_format_via_sdk_bash_tool PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_npm_install_via_sdk_bash_tool PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsMigration::test_bash_tool_error_code_handling PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsIntegration::test_full_workflow_with_sdk_bash PASSED [  6%]
tests/agents/test_bash_operations_migration.py::TestBashOperationsIntegration::test_sdk_client_wrapper_bash_tool_enabled PASSED [  6%]
tests/agents/test_file_operations_migration.py::test_backend_agent_sdk_initialization PASSED [  6%]
tests/agents/test_file_operations_migration.py::test_backend_agent_no_sdk_initialization PASSED [  6%]
tests/agents/test_file_operations_migration.py::test_generate_code_with_sdk PASSED [  6%]
tests/agents/test_file_operations_migration.py::test_generate_code_without_sdk PASSED [  6%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_with_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_without_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_modify_action_no_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_delete_action_no_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_rejects_absolute_path_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_rejects_absolute_path_no_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_rejects_path_traversal_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_rejects_path_traversal_no_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_multiple_files_no_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_modify_nonexistent_file_no_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_apply_file_changes_delete_nonexistent_file_no_sdk PASSED [  7%]
tests/agents/test_file_operations_migration.py::test_build_system_prompt_includes_tool_instructions PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestFrontendWorkerAgentInitialization::test_initialization_with_defaults PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestFrontendWorkerAgentInitialization::test_initialization_with_custom_maturity PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestFrontendWorkerAgentInitialization::test_initialization_with_api_key PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestFrontendWorkerAgentInitialization::test_initialization_sets_project_paths PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestComponentSpecParsing::test_parse_json_spec PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestComponentSpecParsing::test_parse_plain_text_with_component_keyword PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestComponentSpecParsing::test_parse_plain_text_with_create_pattern PASSED [  7%]
tests/agents/test_frontend_worker_agent.py::TestComponentSpecParsing::test_parse_minimal_spec PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestComponentGeneration::test_generate_basic_component_template PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestComponentGeneration::test_generate_component_with_api_success PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestComponentGeneration::test_generate_component_api_fallback PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestFileCreation::test_create_component_file PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestFileCreation::test_create_component_with_types PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestFileCreation::test_create_component_file_conflict PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestImportExportUpdates::test_create_index_file_if_not_exists PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestImportExportUpdates::test_append_to_existing_index_file PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestImportExportUpdates::test_skip_duplicate_export PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestTaskExecution::test_execute_task_success PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestTaskExecution::test_execute_task_with_websocket_broadcasts PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestTaskExecution::test_execute_task_json_spec PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestTaskExecution::test_execute_task_error_handling PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestWebSocketIntegration::test_broadcast_task_started PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestWebSocketIntegration::test_broadcast_task_completed PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestErrorHandling::test_handle_file_already_exists PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestErrorHandling::test_handle_missing_api_key PASSED [  8%]
tests/agents/test_frontend_worker_agent.py::TestProjectConventions::test_generated_component_uses_tailwind PASSED [  9%]
tests/agents/test_frontend_worker_agent.py::TestProjectConventions::test_generated_component_is_functional PASSED [  9%]
tests/agents/test_frontend_worker_agent.py::TestProjectConventions::test_generated_component_has_typescript_types PASSED [  9%]
tests/agents/test_frontend_worker_auto_commit.py::test_frontend_worker_commits_after_successful_task PASSED [  9%]
tests/agents/test_frontend_worker_auto_commit.py::test_frontend_worker_no_commit_on_component_conflict PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestHybridWorkerInitialization::test_init_with_required_params PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestHybridWorkerInitialization::test_init_with_all_params PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestHybridWorkerInitialization::test_inherits_from_worker_agent PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTaskExecution::test_execute_task_success PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTaskExecution::test_execute_task_sets_current_task PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTaskExecution::test_execute_task_loads_context PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTaskExecution::test_execute_task_saves_result_to_context PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTaskExecution::test_execute_task_extracts_changed_files PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTaskExecution::test_execute_task_handles_sdk_error PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestContextManagement::test_load_context_hot_tier PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestContextManagement::test_save_context_item PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestContextManagement::test_flash_save_checks_threshold PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTokenTracking::test_records_token_usage PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestTokenTracking::test_token_tracking_failure_doesnt_break_execution PASSED [  9%]
tests/agents/test_hybrid_worker.py::TestPromptBuilding::test_build_prompt_includes_task_info PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestPromptBuilding::test_build_prompt_includes_context PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestPromptBuilding::test_build_prompt_truncates_long_context PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestPromptBuilding::test_build_prompt_includes_dependencies PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestFileExtraction::test_extract_created_file PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestFileExtraction::test_extract_modified_file PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestFileExtraction::test_extract_multiple_files PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestFileExtraction::test_empty_content_returns_empty_list PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestSessionManagement::test_get_session_info PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestSessionManagement::test_session_id_in_execution_result PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestSessionManagement::test_session_id_returned_in_result PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestStreamingExecution::test_streaming_yields_chunks PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestStreamingExecution::test_streaming_returns_final_result PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestResultSummary::test_summarize_short_content PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestResultSummary::test_summarize_long_content PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestResultSummary::test_summarize_empty_content PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestResultSummary::test_summarize_takes_first_paragraph PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestIntegration::test_full_execution_flow PASSED [ 10%]
tests/agents/test_hybrid_worker.py::TestIntegration::test_quality_gates_inherited PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentInitialization::test_lead_agent_initialization_with_database PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentInitialization::test_lead_agent_initialization_without_api_key_raises_error PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentInitialization::test_lead_agent_loads_existing_conversation PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentChat::test_chat_sends_message_to_provider PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentChat::test_chat_saves_user_message_to_database PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentChat::test_chat_saves_assistant_response_to_database PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentChat::test_chat_maintains_conversation_history PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentChat::test_chat_handles_provider_error PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentChat::test_chat_with_empty_message_raises_error PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_persists_across_agent_instances PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentTokenUsageTracking::test_chat_logs_token_usage PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentTokenUsageTracking::test_chat_tracks_total_tokens PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentErrorHandling::test_chat_handles_database_error PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentErrorHandling::test_chat_logs_errors_with_context PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentIntegration::test_complete_conversation_workflow PASSED [ 11%]
tests/agents/test_lead_agent.py::TestLeadAgentIntegration::test_agent_restart_maintains_context PASSED [ 11%]
tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentSyncBlockerHandling::test_sync_blocker_pauses_dependent_tasks PASSED [ 11%]
tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentSyncBlockerHandling::test_sync_blocker_blocks_all_dependent_tasks PASSED [ 12%]
tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentSyncBlockerHandling::test_sync_blocker_does_not_block_independent_tasks PASSED [ 12%]
tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_dependent_tasks_to_continue PASSED [ 12%]
tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue PASSED [ 12%]
tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentBlockerHandlingIntegration::test_multi_agent_execution_pauses_for_sync_blocker PASSED [ 12%]
tests/agents/test_lead_agent_debug.py::test_lead_agent_creation PASSED   [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentStartIssueWork::test_start_issue_work_creates_feature_branch PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentStartIssueWork::test_start_issue_work_with_nonexistent_issue PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentStartIssueWork::test_start_issue_work_with_existing_active_branch PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentStartIssueWork::test_start_issue_work_returns_correct_structure PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentStartIssueWork::test_start_issue_work_git_branch_created_in_repo PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentCompleteIssue::test_complete_issue_merges_when_all_tasks_done PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentCompleteIssue::test_complete_issue_fails_when_tasks_incomplete PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentCompleteIssue::test_complete_issue_fails_without_active_branch PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentCompleteIssue::test_complete_issue_updates_database PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentCompleteIssue::test_complete_issue_nonexistent_issue PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentCompleteIssue::test_complete_issue_with_multiple_completed_tasks PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentGitWorkflowIntegration::test_full_workflow_start_to_merge PASSED [ 12%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentGitWorkflowIntegration::test_workflow_with_no_tasks_fails PASSED [ 13%]
tests/agents/test_lead_agent_git_integration.py::TestLeadAgentGitWorkflowIntegration::test_multiple_issues_separate_branches PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestSessionManager::test_save_session_creates_file PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestSessionManager::test_load_session_returns_dict PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestSessionManager::test_load_session_returns_none_missing_file PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestSessionManager::test_load_session_handles_corrupted_json PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestSessionManager::test_clear_session_removes_file PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestSessionManager::test_clear_session_no_error_when_file_missing PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_get_session_summary PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_get_session_summary_no_tasks PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_get_completed_task_ids PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_format_time_ago_minutes PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_format_time_ago_hours PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_format_time_ago_days PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_format_time_ago_invalid PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_get_pending_actions PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_get_blocker_summaries PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_get_progress_percentage PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionHelpers::test_get_progress_percentage_zero_tasks PASSED [ 13%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionLifecycle::test_on_session_start_no_state PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionLifecycle::test_on_session_end_saves_state PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSessionLifecycle::test_session_lifecycle_integration PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_init_with_use_sdk_parameter PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_init_with_project_root_parameter PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_sdk_sessions_initialized_empty PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_get_sdk_sessions_returns_empty_dict PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_get_sdk_sessions_with_hybrid_agents PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_get_sdk_sessions_excludes_non_hybrid_agents PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_get_sdk_sessions_excludes_agents_without_session_id PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_get_sdk_sessions_handles_error PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_on_session_end_includes_sdk_sessions PASSED [ 14%]
tests/agents/test_lead_agent_session.py::TestLeadAgentSDKCoordination::test_agent_pool_manager_created_with_use_sdk PASSED [ 14%]
tests/agents/test_multi_agent_integration.py::TestMinimalIntegration::test_single_task_execution_minimal PASSED [ 14%]
tests/agents/test_multi_agent_integration.py::TestThreeAgentParallelExecution::test_parallel_execution_three_agents PASSED [ 14%]
tests/agents/test_multi_agent_integration.py::TestDependencyBlocking::test_task_waits_for_dependency PASSED [ 14%]
tests/agents/test_multi_agent_integration.py::TestDependencyUnblocking::test_task_starts_when_unblocked PASSED [ 14%]
tests/agents/test_multi_agent_integration.py::TestComplexDependencyGraph::test_complex_dependency_graph_ten_tasks PASSED [ 14%]
tests/agents/test_multi_agent_integration.py::TestAgentReuse::test_agent_reuse_same_type_tasks PASSED [ 15%]
tests/agents/test_multi_agent_integration.py::TestErrorRecovery::test_task_retry_after_failure PASSED [ 15%]
tests/agents/test_multi_agent_integration.py::TestErrorRecovery::test_task_fails_after_max_retries PASSED [ 15%]
tests/agents/test_multi_agent_integration.py::TestCompletionDetection::test_completion_detection_all_tasks_done PASSED [ 15%]
tests/agents/test_multi_agent_integration.py::TestConcurrentDatabaseAccess::test_concurrent_task_updates_no_race_conditions PASSED [ 15%]
tests/agents/test_multi_agent_integration.py::TestWebSocketBroadcasts::test_websocket_broadcasts_all_events PASSED [ 15%]
tests/agents/test_multi_agent_integration.py::TestDeadlockPrevention::test_circular_dependency_detection PASSED [ 15%]
tests/agents/test_review_agent.py::test_detect_sql_injection PASSED      [ 15%]
tests/agents/test_review_agent.py::test_detect_performance_issue PASSED  [ 15%]
tests/agents/test_review_agent.py::test_store_review_findings PASSED     [ 15%]
tests/agents/test_review_agent.py::test_block_on_critical_finding PASSED [ 15%]
tests/agents/test_review_agent.py::test_pass_on_low_severity PASSED      [ 15%]
tests/agents/test_review_agent.py::test_full_review_workflow PASSED      [ 15%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_basic PASSED [ 15%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_runs_complexity_check PASSED [ 15%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_runs_security_check PASSED [ 15%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_runs_style_check PASSED [ 15%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_scoring_algorithm_weights PASSED [ 15%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_scoring_range PASSED [ 15%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_scoring_favors_security PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_decision_approve_high_score PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_decision_approve_good_score PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_decision_request_changes_medium_score PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_decision_reject_low_score PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_creates_blocker_on_changes_requested PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_creates_blocker_on_reject PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_no_blocker_on_approve PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_report_format_json PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_report_format_markdown PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_report_includes_findings PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_report_includes_summary PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_report_scores_all_present PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_empty_files_list PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_nonexistent_files PASSED [ 16%]
tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking PASSED [ 16%]
tests/agents/test_subagent_generator.py::TestDefinitionLoading::test_loads_yaml_files_on_init PASSED [ 16%]
tests/agents/test_subagent_generator.py::TestDefinitionLoading::test_loads_raw_definitions PASSED [ 16%]
tests/agents/test_subagent_generator.py::TestDefinitionLoading::test_handles_missing_definitions_dir PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestDefinitionLoading::test_reload_definitions PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestDefinitionLoading::test_invalid_agent_name_raises_keyerror PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownGeneration::test_generate_single_agent PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownGeneration::test_generate_all_agents PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownGeneration::test_output_directory_created PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownGeneration::test_filename_sanitization PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownGeneration::test_invalid_maturity_raises_error PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownGeneration::test_unknown_agent_raises_error PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownContent::test_frontmatter_format PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownContent::test_system_prompt_included PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownContent::test_maturity_section_included PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownContent::test_maturity_capabilities_included PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownContent::test_different_maturity_levels PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownContent::test_error_recovery_section PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestMarkdownContent::test_integration_points_section PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_file_operations_maps_to_read_write PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_codebase_index_maps_to_glob_grep PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_test_runner_maps_to_bash PASSED [ 17%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_git_operations_maps_to_bash PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_anthropic_api_maps_to_empty PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_multiple_tools_combined PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_tools_sorted_alphabetically PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_unknown_tool_logged_as_warning PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestToolMapping::test_generated_markdown_has_correct_tools PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestMaturityConfig::test_get_maturity_config_d1 PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestMaturityConfig::test_get_maturity_config_d4 PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestMaturityConfig::test_missing_maturity_returns_none PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestMaturityConfig::test_fallback_to_general_capabilities PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestEdgeCases::test_empty_capabilities_list PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestEdgeCases::test_empty_tools_list PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestEdgeCases::test_multiline_description PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestEdgeCases::test_special_characters_in_name PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestIntegration::test_with_real_definitions_dir PASSED [ 18%]
tests/agents/test_subagent_generator.py::TestIntegration::test_roundtrip_consistency PASSED [ 18%]
tests/agents/test_test_worker_agent.py::TestTestWorkerAgentInitialization::test_initialization_with_defaults PASSED [ 18%]
tests/agents/test_test_worker_agent.py::TestTestWorkerAgentInitialization::test_initialization_with_custom_attempts PASSED [ 18%]
tests/agents/test_test_worker_agent.py::TestTestSpecParsing::test_parse_json_spec PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTestSpecParsing::test_parse_plain_text_with_test_keyword PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTestSpecParsing::test_parse_minimal_spec PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestCodeAnalysis::test_analyze_existing_file PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestCodeAnalysis::test_analyze_nonexistent_file PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestCodeAnalysis::test_analyze_none_file PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTestGeneration::test_generate_basic_test_template PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTestGeneration::test_generate_tests_with_api_success PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestFileCreation::test_create_test_file PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestFileCreation::test_create_test_file_adds_prefix PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestFileCreation::test_create_test_file_adds_extension PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTestExecution::test_execute_passing_tests PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTestExecution::test_execute_failing_tests PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestSelfCorrection::test_correct_failing_tests PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTaskExecution::test_execute_task_basic PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTaskExecution::test_execute_task_success PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestTaskExecution::test_execute_task_with_corrections PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestWebSocketIntegration::test_broadcast_test_result PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestErrorHandling::test_handle_analysis_error PASSED [ 19%]
tests/agents/test_test_worker_agent.py::TestErrorHandling::test_handle_execution_timeout PASSED [ 20%]
tests/agents/test_test_worker_agent.py::TestProjectConventions::test_generated_tests_use_pytest PASSED [ 20%]
tests/agents/test_test_worker_agent.py::TestProjectConventions::test_generated_tests_follow_naming PASSED [ 20%]
tests/agents/test_test_worker_auto_commit.py::test_test_worker_commits_after_successful_task PASSED [ 20%]
tests/agents/test_test_worker_auto_commit.py::test_test_worker_commits_even_after_test_correction PASSED [ 20%]
tests/api/test_api_discovery_progress.py::TestDiscoveryProgressEndpoint::test_get_discovery_progress_returns_404_for_nonexistent_project PASSED [ 20%]
tests/api/test_api_discovery_progress.py::TestDiscoveryProgressEndpoint::test_get_discovery_progress_returns_null_when_discovery_not_started PASSED [ 20%]
tests/api/test_api_discovery_progress.py::TestDiscoveryProgressEndpoint::test_get_discovery_progress_returns_progress_when_discovering PASSED [ 20%]
tests/api/test_api_discovery_progress.py::TestDiscoveryProgressEndpoint::test_get_discovery_progress_returns_100_percent_when_completed PASSED [ 20%]
tests/api/test_api_discovery_progress.py::TestDiscoveryProgressEndpoint::test_get_discovery_progress_matches_project_phase PASSED [ 20%]
tests/api/test_api_discovery_progress.py::TestDiscoveryProgressEndpoint::test_get_discovery_progress_excludes_answers_field PASSED [ 20%]
tests/api/test_api_issues.py::TestIssuesEndpointBasics::test_issues_endpoint_exists PASSED [ 20%]
tests/api/test_api_issues.py::TestIssuesEndpointBasics::test_issues_endpoint_returns_json PASSED [ 20%]
tests/api/test_api_issues.py::TestIssuesEndpointBasics::test_issues_endpoint_returns_200 PASSED [ 20%]
tests/api/test_api_issues.py::TestIssuesResponseStructure::test_issues_response_has_required_fields PASSED [ 20%]
tests/api/test_api_issues.py::TestIssuesResponseStructure::test_issues_response_contains_issues_array PASSED [ 20%]
tests/api/test_api_issues.py::TestIssuesResponseStructure::test_issues_response_total_counts PASSED [ 20%]
tests/api/test_api_issues.py::TestIssueStructure::test_issue_has_required_fields PASSED [ 20%]
tests/api/test_api_issues.py::TestIssueStructure::test_issue_id_is_string PASSED [ 21%]
tests/api/test_api_issues.py::TestIssueStructure::test_issue_depends_on_is_array PASSED [ 21%]
tests/api/test_api_issues.py::TestIssueStructure::test_issue_proposed_by_is_valid PASSED [ 21%]
tests/api/test_api_issues.py::TestIssueStructure::test_issue_timestamps_are_rfc3339 PASSED [ 21%]
tests/api/test_api_issues.py::TestIssuesWithTasks::test_issues_include_tasks_query_param PASSED [ 21%]
tests/api/test_api_issues.py::TestIssuesWithTasks::test_issue_tasks_is_array PASSED [ 21%]
tests/api/test_api_issues.py::TestIssuesWithTasks::test_issue_tasks_count PASSED [ 21%]
tests/api/test_api_issues.py::TestTaskStructure::test_task_has_required_fields PASSED [ 21%]
tests/api/test_api_issues.py::TestTaskStructure::test_task_id_is_string PASSED [ 21%]
tests/api/test_api_issues.py::TestTaskStructure::test_task_depends_on_is_array PASSED [ 21%]
tests/api/test_api_issues.py::TestIssuesEndpointEdgeCases::test_issues_without_tasks_query_param PASSED [ 21%]
tests/api/test_api_issues.py::TestIssuesEndpointEdgeCases::test_empty_issues_list PASSED [ 21%]
tests/api/test_api_issues.py::TestIssuesEndpointEdgeCases::test_nonexistent_project_returns_404 PASSED [ 21%]
tests/api/test_api_issues.py::TestIssuesEndpointEdgeCases::test_issues_endpoint_handles_invalid_project_id PASSED [ 21%]
tests/api/test_api_metrics.py::TestProjectTokenMetricsEndpoint::test_endpoint_exists PASSED [ 21%]
tests/api/test_api_metrics.py::TestProjectTokenMetricsEndpoint::test_returns_all_usage_records PASSED [ 21%]
tests/api/test_api_metrics.py::TestProjectTokenMetricsEndpoint::test_date_filtering PASSED [ 21%]
tests/api/test_api_metrics.py::TestProjectTokenMetricsEndpoint::test_invalid_date_format_returns_400 PASSED [ 21%]
tests/api/test_api_metrics.py::TestProjectTokenMetricsEndpoint::test_nonexistent_project_returns_404 PASSED [ 21%]
tests/api/test_api_metrics.py::TestProjectCostMetricsEndpoint::test_endpoint_exists PASSED [ 22%]
tests/api/test_api_metrics.py::TestProjectCostMetricsEndpoint::test_returns_cost_breakdown PASSED [ 22%]
tests/api/test_api_metrics.py::TestProjectCostMetricsEndpoint::test_nonexistent_project_returns_404 PASSED [ 22%]
tests/api/test_api_metrics.py::TestAgentMetricsEndpoint::test_endpoint_exists PASSED [ 22%]
tests/api/test_api_metrics.py::TestAgentMetricsEndpoint::test_returns_agent_metrics PASSED [ 22%]
tests/api/test_api_metrics.py::TestAgentMetricsEndpoint::test_project_filtering PASSED [ 22%]
tests/api/test_api_metrics.py::TestAgentMetricsEndpoint::test_nonexistent_agent_returns_empty PASSED [ 22%]
tests/api/test_api_metrics.py::TestAgentMetricsEndpoint::test_agent_with_no_data_for_project_returns_empty PASSED [ 22%]
tests/api/test_api_metrics.py::TestMetricsEndpointIntegration::test_all_endpoints_consistent PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDEndpointBasics::test_prd_endpoint_exists PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDEndpointBasics::test_prd_endpoint_returns_json PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDEndpointBasics::test_prd_endpoint_returns_200_when_available PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDResponseStructure::test_prd_response_has_required_fields PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDResponseStructure::test_prd_response_project_id_is_string PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDResponseStructure::test_prd_response_timestamps_are_rfc3339 PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDResponseStructure::test_prd_response_status_is_available PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDResponseStructure::test_prd_response_contains_correct_content PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDEndpointNotFound::test_prd_not_found_returns_status_not_found PASSED [ 22%]
tests/api/test_api_prd.py::TestPRDEndpointNotFound::test_prd_not_found_returns_empty_content PASSED [ 23%]
tests/api/test_api_prd.py::TestPRDEndpointNotFound::test_nonexistent_project_returns_404 PASSED [ 23%]
tests/api/test_api_prd.py::TestPRDEndpointEdgeCases::test_prd_endpoint_handles_invalid_project_id PASSED [ 23%]
tests/api/test_api_prd.py::TestPRDEndpointEdgeCases::test_prd_endpoint_with_very_large_content PASSED [ 23%]
tests/api/test_api_prd.py::TestPRDEndpointEdgeCases::test_prd_updated_at_reflects_latest_change PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_get_session_success_with_existing_session PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_get_session_returns_empty_state_when_no_file PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_get_session_nonexistent_project PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_session_state_structure_validation PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_session_handles_corrupted_json PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_session_timestamp_format PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_session_next_actions_order_preserved PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_session_blocker_structure PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_session_progress_percentage_range PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpoint::test_session_endpoint_response_time PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpointEdgeCases::test_session_with_empty_next_actions PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpointEdgeCases::test_session_with_zero_progress PASSED [ 23%]
tests/api/test_api_session.py::TestSessionEndpointEdgeCases::test_session_with_100_percent_progress PASSED [ 23%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolveEndpointBasics::test_resolve_endpoint_exists PASSED [ 23%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolveEndpointBasics::test_resolve_endpoint_returns_json PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolveEndpointBasics::test_resolve_endpoint_returns_200_on_success PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolveResponseStructure::test_resolve_response_has_required_fields PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolveResponseStructure::test_resolve_response_blocker_id_is_int PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolveResponseStructure::test_resolve_response_status_is_resolved PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolveResponseStructure::test_resolve_response_timestamp_is_rfc3339 PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionPersistence::test_blocker_status_updated_in_database PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionPersistence::test_answer_stored_in_database PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionPersistence::test_resolved_at_timestamp_stored PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionValidation::test_resolve_requires_answer_field PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionValidation::test_resolve_rejects_empty_answer PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionValidation::test_resolve_rejects_whitespace_only_answer PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionValidation::test_resolve_rejects_answer_exceeding_max_length PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionValidation::test_resolve_accepts_answer_at_max_length PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionConflicts::test_duplicate_resolution_returns_409 PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionConflicts::test_duplicate_resolution_preserves_first_answer PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionConflicts::test_conflict_response_includes_blocker_id PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionConflicts::test_conflict_response_includes_error_message PASSED [ 24%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionNotFound::test_nonexistent_blocker_returns_404 PASSED [ 25%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionNotFound::test_404_response_includes_blocker_id PASSED [ 25%]
tests/api/test_blocker_resolution_api.py::TestBlockerResolutionNotFound::test_invalid_blocker_id_returns_422 PASSED [ 25%]
tests/api/test_chat_api.py::TestChatEndpoint::test_send_message_success FAILED [ 25%]
tests/api/test_chat_api.py::TestChatEndpoint::test_send_message_empty_validation PASSED [ 25%]
tests/api/test_chat_api.py::TestChatEndpoint::test_send_message_project_not_found PASSED [ 25%]
tests/api/test_chat_api.py::TestChatEndpoint::test_send_message_agent_not_started FAILED [ 25%]
tests/api/test_chat_api.py::TestChatEndpoint::test_send_message_agent_failure PASSED [ 25%]
tests/api/test_chat_api.py::TestChatHistoryEndpoint::test_get_history_success PASSED [ 25%]
tests/api/test_chat_api.py::TestChatHistoryEndpoint::test_get_history_pagination PASSED [ 25%]
tests/api/test_chat_api.py::TestChatHistoryEndpoint::test_get_history_project_not_found PASSED [ 25%]
tests/api/test_chat_api.py::TestChatHistoryEndpoint::test_get_history_empty PASSED [ 25%]
tests/api/test_chat_api.py::TestChatWebSocketIntegration::test_chat_broadcasts_message FAILED [ 25%]
tests/api/test_chat_api.py::TestChatWebSocketIntegration::test_chat_continues_when_broadcast_fails FAILED [ 25%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_post_discovery_answer_returns_200_with_valid_answer PASSED [ 25%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_post_with_empty_answer_returns_400 PASSED [ 25%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_post_with_answer_exceeding_5000_chars_returns_400 PASSED [ 25%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_post_with_invalid_project_id_returns_404 PASSED [ 25%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_post_when_not_in_discovery_phase_returns_400 PASSED [ 25%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_discovery_not_started_returns_400 PASSED [ 26%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_lead_agent_process_discovery_answer_called_correctly PASSED [ 26%]
tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_response_includes_required_fields PASSED [ 26%]
tests/api/test_endpoints_database.py::TestProjectsEndpoint::test_list_projects_empty_database PASSED [ 26%]
tests/api/test_endpoints_database.py::TestProjectsEndpoint::test_list_projects_with_data PASSED [ 26%]
tests/api/test_endpoints_database.py::TestProjectsEndpoint::test_list_projects_returns_all_fields PASSED [ 26%]
tests/api/test_endpoints_database.py::TestProjectStatusEndpoint::test_get_project_status_success PASSED [ 26%]
tests/api/test_endpoints_database.py::TestProjectStatusEndpoint::test_get_project_status_not_found PASSED [ 26%]
tests/api/test_endpoints_database.py::TestProjectStatusEndpoint::test_get_project_status_returns_complete_data PASSED [ 26%]
tests/api/test_endpoints_database.py::TestAgentsEndpoint::test_get_agents_empty_list PASSED [ 26%]
tests/api/test_endpoints_database.py::TestAgentsEndpoint::test_get_agents_with_data PASSED [ 26%]
tests/api/test_endpoints_database.py::TestAgentsEndpoint::test_get_agents_returns_all_fields PASSED [ 26%]
tests/api/test_endpoints_database.py::TestEndpointDatabaseIntegration::test_complete_project_workflow_via_api PASSED [ 26%]
tests/api/test_endpoints_database.py::TestEndpointDatabaseIntegration::test_endpoints_survive_multiple_requests PASSED [ 26%]
tests/api/test_health_endpoint.py::test_health_endpoint_exists PASSED    [ 26%]
tests/api/test_health_endpoint.py::test_health_endpoint_returns_json PASSED [ 26%]
tests/api/test_health_endpoint.py::test_health_endpoint_structure PASSED [ 26%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_project_agents_empty PASSED [ 26%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_project_agents_nonexistent_project PASSED [ 26%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_assign_agent_to_project_success PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_assign_agent_nonexistent_project PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_assign_nonexistent_agent PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_assign_agent_already_assigned PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_project_agents_with_assignments PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_project_agents_active_only PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_remove_agent_from_project_success PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_remove_agent_not_assigned PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_update_agent_role_success PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_update_agent_role_not_assigned PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_agent_projects_empty PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_agent_projects_nonexistent_agent PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_agent_projects_with_assignments PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_get_agent_projects_active_only PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_agent_reassignment_after_removal PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_multiple_agents_different_roles PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_agent_assignment_request_validation PASSED [ 27%]
tests/api/test_multi_agent_api.py::TestMultiAgentAPI::test_agent_role_update_request_validation PASSED [ 27%]
tests/api/test_project_creation_api.py::TestProjectCreationAPI::test_create_project_success PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationAPI::test_create_project_missing_name PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationAPI::test_create_project_empty_name PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationAPI::test_create_project_invalid_type PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationAPI::test_create_project_duplicate_name PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationAPI::test_create_project_returns_all_fields PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationAPI::test_create_project_default_type PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationIntegration::test_create_project_persists_to_database PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationIntegration::test_create_multiple_projects PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationIntegration::test_create_project_via_api_then_get_status PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationErrorHandling::test_create_project_database_locked_error PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationErrorHandling::test_create_project_disk_full_error PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationErrorHandling::test_create_project_integrity_error PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationErrorHandling::test_create_project_list_projects_database_error PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationErrorHandling::test_create_project_update_project_database_error PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationErrorHandling::test_create_project_get_project_database_error PASSED [ 28%]
tests/api/test_project_creation_api.py::TestProjectCreationErrorHandling::test_create_project_with_extra_fields PASSED [ 28%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_success PASSED [ 28%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_with_severity_filter PASSED [ 28%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_multiple_severity_filters PASSED [ 29%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_empty_project PASSED [ 29%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_invalid_severity PASSED [ 29%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_nonexistent_project PASSED [ 29%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_findings_structure PASSED [ 29%]
tests/api/test_project_reviews.py::TestProjectCodeReviewsEndpoint::test_get_project_code_reviews_no_blocking_issues PASSED [ 29%]
tests/api/test_projects_api_progress.py::test_list_projects_includes_progress_metrics PASSED [ 29%]
tests/api/test_projects_api_progress.py::test_list_projects_progress_with_no_tasks PASSED [ 29%]
tests/api/test_projects_api_progress.py::test_list_projects_progress_with_all_completed PASSED [ 29%]
tests/api/test_projects_api_progress.py::test_list_projects_progress_multiple_projects PASSED [ 29%]
tests/api/test_workspace_cleanup.py::TestWorkspaceCleanupAPI::test_workspace_cleanup_after_git_clone_failure PASSED [ 29%]
tests/api/test_workspace_cleanup.py::TestWorkspaceCleanupAPI::test_workspace_cleanup_when_manager_cleanup_fails PASSED [ 29%]
tests/api/test_workspace_cleanup.py::TestWorkspaceCleanupAPI::test_no_cleanup_on_successful_creation PASSED [ 29%]
tests/blockers/test_blocker_answer_injection.py::TestBackendWorkerAgentAnswerInjection::test_create_blocker_and_wait_enriches_context_with_answer PASSED [ 29%]
tests/blockers/test_blocker_answer_injection.py::TestBackendWorkerAgentAnswerInjection::test_create_blocker_and_wait_extracts_task_id_from_context PASSED [ 29%]
tests/blockers/test_blocker_answer_injection.py::TestBackendWorkerAgentAnswerInjection::test_create_blocker_and_wait_uses_custom_timeouts PASSED [ 29%]
tests/blockers/test_blocker_answer_injection.py::TestFrontendWorkerAgentAnswerInjection::test_create_blocker_and_wait_enriches_context_with_answer PASSED [ 29%]
tests/blockers/test_blocker_answer_injection.py::TestTestWorkerAgentAnswerInjection::test_create_blocker_and_wait_enriches_context_with_answer PASSED [ 29%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockers::test_expire_stale_blockers_no_blockers PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockers::test_expire_stale_blockers_pending_within_threshold PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockers::test_expire_stale_blockers_pending_beyond_threshold PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockers::test_expire_stale_blockers_custom_threshold PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockers::test_expire_stale_blockers_ignores_resolved PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockers::test_expire_stale_blockers_ignores_already_expired PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockers::test_expire_stale_blockers_multiple_blockers PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockersJob::test_expire_stale_blockers_job_no_blockers PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockersJob::test_expire_stale_blockers_job_with_task_failure PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockersJob::test_expire_stale_blockers_job_with_websocket_broadcast PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockersJob::test_expire_stale_blockers_job_no_task_associated PASSED [ 30%]
tests/blockers/test_blocker_expiration.py::TestExpireStaleBlockersJob::test_expire_stale_blockers_job_task_already_failed PASSED [ 30%]
tests/blockers/test_blocker_expiration_cron.py::TestExpireStaleBlockersCronJob::test_cron_job_no_blockers PASSED [ 30%]
tests/blockers/test_blocker_expiration_cron.py::TestExpireStaleBlockersCronJob::test_cron_job_with_stale_blocker PASSED [ 30%]
tests/blockers/test_blocker_expiration_cron.py::TestExpireStaleBlockersCronJob::test_cron_job_fails_associated_task PASSED [ 30%]
tests/blockers/test_blocker_expiration_cron.py::TestExpireStaleBlockersCronJob::test_cron_job_with_websocket_broadcast PASSED [ 30%]
tests/blockers/test_blocker_expiration_cron.py::TestExpireStaleBlockersCronJob::test_cron_job_handles_blocker_without_task PASSED [ 30%]
tests/blockers/test_blocker_expiration_minimal.py::test_expire_stale_blockers_direct_sql PASSED [ 30%]
tests/blockers/test_blocker_expiration_simple.py::TestExpireStaleBlockers::test_expire_stale_blockers_no_blockers PASSED [ 30%]
tests/blockers/test_blocker_expiration_simple.py::TestExpireStaleBlockers::test_expire_stale_blockers_pending_within_threshold PASSED [ 31%]
tests/blockers/test_blocker_expiration_simple.py::TestExpireStaleBlockers::test_expire_stale_blockers_pending_beyond_threshold PASSED [ 31%]
tests/blockers/test_blocker_expiration_simple.py::TestExpireStaleBlockers::test_expire_stale_blockers_custom_threshold PASSED [ 31%]
tests/blockers/test_blocker_expiration_simple.py::TestExpireStaleBlockers::test_expire_stale_blockers_ignores_resolved PASSED [ 31%]
tests/blockers/test_blocker_expiration_simple.py::TestExpireStaleBlockers::test_expire_stale_blockers_ignores_already_expired PASSED [ 31%]
tests/blockers/test_blocker_expiration_simple.py::TestExpireStaleBlockers::test_expire_stale_blockers_multiple_blockers PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestBackendWorkerAgentBlockerTypeValidation::test_create_blocker_accepts_sync_type PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestBackendWorkerAgentBlockerTypeValidation::test_create_blocker_accepts_async_type PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestBackendWorkerAgentBlockerTypeValidation::test_create_blocker_defaults_to_async PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestBackendWorkerAgentBlockerTypeValidation::test_create_blocker_rejects_invalid_type PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestBackendWorkerAgentBlockerTypeValidation::test_create_blocker_rejects_lowercase_type PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestFrontendWorkerAgentBlockerTypeValidation::test_create_blocker_accepts_sync_type PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestFrontendWorkerAgentBlockerTypeValidation::test_create_blocker_rejects_invalid_type PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestTestWorkerAgentBlockerTypeValidation::test_create_blocker_accepts_sync_type PASSED [ 31%]
tests/blockers/test_blocker_type_validation.py::TestTestWorkerAgentBlockerTypeValidation::test_create_blocker_rejects_invalid_type PASSED [ 31%]
tests/blockers/test_blockers.py::TestCreateBlocker::test_create_blocker_sync PASSED [ 31%]
tests/blockers/test_blockers.py::TestCreateBlocker::test_create_blocker_async PASSED [ 31%]
tests/blockers/test_blockers.py::TestCreateBlocker::test_create_blocker_without_task PASSED [ 31%]
tests/blockers/test_blockers.py::TestCreateBlocker::test_create_blocker_with_long_question PASSED [ 32%]
tests/blockers/test_blockers.py::TestResolveBlocker::test_resolve_blocker_success PASSED [ 32%]
tests/blockers/test_blockers.py::TestResolveBlocker::test_resolve_blocker_not_found PASSED [ 32%]
tests/blockers/test_blockers.py::TestResolveBlocker::test_resolve_blocker_with_long_answer PASSED [ 32%]
tests/blockers/test_blockers.py::TestDuplicateResolution::test_resolve_blocker_twice PASSED [ 32%]
tests/blockers/test_blockers.py::TestDuplicateResolution::test_concurrent_resolution_race_condition PASSED [ 32%]
tests/blockers/test_blockers.py::TestGetPendingBlocker::test_get_pending_blocker_exists PASSED [ 32%]
tests/blockers/test_blockers.py::TestGetPendingBlocker::test_get_pending_blocker_none PASSED [ 32%]
tests/blockers/test_blockers.py::TestGetPendingBlocker::test_get_pending_blocker_after_resolution PASSED [ 32%]
tests/blockers/test_blockers.py::TestGetPendingBlocker::test_get_pending_blocker_oldest_first PASSED [ 32%]
tests/blockers/test_blockers.py::TestExpireStaleBlockers::test_expire_stale_blockers_none_stale PASSED [ 32%]
tests/blockers/test_blockers.py::TestExpireStaleBlockers::test_expire_stale_blockers_one_stale PASSED [ 32%]
tests/blockers/test_blockers.py::TestExpireStaleBlockers::test_expire_stale_blockers_multiple PASSED [ 32%]
tests/blockers/test_blockers.py::TestExpireStaleBlockers::test_expire_stale_blockers_skips_resolved PASSED [ 32%]
tests/blockers/test_blockers.py::TestBlockerListWithEnrichment::test_list_blockers_empty PASSED [ 32%]
tests/blockers/test_blockers.py::TestBlockerListWithEnrichment::test_list_blockers_with_data PASSED [ 32%]
tests/blockers/test_blockers.py::TestBlockerListWithEnrichment::test_list_blockers_filter_by_status PASSED [ 32%]
tests/blockers/test_wait_for_blocker_resolution.py::TestBackendWorkerAgentBlockerResolution::test_wait_for_blocker_resolution_returns_answer_when_resolved PASSED [ 32%]
tests/blockers/test_wait_for_blocker_resolution.py::TestBackendWorkerAgentBlockerResolution::test_wait_for_blocker_resolution_raises_timeout_when_not_resolved PASSED [ 32%]
tests/blockers/test_wait_for_blocker_resolution.py::TestBackendWorkerAgentBlockerResolution::test_wait_for_blocker_resolution_polls_at_specified_interval PASSED [ 33%]
tests/blockers/test_wait_for_blocker_resolution.py::TestBackendWorkerAgentBlockerResolution::test_wait_for_blocker_resolution_returns_immediately_if_already_resolved PASSED [ 33%]
tests/blockers/test_wait_for_blocker_resolution.py::TestBackendWorkerAgentBlockerResolution::test_wait_for_blocker_resolution_broadcasts_agent_resumed_event PASSED [ 33%]
tests/blockers/test_wait_for_blocker_resolution.py::TestFrontendWorkerAgentBlockerResolution::test_wait_for_blocker_resolution_returns_answer_when_resolved PASSED [ 33%]
tests/blockers/test_wait_for_blocker_resolution.py::TestTestWorkerAgentBlockerResolution::test_wait_for_blocker_resolution_returns_answer_when_resolved PASSED [ 33%]
tests/cli/test_cli_session.py::TestClearSessionCommand::test_clear_session_deletes_file PASSED [ 33%]
tests/cli/test_cli_session.py::TestClearSessionCommand::test_clear_session_succeeds_if_file_doesnt_exist PASSED [ 33%]
tests/cli/test_cli_session.py::TestClearSessionCommand::test_clear_session_uses_current_directory_if_no_arg PASSED [ 33%]
tests/cli/test_cli_session.py::TestClearSessionCommand::test_clear_session_handles_permission_error PASSED [ 33%]
tests/cli/test_cli_session.py::TestClearSessionCommand::test_clear_session_handles_invalid_project_path PASSED [ 33%]
tests/cli/test_cli_session.py::TestSessionCancellation::test_session_start_handles_keyboard_interrupt PASSED [ 33%]
tests/cli/test_cli_session.py::TestSessionCancellation::test_session_restoration_prompt_structure PASSED [ 33%]
tests/cli/test_cli_session.py::TestSessionCommandIntegration::test_clear_and_restart_workflow PASSED [ 33%]
tests/cli/test_cli_session.py::TestSessionCommandIntegration::test_multiple_clear_commands_idempotent PASSED [ 33%]
tests/cli/test_cli_session.py::TestSessionFilePermissions::test_clear_session_with_readonly_file PASSED [ 33%]
tests/cli/test_cli_session.py::TestSessionFilePermissions::test_clear_session_with_readonly_directory PASSED [ 33%]
tests/cli/test_serve_command.py::TestServeBasicFunctionality::test_serve_default_port PASSED [ 33%]
tests/cli/test_serve_command.py::TestServeBasicFunctionality::test_serve_keyboard_interrupt PASSED [ 33%]
tests/cli/test_serve_command.py::TestServeCustomPort::test_serve_custom_port PASSED [ 34%]
tests/cli/test_serve_command.py::TestServeCustomPort::test_serve_port_validation PASSED [ 34%]
tests/cli/test_serve_command.py::TestServeCustomPort::test_serve_port_in_use PASSED [ 34%]
tests/cli/test_serve_command.py::TestServeCustomPort::test_serve_subprocess_failure PASSED [ 34%]
tests/cli/test_serve_command.py::TestServeBrowserOpening::test_serve_browser_opens PASSED [ 34%]
tests/cli/test_serve_command.py::TestServeBrowserOpening::test_serve_no_browser PASSED [ 34%]
tests/cli/test_serve_command.py::TestServeReloadFlag::test_serve_reload_flag PASSED [ 34%]
tests/config/test_config.py::TestGlobalConfig::test_default_values PASSED [ 34%]
tests/config/test_config.py::TestGlobalConfig::test_cors_origins_parsing PASSED [ 34%]
tests/config/test_config.py::TestGlobalConfig::test_log_level_validation PASSED [ 34%]
tests/config/test_config.py::TestGlobalConfig::test_port_validation PASSED [ 34%]
tests/config/test_config.py::TestGlobalConfig::test_sprint_1_validation_success PASSED [ 34%]
tests/config/test_config.py::TestGlobalConfig::test_sprint_1_validation_failure PASSED [ 34%]
tests/config/test_config.py::TestGlobalConfig::test_ensure_directories PASSED [ 34%]
tests/config/test_config.py::TestConfig::test_load_environment PASSED    [ 34%]
tests/config/test_config.py::TestConfig::test_config_initialization PASSED [ 34%]
tests/config/test_config.py::TestConfig::test_validate_for_sprint PASSED [ 34%]
tests/config/test_config.py::TestConfig::test_validate_for_sprint_missing_key PASSED [ 34%]
tests/config/test_config.py::TestEnvironmentLoading::test_load_from_env_file PASSED [ 34%]
tests/config/test_config.py::TestEnvironmentLoading::test_env_override PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_returns_string PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_hot_threshold PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_warm_threshold PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_hot_range PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_warm_range PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_cold_range PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_boundary_precision PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_edge_cases PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_defensive_bounds PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_consistency PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierUnit::test_assign_tier_monotonic_ordering PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierWithCalculatedScores::test_new_task_gets_hot_tier PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierWithCalculatedScores::test_aged_task_gets_warm_tier PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierWithCalculatedScores::test_very_old_item_gets_cold_tier PASSED [ 35%]
tests/context/test_assign_tier_unit.py::TestAssignTierWithCalculatedScores::test_frequently_accessed_old_item_stays_warm PASSED [ 35%]
tests/context/test_checkpoint_restore.py::TestCheckpointRestore::test_create_checkpoint_with_data PASSED [ 35%]
tests/context/test_checkpoint_restore.py::TestCheckpointRestore::test_list_checkpoints_for_agent PASSED [ 35%]
tests/context/test_checkpoint_restore.py::TestCheckpointRestore::test_checkpoint_includes_metrics PASSED [ 36%]
tests/context/test_checkpoint_restore.py::TestCheckpointRestore::test_list_checkpoints_for_nonexistent_agent PASSED [ 36%]
tests/context/test_checkpoint_restore.py::TestCheckpointRestore::test_get_nonexistent_checkpoint PASSED [ 36%]
tests/context/test_context_manager.py::TestContextManager::test_recalculate_scores_updates_all_items PASSED [ 36%]
tests/context/test_context_manager.py::TestContextManager::test_recalculate_scores_returns_count PASSED [ 36%]
tests/context/test_context_manager.py::TestContextManager::test_recalculate_scores_with_empty_agent PASSED [ 36%]
tests/context/test_context_manager.py::TestContextManager::test_recalculate_scores_only_affects_target_agent PASSED [ 36%]
tests/context/test_context_manager.py::TestContextManager::test_context_manager_initialization PASSED [ 36%]
tests/context/test_context_stats.py::TestContextStats::test_get_context_stats_for_agent PASSED [ 36%]
tests/context/test_context_stats.py::TestContextStats::test_context_stats_calculates_tokens PASSED [ 36%]
tests/context/test_context_stats.py::TestContextStats::test_context_stats_for_agent_with_no_items PASSED [ 36%]
tests/context/test_flash_save.py::TestFlashSave::test_flash_save_creates_checkpoint PASSED [ 36%]
tests/context/test_flash_save.py::TestFlashSave::test_flash_save_archives_cold_items PASSED [ 36%]
tests/context/test_flash_save.py::TestFlashSave::test_flash_save_retains_hot_items PASSED [ 36%]
tests/context/test_flash_save.py::TestFlashSave::test_flash_save_calculates_reduction PASSED [ 36%]
tests/context/test_flash_save.py::TestFlashSave::test_flash_save_below_threshold_fails PASSED [ 36%]
tests/context/test_importance_scoring.py::TestImportanceScoring::test_calculate_importance_for_new_task PASSED [ 36%]
tests/context/test_importance_scoring.py::TestImportanceScoring::test_calculate_importance_with_age_decay PASSED [ 36%]
tests/context/test_importance_scoring.py::TestImportanceScoring::test_calculate_importance_with_access_boost PASSED [ 36%]
tests/context/test_importance_scoring.py::TestImportanceScoring::test_importance_type_weights PASSED [ 37%]
tests/context/test_importance_scoring.py::TestImportanceScoring::test_importance_score_clamped_to_range PASSED [ 37%]
tests/context/test_importance_scoring.py::TestImportanceScoring::test_importance_formula_components PASSED [ 37%]
tests/context/test_importance_scoring.py::TestAgeDecay::test_exponential_decay_over_time PASSED [ 37%]
tests/context/test_importance_scoring.py::TestAgeDecay::test_zero_age_gives_max_decay PASSED [ 37%]
tests/context/test_importance_scoring.py::TestAgeDecay::test_old_items_approach_zero PASSED [ 37%]
tests/context/test_importance_scoring.py::TestAccessBoost::test_access_boost_logarithmic PASSED [ 37%]
tests/context/test_importance_scoring.py::TestAccessBoost::test_access_boost_capped_at_one PASSED [ 37%]
tests/context/test_importance_scoring.py::TestAccessBoost::test_type_weights_constant PASSED [ 37%]
tests/context/test_score_decay.py::TestScoreDecay::test_exponential_decay_over_time PASSED [ 37%]
tests/context/test_score_decay.py::TestScoreDecay::test_zero_age_gives_max_decay PASSED [ 37%]
tests/context/test_score_decay.py::TestScoreDecay::test_old_items_approach_zero PASSED [ 37%]
tests/context/test_score_decay.py::TestScoreDecay::test_decay_decreases_monotonically PASSED [ 37%]
tests/context/test_score_decay.py::TestScoreDecay::test_half_life_approximately_1_4_days PASSED [ 37%]
tests/context/test_score_decay.py::TestScoreDecay::test_decay_with_fractional_days PASSED [ 37%]
tests/context/test_score_decay.py::TestScoreDecay::test_decay_never_exceeds_one PASSED [ 37%]
tests/context/test_tier_assignment.py::TestTierAssignment::test_assign_tier_hot_for_high_score PASSED [ 37%]
tests/context/test_tier_assignment.py::TestTierAssignment::test_assign_tier_warm_for_medium_score PASSED [ 37%]
tests/context/test_tier_assignment.py::TestTierAssignment::test_assign_tier_cold_for_low_score PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierAssignment::test_tier_boundaries PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierAssignment::test_tier_reassignment_on_score_change PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierBoundaryEdgeCases::test_score_exactly_one PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierBoundaryEdgeCases::test_score_exactly_zero PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierBoundaryEdgeCases::test_score_just_above_hot_threshold PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierBoundaryEdgeCases::test_score_just_below_warm_threshold PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierBoundaryEdgeCases::test_invalid_score_below_zero PASSED [ 38%]
tests/context/test_tier_assignment.py::TestTierBoundaryEdgeCases::test_invalid_score_above_one PASSED [ 38%]
tests/context/test_tier_filtering.py::TestTierFiltering::test_filter_by_hot_tier PASSED [ 38%]
tests/context/test_tier_filtering.py::TestTierFiltering::test_filter_by_warm_tier PASSED [ 38%]
tests/context/test_tier_filtering.py::TestTierFiltering::test_filter_by_cold_tier PASSED [ 38%]
tests/context/test_tier_filtering.py::TestTierFiltering::test_tier_none_returns_all_items PASSED [ 38%]
tests/context/test_tier_filtering.py::TestTierFiltering::test_empty_tier_filter PASSED [ 38%]
tests/context/test_token_counting.py::TestTokenCounting::test_count_tokens_single_item PASSED [ 38%]
tests/context/test_token_counting.py::TestTokenCounting::test_count_tokens_batch PASSED [ 38%]
tests/context/test_token_counting.py::TestTokenCounting::test_token_count_caching PASSED [ 38%]
tests/context/test_token_counting.py::TestTokenCounting::test_count_context_tokens_for_agent PASSED [ 38%]
tests/context/test_token_counting.py::TestTokenCounting::test_count_context_tokens_with_empty_list PASSED [ 38%]
tests/context/test_token_counting.py::TestTokenCounting::test_count_context_tokens_with_large_content PASSED [ 39%]
tests/core/test_port_utils.py::TestIsPortAvailable::test_port_available PASSED [ 39%]
tests/core/test_port_utils.py::TestIsPortAvailable::test_port_unavailable PASSED [ 39%]
tests/core/test_port_utils.py::TestCheckPortAvailability::test_privileged_port_rejected PASSED [ 39%]
tests/core/test_port_utils.py::TestCheckPortAvailability::test_available_port_returns_true PASSED [ 39%]
tests/core/test_port_utils.py::TestCheckPortAvailability::test_port_in_use_returns_helpful_message PASSED [ 39%]
tests/core/test_port_utils.py::TestCheckPortAvailability::test_other_os_error_returns_error_message PASSED [ 39%]
tests/core/test_port_utils.py::TestValidatePortRange::test_valid_port_returns_true PASSED [ 39%]
tests/core/test_port_utils.py::TestValidatePortRange::test_privileged_port_rejected PASSED [ 39%]
tests/core/test_port_utils.py::TestValidatePortRange::test_port_above_max_rejected PASSED [ 39%]
tests/deployment/test_deployer.py::TestDeployerInitialization::test_init_with_valid_paths PASSED [ 39%]
tests/deployment/test_deployer.py::TestDeployerInitialization::test_init_stores_db_reference PASSED [ 39%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_runs_script PASSED [ 39%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_captures_output PASSED [ 39%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_handles_script_failure PASSED [ 39%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_missing_script PASSED [ 39%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_default_environment PASSED [ 39%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_measures_duration PASSED [ 39%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_with_production_environment PASSED [ 40%]
tests/deployment/test_deployer.py::TestTriggerDeployment::test_trigger_deployment_returns_deployment_id PASSED [ 40%]
tests/deployment/test_deployer.py::TestDeploymentDatabaseTracking::test_deployment_records_in_database_if_table_exists PASSED [ 40%]
tests/deployment/test_deployer.py::TestDeploymentDatabaseTracking::test_deployment_graceful_without_deployments_table PASSED [ 40%]
tests/deployment/test_deployer.py::TestDeploymentEdgeCases::test_deployment_with_empty_commit_hash PASSED [ 40%]
tests/deployment/test_deployer.py::TestDeploymentEdgeCases::test_deployment_with_long_output PASSED [ 40%]
tests/deployment/test_deployer.py::TestDeploymentEdgeCases::test_deployment_with_stderr_output PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestAPIContracts::test_projects_endpoint_contract PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestAPIContracts::test_project_status_endpoint_contract PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestAPIContracts::test_projects_endpoint_empty_database PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestAPIContracts::test_project_progress_calculation_correctness PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestEnvironmentConfiguration::test_cors_allowed_origins_configurable PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestEnvironmentConfiguration::test_next_public_api_url_required PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestEnvironmentConfiguration::test_backend_port_configuration PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestDataIntegrity::test_task_status_values PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestDataIntegrity::test_progress_calculation_ignores_non_completed_statuses PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestEdgeCases::test_project_with_null_fields PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestEdgeCases::test_large_project_performance PASSED [ 40%]
tests/deployment/test_deployment_contract.py::TestEdgeCases::test_multiple_projects_independent_progress PASSED [ 40%]
tests/discovery/test_discovery_answers.py::TestAnswerCaptureBasics::test_capture_single_answer PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestAnswerCaptureBasics::test_capture_multiple_answers PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestAnswerCaptureBasics::test_update_existing_answer PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestAnswerCaptureBasics::test_empty_answer_text PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestFeatureExtraction::test_extract_comma_separated_features PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestFeatureExtraction::test_extract_features_from_sentence PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestFeatureExtraction::test_extract_features_with_action_verbs PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestFeatureExtraction::test_extract_features_from_multiple_answers PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestUserExtraction::test_extract_simple_users PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestUserExtraction::test_extract_users_with_roles PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestUserExtraction::test_extract_users_from_personas PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestUserExtraction::test_extract_no_users PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestConstraintExtraction::test_extract_technology_constraints PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestConstraintExtraction::test_extract_performance_constraints PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestConstraintExtraction::test_extract_security_constraints PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestConstraintExtraction::test_extract_multiple_constraint_types PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestStructuredDataGeneration::test_get_structured_data_basic PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestStructuredDataGeneration::test_get_structured_data_with_confidence PASSED [ 41%]
tests/discovery/test_discovery_answers.py::TestStructuredDataGeneration::test_structured_data_example_case PASSED [ 42%]
tests/discovery/test_discovery_answers.py::TestStructuredDataGeneration::test_structured_data_empty_capture PASSED [ 42%]
tests/discovery/test_discovery_answers.py::TestStructuredDataGeneration::test_structured_data_preserves_raw_answers PASSED [ 42%]
tests/discovery/test_discovery_answers.py::TestEdgeCases::test_special_characters_in_answers PASSED [ 42%]
tests/discovery/test_discovery_answers.py::TestEdgeCases::test_very_long_answer_text PASSED [ 42%]
tests/discovery/test_discovery_answers.py::TestEdgeCases::test_unicode_characters PASSED [ 42%]
tests/discovery/test_discovery_answers.py::TestEdgeCases::test_case_insensitive_extraction PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_asks_first_question PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_discovery_state_persists_in_database PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryStateTransitions::test_discovery_transitions_from_idle_to_discovering PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryStateTransitions::test_discovery_stays_in_discovering_while_questions_remain PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryStateTransitions::test_discovery_transitions_to_completed_when_all_required_answered PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryAnswerProcessing::test_process_discovery_answer_saves_answer PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryAnswerProcessing::test_process_discovery_answer_asks_next_question PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryAnswerProcessing::test_process_discovery_answer_updates_progress PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryDatabasePersistence::test_discovery_answers_persist_in_database PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryDatabasePersistence::test_discovery_state_reloads_on_agent_restart PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state PASSED [ 42%]
tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_includes_structured_data PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryProgressIndicators::test_get_discovery_status_includes_progress_percentage_at_0_percent PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryProgressIndicators::test_get_discovery_status_includes_progress_percentage_at_60_percent PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryProgressIndicators::test_get_discovery_status_includes_progress_percentage_at_100_percent PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryProgressIndicators::test_get_discovery_status_includes_total_required_count PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryProgressIndicators::test_get_discovery_status_handles_idle_state_progress PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryProgressIndicators::test_get_discovery_status_handles_completed_state_progress PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryEndToEndFlow::test_complete_discovery_flow PASSED [ 43%]
tests/discovery/test_discovery_integration.py::TestDiscoveryEndToEndFlow::test_discovery_flow_with_chat_integration PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestDiscoveryQuestionFrameworkInitialization::test_framework_initializes_with_default_categories PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestDiscoveryQuestionFrameworkInitialization::test_framework_initializes_with_empty_context PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestQuestionGeneration::test_generate_questions_returns_all_categories PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestQuestionGeneration::test_questions_have_required_fields PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestQuestionGeneration::test_problem_category_questions PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestContextAwareQuestionProgression::test_get_next_question_returns_first_required_question PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestContextAwareQuestionProgression::test_get_next_question_skips_answered_questions PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestContextAwareQuestionProgression::test_get_next_question_returns_none_when_all_required_answered PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestContextAwareQuestionProgression::test_get_next_question_with_follow_up_logic PASSED [ 43%]
tests/discovery/test_discovery_questions.py::TestDiscoveryCompletionDetection::test_is_discovery_complete_false_when_no_answers PASSED [ 44%]
tests/discovery/test_discovery_questions.py::TestDiscoveryCompletionDetection::test_is_discovery_complete_false_when_partial_answers PASSED [ 44%]
tests/discovery/test_discovery_questions.py::TestDiscoveryCompletionDetection::test_is_discovery_complete_true_when_all_required_answered PASSED [ 44%]
tests/discovery/test_discovery_questions.py::TestDiscoveryCompletionDetection::test_is_discovery_complete_validates_answer_quality PASSED [ 44%]
tests/discovery/test_discovery_questions.py::TestQuestionOrdering::test_questions_ordered_by_importance_and_category PASSED [ 44%]
tests/discovery/test_discovery_questions.py::TestQuestionOrdering::test_get_next_question_returns_none_when_all_answered PASSED [ 44%]
tests/e2e/test_full_workflow.py::test_project_creation PASSED            [ 44%]
tests/e2e/test_full_workflow.py::test_database_operations PASSED         [ 44%]
tests/e2e/test_full_workflow.py::test_worker_agent_initialization PASSED [ 44%]
tests/e2e/test_full_workflow.py::test_checkpoint_directory_creation PASSED [ 44%]
tests/e2e/test_full_workflow.py::test_context_flash_save PASSED          [ 44%]
tests/e2e/test_full_workflow.py::test_task_status_transitions PASSED     [ 44%]
tests/e2e/test_full_workflow.py::test_git_initialization_for_checkpoints PASSED [ 44%]
tests/e2e/test_full_workflow.py::test_metrics_database_schema PASSED     [ 44%]
tests/e2e/test_full_workflow.py::test_hello_world_fixture_structure PASSED [ 44%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_detects_language_on_first_run PASSED [ 44%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_parses_pytest_output PASSED [ 44%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_parses_jest_output PASSED [ 44%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_parses_go_test_output PASSED [ 44%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_parses_rust_cargo_output PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_extracts_coverage_from_pytest PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_extracts_coverage_from_jest PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_handles_test_failures PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_detects_skipped_tests PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_calculates_pass_rate PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunner::test_handles_subprocess_errors PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunnerOutputParsing::test_parses_maven_output PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunnerOutputParsing::test_handles_no_tests_found PASSED [ 45%]
tests/enforcement/test_adaptive_test_runner.py::TestAdaptiveTestRunnerOutputParsing::test_combines_stdout_and_stderr PASSED [ 45%]
tests/enforcement/test_evidence_verifier.py::TestEvidenceVerifier::test_verifies_passing_tests_with_coverage PASSED [ 45%]
tests/enforcement/test_evidence_verifier.py::TestEvidenceVerifier::test_rejects_failing_tests PASSED [ 45%]
tests/enforcement/test_evidence_verifier.py::TestEvidenceVerifier::test_rejects_low_coverage PASSED [ 45%]
tests/enforcement/test_evidence_verifier.py::TestEvidenceVerifier::test_rejects_skip_violations PASSED [ 45%]
tests/enforcement/test_evidence_verifier.py::TestEvidenceVerifier::test_generates_report PASSED [ 45%]
tests/enforcement/test_evidence_verifier.py::TestEvidenceVerifier::test_works_with_any_language PASSED [ 45%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_python_with_pyproject_toml PASSED [ 45%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_javascript_with_package_json PASSED [ 45%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_typescript_with_tsconfig PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_go_with_go_mod PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_rust_with_cargo_toml PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_java_maven_with_pom_xml PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_java_gradle_with_build_gradle PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_ruby_with_gemfile PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_detects_csharp_with_csproj PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_returns_unknown_for_unrecognized_project PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetector::test_python_with_pytest_in_pyproject PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetectorConfidence::test_high_confidence_with_multiple_markers PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetectorConfidence::test_lower_confidence_with_few_markers PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetectorSkipPatterns::test_python_skip_patterns_comprehensive PASSED [ 46%]
tests/enforcement/test_language_detector.py::TestLanguageDetectorSkipPatterns::test_javascript_skip_patterns_comprehensive PASSED [ 46%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetRecord::test_record_creates_history_entry PASSED [ 46%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetCheck::test_check_detects_coverage_degradation PASSED [ 46%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetCheck::test_check_detects_pass_rate_degradation PASSED [ 46%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetCheck::test_check_passes_with_no_degradation PASSED [ 46%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetStats::test_stats_command_formats_output PASSED [ 46%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetReset::test_reset_clears_history PASSED [ 46%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetCalculations::test_moving_average_calculation PASSED [ 47%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetCalculations::test_moving_average_with_fewer_entries PASSED [ 47%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetCalculations::test_peak_quality_detection PASSED [ 47%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetPersistence::test_json_persistence PASSED [ 47%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetPersistence::test_handles_missing_history_file PASSED [ 47%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetPersistence::test_handles_corrupted_history_file PASSED [ 47%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetEdgeCases::test_empty_history PASSED [ 47%]
tests/enforcement/test_quality_ratchet.py::TestQualityRatchetEdgeCases::test_single_entry_history PASSED [ 47%]
tests/enforcement/test_quality_tracker_enforcement.py::TestQualityTracker::test_records_quality_metrics PASSED [ 47%]
tests/enforcement/test_quality_tracker_enforcement.py::TestQualityTracker::test_detects_degradation PASSED [ 47%]
tests/enforcement/test_quality_tracker_enforcement.py::TestQualityTracker::test_works_with_any_language PASSED [ 47%]
tests/enforcement/test_quality_tracker_enforcement.py::TestQualityTracker::test_get_stats PASSED [ 47%]
tests/enforcement/test_quality_tracker_enforcement.py::TestQualityTracker::test_reset_clears_history PASSED [ 47%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_detects_simple_skip_decorator PASSED [ 47%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_detects_skipif_decorator PASSED [ 47%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_detects_pytest_mark_skip PASSED [ 47%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_detects_skip_with_no_reason PASSED [ 47%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_allows_skip_with_strong_justification PASSED [ 47%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_detects_nested_decorators PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_handles_non_test_files PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetection::test_performance_on_large_files PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetectorHelpers::test_is_test_file_recognizes_test_patterns PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetectorHelpers::test_check_file_returns_violations PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetectorHelpers::test_format_violation_produces_readable_output PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetectorEdgeCases::test_handles_empty_file PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetectorEdgeCases::test_handles_file_with_only_comments PASSED [ 48%]
tests/enforcement/test_skip_detector.py::TestSkipDetectorEdgeCases::test_detects_multiple_skips_in_one_file PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorPython::test_detects_simple_skip_decorator PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorPython::test_detects_pytest_mark_skip PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorPython::test_detects_unittest_skip PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorPython::test_detects_multiple_skip_decorators PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorJavaScript::test_detects_it_skip PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorJavaScript::test_detects_xit PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorJavaScript::test_detects_describe_skip PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorGo::test_detects_t_skip PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorGo::test_detects_build_ignore_tag PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorRust::test_detects_ignore_attribute PASSED [ 48%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorJava::test_detects_ignore_annotation PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorJava::test_detects_disabled_annotation PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorRuby::test_detects_skip_keyword PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorRuby::test_detects_pending_keyword PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorCSharp::test_detects_ignore_attribute PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorEdgeCases::test_handles_no_skip_patterns PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorEdgeCases::test_handles_syntax_errors_gracefully PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorEdgeCases::test_handles_empty_project PASSED [ 49%]
tests/enforcement/test_skip_pattern_detector.py::TestSkipPatternDetectorEdgeCases::test_handles_missing_files PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitMessageGeneration::test_generate_message_for_feat_task PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitMessageGeneration::test_generate_message_for_fix_task PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitMessageGeneration::test_generate_message_for_test_task PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitMessageGeneration::test_infer_commit_type_from_keywords PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitMessageGeneration::test_generate_message_with_file_list PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitMessageGeneration::test_generate_message_without_description PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitCreation::test_commit_single_file_change PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitCreation::test_commit_multiple_files PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitCreation::test_commit_message_in_git_log PASSED [ 49%]
tests/git/test_git_auto_commit.py::TestCommitCreation::test_commit_on_feature_branch PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestCommitCreation::test_commit_returns_valid_sha PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestChangelogIntegration::test_record_commit_in_changelog PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestChangelogIntegration::test_changelog_entry_structure PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestChangelogIntegration::test_query_changelog_by_task PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestChangelogIntegration::test_query_changelog_by_agent PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestErrorHandling::test_handle_empty_file_list PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestErrorHandling::test_handle_nonexistent_files PASSED [ 50%]
tests/git/test_git_auto_commit.py::TestErrorHandling::test_handle_missing_task_fields PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestGitWorkflowManagerInitialization::test_init_with_valid_repo PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestGitWorkflowManagerInitialization::test_init_with_non_git_directory PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestGitWorkflowManagerInitialization::test_init_with_nonexistent_path PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestCreateFeatureBranch::test_create_feature_branch_basic PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestCreateFeatureBranch::test_create_feature_branch_sanitizes_title PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestCreateFeatureBranch::test_create_feature_branch_long_title_truncated PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestCreateFeatureBranch::test_create_feature_branch_already_exists PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestCreateFeatureBranch::test_create_feature_branch_with_dirty_working_tree PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestCreateFeatureBranch::test_create_feature_branch_stores_in_database PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestMergeToMain::test_merge_to_main_success PASSED [ 50%]
tests/git/test_git_workflow_manager.py::TestMergeToMain::test_merge_to_main_incomplete_tasks PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestMergeToMain::test_merge_to_main_nonexistent_issue PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestMergeToMain::test_merge_to_main_conflict_handling PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestMergeToMain::test_merge_to_main_updates_database PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestIsIssueComplete::test_is_issue_complete_all_tasks_done PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestIsIssueComplete::test_is_issue_complete_with_pending_tasks PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestIsIssueComplete::test_is_issue_complete_no_tasks PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestGetCurrentBranch::test_get_current_branch_main PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestGetCurrentBranch::test_get_current_branch_feature PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestGetCurrentBranch::test_get_current_branch_detached_head PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestCheckoutBranch::test_checkout_branch_success PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestCheckoutBranch::test_checkout_branch_nonexistent PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestCheckoutBranch::test_checkout_branch_with_uncommitted_changes PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestEdgeCases::test_empty_issue_number PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestEdgeCases::test_empty_issue_title PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestEdgeCases::test_whitespace_only_issue_number PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestEdgeCases::test_special_characters_in_issue_number PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestConventionalCommitMessages::test_commit_message_format_feat PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestConventionalCommitMessages::test_commit_message_format_fix PASSED [ 51%]
tests/git/test_git_workflow_manager.py::TestConventionalCommitMessages::test_commit_message_format_test PASSED [ 52%]
tests/git/test_git_workflow_manager.py::TestConventionalCommitMessages::test_commit_message_format_refactor PASSED [ 52%]
tests/git/test_git_workflow_manager.py::TestCommitErrorHandling::test_commit_with_dirty_working_tree_raises_error PASSED [ 52%]
tests/git/test_git_workflow_manager.py::TestCommitErrorHandling::test_commit_failure_logs_warning_non_blocking PASSED [ 52%]
tests/git/test_git_workflow_manager.py::TestDatabaseSHARecording::test_update_task_commit_sha PASSED [ 52%]
tests/git/test_git_workflow_manager.py::TestDatabaseSHARecording::test_get_task_by_commit_full_sha PASSED [ 52%]
tests/git/test_git_workflow_manager.py::TestDatabaseSHARecording::test_get_task_by_commit_short_sha PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_build_index PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_find_symbols_by_name PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_find_symbols_by_type PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_find_symbols_by_language PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_get_file_symbols PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_search_pattern PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_to_dict PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_build_with_file_patterns PASSED [ 52%]
tests/indexing/test_codebase_index.py::TestCodebaseIndex::test_empty_project PASSED [ 52%]
tests/indexing/test_definition_loader.py::TestAgentDefinition::test_valid_definition PASSED [ 52%]
tests/indexing/test_definition_loader.py::TestAgentDefinition::test_missing_name PASSED [ 52%]
tests/indexing/test_definition_loader.py::TestAgentDefinition::test_missing_type PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinition::test_missing_system_prompt PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinition::test_invalid_capabilities_type PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_load_single_definition PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_load_multiple_definitions PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_load_from_custom_subdirectory PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_get_definition PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_get_missing_definition PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_create_agent PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_list_available_types PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_get_definitions_by_type PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_reload_definitions PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_invalid_maturity_level PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_empty_yaml_file PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_nonexistent_directory PASSED [ 53%]
tests/indexing/test_definition_loader.py::TestAgentDefinitionLoader::test_file_path_instead_of_directory PASSED [ 53%]
tests/indexing/test_indexing_models.py::TestSymbolType::test_symbol_type_values PASSED [ 53%]
tests/indexing/test_indexing_models.py::TestSymbolType::test_symbol_type_enum_members PASSED [ 53%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_creation_minimal PASSED [ 53%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_creation_with_signature PASSED [ 54%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_creation_with_parent PASSED [ 54%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_to_dict_minimal PASSED [ 54%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_to_dict_complete PASSED [ 54%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_equality PASSED [ 54%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_inequality_different_name PASSED [ 54%]
tests/indexing/test_indexing_models.py::TestSymbol::test_symbol_inequality_different_line PASSED [ 54%]
tests/integration/test_auto_commit_workflow.py::test_full_auto_commit_workflow PASSED [ 54%]
tests/integration/test_auto_commit_workflow.py::test_auto_commit_with_multiple_files PASSED [ 54%]
tests/integration/test_auto_commit_workflow.py::test_no_commit_when_task_fails PASSED [ 54%]
tests/integration/test_backend_worker_agent_integration.py::TestBackendWorkerAgentIntegration::test_apply_file_changes_real_file_io PASSED [ 54%]
tests/integration/test_backend_worker_agent_integration.py::TestBackendWorkerAgentIntegration::test_update_task_status_real_database PASSED [ 54%]
tests/integration/test_backend_worker_agent_integration.py::TestBackendWorkerAgentIntegration::test_execute_task_integration_with_mocked_llm PASSED [ 54%]
tests/integration/test_backend_worker_agent_integration.py::TestBackendWorkerAgentIntegration::test_execute_task_handles_file_operation_errors PASSED [ 54%]
tests/integration/test_backend_worker_agent_integration.py::TestBackendWorkerAgentIntegration::test_security_path_traversal_prevention PASSED [ 54%]
tests/integration/test_backend_worker_agent_integration.py::TestBackendWorkerAgentIntegration::test_multiple_task_execution_sequence PASSED [ 54%]
tests/integration/test_blocker_workflow.py::TestCompleteBlockerWorkflow::test_end_to_end_workflow PASSED [ 54%]
tests/integration/test_blocker_workflow.py::TestCompleteBlockerWorkflow::test_workflow_with_async_blocker PASSED [ 54%]
tests/integration/test_blocker_workflow.py::TestCompleteBlockerWorkflow::test_workflow_with_multiple_sequential_blockers PASSED [ 55%]
tests/integration/test_blocker_workflow.py::TestSyncBlockerPausingDependentTasks::test_sync_blocker_pauses_dependent_tasks PASSED [ 55%]
tests/integration/test_blocker_workflow.py::TestSyncBlockerPausingDependentTasks::test_sync_blocker_does_not_affect_independent_tasks PASSED [ 55%]
tests/integration/test_blocker_workflow.py::TestAsyncBlockerAllowingParallelWork::test_async_blocker_allows_continuation PASSED [ 55%]
tests/integration/test_blocker_workflow.py::TestAsyncBlockerAllowingParallelWork::test_multiple_async_blockers_parallel PASSED [ 55%]
tests/integration/test_blocker_workflow.py::TestBlockerWorkflowEdgeCases::test_workflow_with_blocker_expiration PASSED [ 55%]
tests/integration/test_blocker_workflow.py::TestBlockerWorkflowEdgeCases::test_workflow_with_agent_having_no_blockers PASSED [ 55%]
tests/integration/test_blocker_workflow.py::TestBlockerWorkflowEdgeCases::test_workflow_with_rapid_create_resolve_cycle PASSED [ 55%]
tests/integration/test_checkpoint_restore.py::TestCheckpointRestoreWorkflow::test_full_checkpoint_restore_workflow PASSED [ 55%]
tests/integration/test_checkpoint_restore.py::TestCheckpointRestoreWorkflow::test_checkpoint_list_and_metadata PASSED [ 55%]
tests/integration/test_checkpoint_restore.py::TestCheckpointRestoreWorkflow::test_restore_checkpoint_with_diff_preview PASSED [ 55%]
tests/integration/test_composite_index.py::TestCompositeIndexQueryPlan::test_query_plan_uses_composite_index PASSED [ 55%]
tests/integration/test_composite_index.py::TestCompositeIndexQueryPlan::test_query_plan_without_index_baseline PASSED [ 55%]
tests/integration/test_composite_index.py::TestCompositeIndexPerformance::test_performance_improvement_with_index PASSED [ 55%]
tests/integration/test_dashboard_access.py::TestServerAccess::test_dashboard_accessible_after_serve PASSED [ 55%]
tests/integration/test_dashboard_access.py::TestServerAccess::test_serve_command_lifecycle PASSED [ 55%]
tests/integration/test_flash_save_workflow.py::TestFlashSaveWorkflow::test_flash_save_workflow_with_150_items PASSED [ 55%]
tests/integration/test_flash_save_workflow.py::TestFlashSaveWorkflow::test_flash_save_creates_recoverable_checkpoint PASSED [ 55%]
tests/integration/test_lint_workflow.py::test_python_linting_workflow PASSED [ 55%]
tests/integration/test_lint_workflow.py::test_typescript_linting_workflow PASSED [ 56%]
tests/integration/test_lint_workflow.py::test_parallel_linting_workflow PASSED [ 56%]
tests/integration/test_lint_workflow.py::test_lint_workflow_with_warnings_only PASSED [ 56%]
tests/integration/test_lint_workflow.py::test_lint_workflow_with_mixed_results PASSED [ 56%]
tests/integration/test_mvp_completion_workflow.py::test_mvp_completion_full_workflow_success PASSED [ 56%]
tests/integration/test_mvp_completion_workflow.py::test_mvp_completion_workflow_with_notification PASSED [ 56%]
tests/integration/test_notification_workflow.py::TestNotificationWorkflow::test_sync_blocker_triggers_desktop_notification PASSED [ 56%]
tests/integration/test_notification_workflow.py::TestNotificationWorkflow::test_async_blocker_does_not_trigger_when_sync_only PASSED [ 56%]
tests/integration/test_notification_workflow.py::TestNotificationWorkflow::test_notification_includes_task_context PASSED [ 56%]
tests/integration/test_notification_workflow.py::TestNotificationWorkflow::test_notification_fires_even_if_desktop_unavailable PASSED [ 56%]
tests/integration/test_project_creation_flow.py::test_create_empty_project_end_to_end PASSED [ 56%]
tests/integration/test_project_creation_flow.py::test_create_project_rollback_on_failure PASSED [ 56%]
tests/integration/test_quality_gates_integration.py::TestQualityGatesIntegration::test_quality_gate_workflow_all_pass PASSED [ 56%]
tests/integration/test_quality_gates_integration.py::TestQualityGatesIntegration::test_quality_gate_workflow_test_failure PASSED [ 56%]
tests/integration/test_quality_gates_integration.py::TestQualityGatesIntegration::test_quality_gate_workflow_review_failure PASSED [ 56%]
tests/integration/test_quality_gates_integration.py::TestQualityGatesIntegration::test_quality_gate_workflow_low_coverage PASSED [ 56%]
tests/integration/test_quality_gates_integration.py::TestQualityGatesIntegration::test_quality_gate_risky_file_detection PASSED [ 56%]
tests/integration/test_quickstart_validation.py::TestFiveMinuteTutorial::test_scenario_1_trigger_blocker PASSED [ 56%]
tests/integration/test_quickstart_validation.py::TestFiveMinuteTutorial::test_scenario_2_view_blocker_in_dashboard PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestFiveMinuteTutorial::test_scenario_3_resolve_blocker PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestFiveMinuteTutorial::test_scenario_4_agent_resume PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestCommonPatterns::test_pattern_1_sync_blocker PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestCommonPatterns::test_pattern_2_async_blocker PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestCommonPatterns::test_pattern_3_multiple_blockers PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestTroubleshooting::test_blocker_not_appearing_wrong_project PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestTroubleshooting::test_duplicate_resolutions PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestTroubleshooting::test_stale_blockers_expiration PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestAdvancedUsage::test_blocker_metrics PASSED [ 57%]
tests/integration/test_quickstart_validation.py::TestAdvancedUsage::test_rate_limiting PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_full_workflow_approve PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_full_workflow_with_agent_pool PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_review_failure_creates_blocker PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_blocker_includes_all_findings PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_blocker_has_actionable_suggestions PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_rereview_iteration_limit PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_rereview_after_fixes PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database PASSED [ 57%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_escalate_to_human_after_max_iterations PASSED [ 58%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_review_with_lead_agent_integration PASSED [ 58%]
tests/integration/test_review_workflow.py::TestReviewWorkflow::test_concurrent_reviews PASSED [ 58%]
tests/integration/test_score_recalculation.py::TestScoreRecalculationIntegration::test_score_recalculation_with_aged_item PASSED [ 58%]
tests/integration/test_score_recalculation.py::TestScoreRecalculationIntegration::test_score_recalculation_with_high_access_count PASSED [ 58%]
tests/integration/test_score_recalculation.py::TestScoreRecalculationIntegration::test_recalculation_with_no_items PASSED [ 58%]
tests/integration/test_score_recalculation.py::TestScoreRecalculationIntegration::test_recalculation_with_multiple_items PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestFullSessionLifecycle::test_end_to_end_session_workflow PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestFullSessionLifecycle::test_session_persists_across_restarts PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestCorruptedSessionHandling::test_corrupted_json_file_returns_none PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestCorruptedSessionHandling::test_malformed_json_structure PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestCorruptedSessionHandling::test_clear_session_removes_corrupted_file PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestCtrlCSessionSave::test_keyboard_interrupt_saves_session PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestCtrlCSessionSave::test_multiple_interrupts_only_last_state_saved PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestSessionEdgeCases::test_empty_session_state PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestSessionEdgeCases::test_session_with_max_items PASSED [ 58%]
tests/integration/test_session_lifecycle.py::TestSessionEdgeCases::test_session_file_permissions PASSED [ 58%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_worker_saves_and_loads_context PASSED [ 58%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_context_persists_across_sessions PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_get_context_item_by_id PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_get_nonexistent_item_returns_none PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_access_tracking_updates PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_multiple_item_types PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_tier_filtering_works PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_empty_content_raises_error PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestWorkerContextStorageIntegration::test_multiple_agents_isolated_context PASSED [ 59%]
tests/integration/test_worker_context_storage.py::TestMVPDemonstration::test_mvp_demo_agent_saves_task_and_retrieves PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_analyzer_initialization PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_analyze_simple_code PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_analyze_complex_code PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_cyclomatic_complexity_calculation PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_halstead_metrics PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_maintainability_index PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_threshold_simple PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_threshold_moderate PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_threshold_complex PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_function_length_detection PASSED [ 59%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_analyze_multiple_files PASSED [ 60%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_analyze_nonexistent_file PASSED [ 60%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_analyze_non_python_file PASSED [ 60%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_finding_format PASSED [ 60%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_score_calculation PASSED [ 60%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_empty_file PASSED [ 60%]
tests/lib/quality/test_complexity_analyzer.py::TestComplexityAnalyzer::test_syntax_error_file PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_checker_initialization PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_detect_sql_injection PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_safe_sql_no_findings PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_detect_nosql_injection PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_detect_command_injection PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_detect_hardcoded_credentials PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_detect_weak_password_validation PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_detect_missing_auth_check PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_finding_format PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_severity_levels PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_suggestions_provided PASSED [ 60%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_check_multiple_files PASSED [ 61%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_empty_file PASSED [ 61%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_nonexistent_file PASSED [ 61%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_non_python_file PASSED [ 61%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_multiple_patterns_in_file PASSED [ 61%]
tests/lib/quality/test_owasp_patterns.py::TestOWASPPatterns::test_line_numbers PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_scanner_initialization PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_analyze_secure_code PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_detect_hardcoded_password PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_detect_sql_injection PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_detect_command_injection PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_severity_mapping_critical PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_severity_mapping_high PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_severity_mapping_medium PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_bandit_integration PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_finding_format PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_analyze_multiple_files PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_score_calculation PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_empty_file PASSED [ 61%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_analyze_nonexistent_file PASSED [ 62%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_analyze_non_python_file PASSED [ 62%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_multiple_vulnerabilities_in_file PASSED [ 62%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_suggestion_included PASSED [ 62%]
tests/lib/quality/test_security_scanner.py::TestSecurityScanner::test_confidence_levels PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointCreation::test_create_checkpoint_saves_git_commit PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointCreation::test_create_checkpoint_backs_up_database PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointCreation::test_create_checkpoint_saves_context_snapshot PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointCreation::test_create_checkpoint_generates_metadata PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointCreation::test_create_checkpoint_saves_to_database PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointCreation::test_create_checkpoint_creates_directory PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointListing::test_list_checkpoints_returns_all PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointListing::test_list_checkpoints_sorted_by_date PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointListing::test_list_checkpoints_empty PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointRestore::test_restore_checkpoint_reverts_git PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointRestore::test_restore_checkpoint_reverts_database PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointRestore::test_restore_checkpoint_reverts_context PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointDiff::test_restore_shows_diff_when_not_confirmed PASSED [ 62%]
tests/lib/test_checkpoint_manager.py::TestCheckpointDiff::test_show_diff_returns_git_diff_output PASSED [ 63%]
tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_invalid_checkpoint_fails_gracefully PASSED [ 63%]
tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_missing_database_backup_fails PASSED [ 63%]
tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_missing_context_snapshot_fails PASSED [ 63%]
tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files PASSED [ 63%]
tests/lib/test_checkpoint_manager.py::TestCheckpointContextSnapshot::test_checkpoint_context_snapshot_format PASSED [ 63%]
tests/lib/test_metrics_tracker.py::test_record_token_usage PASSED        [ 63%]
tests/lib/test_metrics_tracker.py::test_record_token_usage_without_task PASSED [ 63%]
tests/lib/test_metrics_tracker.py::test_calculate_cost_sonnet PASSED     [ 63%]
tests/lib/test_metrics_tracker.py::test_calculate_cost_sonnet_small PASSED [ 63%]
tests/lib/test_metrics_tracker.py::test_calculate_cost_opus PASSED       [ 63%]
tests/lib/test_metrics_tracker.py::test_calculate_cost_haiku PASSED      [ 63%]
tests/lib/test_metrics_tracker.py::test_calculate_cost_unknown_model PASSED [ 63%]
tests/lib/test_metrics_tracker.py::test_get_project_total_cost PASSED    [ 63%]
tests/lib/test_metrics_tracker.py::test_get_project_total_cost_empty PASSED [ 63%]
tests/lib/test_metrics_tracker.py::test_get_cost_by_agent PASSED         [ 63%]
tests/lib/test_metrics_tracker.py::test_get_cost_by_model PASSED         [ 63%]
tests/lib/test_metrics_tracker.py::test_get_token_usage_timeline PASSED  [ 63%]
tests/lib/test_metrics_tracker.py::test_get_token_usage_stats_with_end_date PASSED [ 63%]
tests/lib/test_quality_gate_tool.py::test_invalid_check_names PASSED     [ 64%]
tests/lib/test_quality_gate_tool.py::test_valid_check_names PASSED       [ 64%]
tests/lib/test_quality_gate_tool.py::test_empty_checks_list PASSED       [ 64%]
tests/lib/test_quality_gate_tool.py::test_negative_task_id PASSED        [ 64%]
tests/lib/test_quality_gate_tool.py::test_zero_project_id PASSED         [ 64%]
tests/lib/test_quality_gate_tool.py::test_invalid_task_id PASSED         [ 64%]
tests/lib/test_quality_gate_tool.py::test_invalid_project_id PASSED      [ 64%]
tests/lib/test_quality_gate_tool.py::test_project_root_from_database PASSED [ 64%]
tests/lib/test_quality_gate_tool.py::test_run_all_gates_success PASSED   [ 64%]
tests/lib/test_quality_gate_tool.py::test_run_specific_gates PASSED      [ 64%]
tests/lib/test_quality_gate_tool.py::test_tests_gate_failure PASSED      [ 64%]
tests/lib/test_quality_gate_tool.py::test_coverage_gate_with_percentage PASSED [ 64%]
tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues PASSED [ 64%]
tests/lib/test_quality_gate_tool.py::test_linting_gate_failure PASSED    [ 64%]
tests/lib/test_quality_gate_tool.py::test_multiple_gate_failures PASSED  [ 64%]
tests/lib/test_quality_gate_tool.py::test_type_check_gate_failure PASSED [ 64%]
tests/lib/test_quality_gate_tool.py::test_result_format_structure PASSED [ 64%]
tests/lib/test_quality_gate_tool.py::test_success_result_format PASSED   [ 64%]
tests/lib/test_quality_gate_tool.py::test_failure_result_format PASSED   [ 65%]
tests/lib/test_quality_gate_tool.py::test_error_result_format PASSED     [ 65%]
tests/lib/test_quality_gate_tool.py::test_timestamp_format PASSED        [ 65%]
tests/lib/test_quality_gate_tool.py::test_execution_time_positive PASSED [ 65%]
tests/lib/test_quality_gate_tool.py::test_database_error_handling PASSED [ 65%]
tests/lib/test_quality_gate_tool.py::test_quality_gate_execution_error PASSED [ 65%]
tests/lib/test_quality_gate_tool.py::test_missing_project_defaults_to_current PASSED [ 65%]
tests/lib/test_quality_gate_tool.py::test_exception_never_raised PASSED  [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_test_failure PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_type_errors PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_low_coverage PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_critical_review PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_pass_all_gates PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_create_blocker_on_failure PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_require_human_approval PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGates::test_linting_gate PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGateResult::test_quality_gate_result_passed PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGateResult::test_quality_gate_result_failed PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGateResult::test_quality_gate_result_critical_failures PASSED [ 65%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_jest_failure PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_tsc_failure PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_failure PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_task_has_python_files_default PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_task_has_javascript_files_default PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_task_has_typescript_files_default PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_contains_risky_changes_no_files PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_pytest_timeout PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_pytest_not_found PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_jest_timeout PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_jest_not_found PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_timeout PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_tsc_timeout PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_tsc_not_found PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_coverage_timeout PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_coverage_not_found PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_ruff_timeout PASSED [ 66%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_ruff_not_found PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_timeout PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_not_found PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_extract_pytest_summary_no_match PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_extract_pytest_summary_success PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_extract_jest_summary_no_match PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_extract_mypy_summary_no_errors PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_extract_tsc_summary_no_errors PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_extract_eslint_summary_no_match PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_create_quality_blocker_no_failures PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_multiple_gate_failures PASSED [ 67%]
tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns PASSED [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_env_file PASSED        [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_env_variants PASSED    [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_credentials_json PASSED [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_secrets_yaml PASSED    [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_private_keys PASSED    [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_git_directory PASSED   [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_rm_rf_root PASSED      [ 67%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_fork_bomb PASSED       [ 68%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_disk_wipe PASSED       [ 68%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_filesystem_format PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_pre_hook_blocks_chmod_777_root PASSED  [ 68%]
tests/lib/test_sdk_hooks.py::test_pre_hook_allows_safe_file_write PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_pre_hook_allows_safe_bash_commands PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_pre_hook_allows_safe_rm_commands PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_pre_hook_allows_other_tools PASSED     [ 68%]
tests/lib/test_sdk_hooks.py::test_post_hook_records_write_tool_usage PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_post_hook_records_bash_tool_usage PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_post_hook_detects_error_in_response PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_post_hook_ignores_non_tracked_tools PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_build_codeframe_hooks_structure PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_build_codeframe_hooks_sdk_not_available PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_build_codeframe_hooks_creates_tracker_if_none PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_fallback_validation_blocks_protected_file PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_fallback_validation_blocks_dangerous_command PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_fallback_validation_allows_safe_operations PASSED [ 68%]
tests/lib/test_sdk_hooks.py::test_fallback_validation_handles_missing_input PASSED [ 69%]
tests/lib/test_sdk_hooks.py::test_pre_hook_handles_missing_tool_name PASSED [ 69%]
tests/lib/test_sdk_hooks.py::test_pre_hook_handles_missing_tool_input PASSED [ 69%]
tests/lib/test_sdk_hooks.py::test_post_hook_handles_empty_input PASSED   [ 69%]
tests/lib/test_sdk_hooks.py::test_pre_hook_case_insensitive_matching PASSED [ 69%]
tests/lib/test_sdk_hooks.py::test_pre_and_post_hooks_integration PASSED  [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBasics::test_init_default PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBasics::test_init_cache_disabled PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBasics::test_count_tokens_simple PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBasics::test_count_tokens_empty_string PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBasics::test_count_tokens_whitespace_only PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterCache::test_cache_hit PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterCache::test_cache_miss PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterCache::test_cache_disabled_no_storage PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterCache::test_clear_cache PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterCache::test_cache_consistency PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBatch::test_batch_empty_list PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBatch::test_batch_single_item PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBatch::test_batch_multiple_items PASSED [ 69%]
tests/lib/test_token_counter.py::TestTokenCounterBatch::test_batch_with_duplicates PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterBatch::test_batch_with_empty_strings PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterBatch::test_batch_preserves_order PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterContext::test_context_empty_list PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterContext::test_context_single_item PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterContext::test_context_multiple_items PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterContext::test_context_missing_content_key PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterContext::test_context_with_metadata PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterContext::test_context_empty_content PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterEdgeCases::test_very_long_content PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterEdgeCases::test_unicode_content PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterEdgeCases::test_special_characters PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterEdgeCases::test_code_content PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterEdgeCases::test_model_fallback PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterEdgeCases::test_get_cache_stats_structure PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterPerformance::test_batch_vs_individual_accuracy PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterPerformance::test_cache_reuse PASSED [ 70%]
tests/lib/test_token_counter.py::TestTokenCounterPerformance::test_different_instances_independent_caches PASSED [ 70%]
tests/notifications/test_desktop.py::TestPlatformDetection::test_detects_darwin PASSED [ 71%]
tests/notifications/test_desktop.py::TestPlatformDetection::test_detects_linux PASSED [ 71%]
tests/notifications/test_desktop.py::TestPlatformDetection::test_detects_windows PASSED [ 71%]
tests/notifications/test_desktop.py::TestMacOSNotification::test_sends_notification_with_pync PASSED [ 71%]
tests/notifications/test_desktop.py::TestMacOSNotification::test_uses_fallback_when_pync_unavailable PASSED [ 71%]
tests/notifications/test_desktop.py::TestMacOSFallback::test_sends_notification_with_osascript PASSED [ 71%]
tests/notifications/test_desktop.py::TestLinuxNotification::test_sends_notification_with_notify_send PASSED [ 71%]
tests/notifications/test_desktop.py::TestLinuxFallback::test_uses_dbus_when_notify_send_fails PASSED [ 71%]
tests/notifications/test_desktop.py::TestWindowsNotification::test_sends_notification_with_win10toast PASSED [ 71%]
tests/notifications/test_desktop.py::TestWindowsFallback::test_uses_plyer_when_win10toast_unavailable PASSED [ 71%]
tests/notifications/test_desktop.py::TestNotificationFormatting::test_truncates_long_title PASSED [ 71%]
tests/notifications/test_desktop.py::TestNotificationFormatting::test_truncates_long_message PASSED [ 71%]
tests/notifications/test_desktop.py::TestNotificationFormatting::test_handles_empty_strings PASSED [ 71%]
tests/notifications/test_desktop.py::TestIsAvailable::test_is_available_on_macos PASSED [ 71%]
tests/notifications/test_desktop.py::TestIsAvailable::test_is_available_on_linux PASSED [ 71%]
tests/notifications/test_desktop.py::TestIsAvailable::test_is_available_on_windows PASSED [ 71%]
tests/notifications/test_desktop.py::TestIsAvailable::test_not_available_on_unsupported_platform PASSED [ 71%]
tests/notifications/test_desktop.py::TestFireAndForget::test_does_not_block_on_error PASSED [ 71%]
tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure PASSED [ 71%]
tests/notifications/test_router.py::TestNotificationRouter::test_routes_to_desktop_and_webhook PASSED [ 72%]
tests/notifications/test_router.py::TestNotificationRouter::test_skips_desktop_when_disabled PASSED [ 72%]
tests/notifications/test_router.py::TestNotificationRouter::test_skips_webhook_when_disabled PASSED [ 72%]
tests/notifications/test_router.py::TestNotificationRouter::test_filters_sync_only_when_configured PASSED [ 72%]
tests/notifications/test_router.py::TestNotificationRouter::test_sends_all_blockers_when_sync_only_false PASSED [ 72%]
tests/notifications/test_router.py::TestNotificationRouter::test_continues_on_desktop_failure PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_is_enabled_with_url PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_is_enabled_without_url PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_is_enabled_with_empty_url PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_is_enabled_with_whitespace_url PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_format_payload PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_format_payload_async_type PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_sync_success PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_async_skipped PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_disabled PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_timeout PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_client_error PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_unexpected_error PASSED [ 72%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_http_error_status PASSED [ 73%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_background PASSED [ 73%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_correct_payload PASSED [ 73%]
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_timeout_configured PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_empty_file PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_simple_class PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_class_with_methods PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_multiple_classes PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_top_level_function PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_mixed_classes_and_functions PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_nested_classes PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_class_with_docstring PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_function_with_decorators PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_file_with_imports PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_async_functions PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_class_variables PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parse_syntax_error_file PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_line_numbers_are_accurate PASSED [ 73%]
tests/parsers/test_python_parser.py::TestPythonParser::test_parser_preserves_file_path PASSED [ 73%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_empty_file PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_simple_class PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_class_with_methods PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_interface PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_type_alias PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_function PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_arrow_function PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_react_component PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_exported_class PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_javascript_file PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parse_mixed_interfaces_and_classes PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_line_numbers_are_accurate PASSED [ 74%]
tests/parsers/test_typescript_parser.py::TestTypeScriptParser::test_parser_preserves_file_path PASSED [ 74%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_create_correction_attempt PASSED [ 74%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_create_correction_attempt_minimal PASSED [ 74%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_get_correction_attempts_by_task PASSED [ 74%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_get_latest_correction_attempt PASSED [ 74%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_get_latest_correction_attempt_none PASSED [ 74%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_count_correction_attempts PASSED [ 75%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_correction_attempt_with_test_result PASSED [ 75%]
tests/persistence/test_correction_database.py::TestCorrectionAttemptDatabase::test_correction_attempts_ordered_by_attempt_number PASSED [ 75%]
tests/persistence/test_database.py::TestDatabaseInitialization::test_database_initialization PASSED [ 75%]
tests/persistence/test_database.py::TestDatabaseInitialization::test_database_with_nonexistent_path PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_create_project PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_get_project_by_id PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_get_nonexistent_project_returns_none PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_list_projects PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_list_projects_empty PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_update_project_status PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_update_project_config PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_update_nonexistent_project PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_project_has_default_phase PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_update_project_phase PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_project_phase_constraint PASSED [ 75%]
tests/persistence/test_database.py::TestProjectCRUD::test_phase_transitions PASSED [ 75%]
tests/persistence/test_database.py::TestAgentCRUD::test_create_agent PASSED [ 75%]
tests/persistence/test_database.py::TestAgentCRUD::test_get_agent PASSED [ 75%]
tests/persistence/test_database.py::TestAgentCRUD::test_update_agent_status PASSED [ 76%]
tests/persistence/test_database.py::TestAgentCRUD::test_update_agent_maturity PASSED [ 76%]
tests/persistence/test_database.py::TestAgentCRUD::test_list_agents_by_project PASSED [ 76%]
tests/persistence/test_database.py::TestMemoryCRUD::test_create_memory PASSED [ 76%]
tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory PASSED [ 76%]
tests/persistence/test_database.py::TestMemoryCRUD::test_get_project_memories PASSED [ 76%]
tests/persistence/test_database.py::TestMemoryCRUD::test_get_conversation_messages PASSED [ 76%]
tests/persistence/test_database.py::TestDatabaseConnection::test_close_connection PASSED [ 76%]
tests/persistence/test_database.py::TestDatabaseConnection::test_context_manager PASSED [ 76%]
tests/persistence/test_database.py::TestDataIntegrity::test_project_status_constraint PASSED [ 76%]
tests/persistence/test_database.py::TestDataIntegrity::test_agent_type_constraint PASSED [ 76%]
tests/persistence/test_database.py::TestDataIntegrity::test_foreign_key_constraint PASSED [ 76%]
tests/persistence/test_database.py::TestTransactions::test_rollback_on_error PASSED [ 76%]
tests/persistence/test_database.py::TestDatabaseIntegration::test_complete_project_workflow PASSED [ 76%]
tests/persistence/test_database.py::TestTestResults::test_create_test_result PASSED [ 76%]
tests/persistence/test_database.py::TestTestResults::test_get_test_results_by_task PASSED [ 76%]
tests/persistence/test_database.py::TestTestResults::test_test_results_foreign_key_to_task PASSED [ 76%]
tests/persistence/test_database.py::TestTestResults::test_multiple_test_runs_for_task PASSED [ 76%]
tests/persistence/test_database.py::TestLintResults::test_create_lint_result PASSED [ 76%]
tests/persistence/test_database.py::TestLintResults::test_get_lint_results_for_task PASSED [ 77%]
tests/persistence/test_database.py::TestLintResults::test_get_lint_trend PASSED [ 77%]
tests/persistence/test_database.py::TestLintResults::test_lint_results_foreign_key_to_task PASSED [ 77%]
tests/persistence/test_database.py::TestLintResults::test_multiple_linters_for_same_task PASSED [ 77%]
tests/persistence/test_database.py::TestLintResults::test_lint_output_json_storage PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestGitBranchesSchema::test_table_exists PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestGitBranchesSchema::test_table_columns PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestGitBranchesSchema::test_status_constraint PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestCreateGitBranch::test_create_git_branch_basic PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestCreateGitBranch::test_create_git_branch_with_timestamp PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestCreateGitBranch::test_create_git_branch_duplicate_issue PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestCreateGitBranch::test_create_git_branch_nonexistent_issue PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestGetBranchForIssue::test_get_branch_for_issue_exists PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestGetBranchForIssue::test_get_branch_for_issue_not_found PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestGetBranchForIssue::test_get_branch_for_issue_multiple_branches PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestGetBranchForIssue::test_get_branch_for_issue_only_active PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestMarkBranchMerged::test_mark_branch_merged_success PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestMarkBranchMerged::test_mark_branch_merged_nonexistent PASSED [ 77%]
tests/persistence/test_database_git_branches.py::TestMarkBranchMerged::test_mark_branch_merged_already_merged PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_merged_branches PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_branches_by_status_empty PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestGetAllBranchesForIssue::test_get_all_branches_for_issue PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestGetAllBranchesForIssue::test_get_all_branches_for_issue_none PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestBranchCleanup::test_mark_branch_abandoned PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestBranchCleanup::test_delete_branch_record PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestBranchStatistics::test_count_branches_by_issue PASSED [ 78%]
tests/persistence/test_database_git_branches.py::TestBranchStatistics::test_get_branch_statistics PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssuesTableCreation::test_issues_table_created PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssuesTableCreation::test_issues_table_columns PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssuesTableCreation::test_tasks_table_enhanced_columns PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssuesTableCreation::test_issues_indexes_created PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_create_issue_minimal PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_create_issue_full PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_get_issue_by_id PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_get_nonexistent_issue_returns_none PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_list_issues_by_project PASSED [ 78%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_list_issues_empty_project PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_list_issues_filters_by_project PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_update_issue_status PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_update_issue_multiple_fields PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_update_issue_with_completed_timestamp PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueCRUD::test_update_nonexistent_issue PASSED [ 79%]
tests/persistence/test_database_issues.py::TestTaskIssueRelationship::test_create_task_with_issue_id PASSED [ 79%]
tests/persistence/test_database_issues.py::TestTaskIssueRelationship::test_get_tasks_by_issue PASSED [ 79%]
tests/persistence/test_database_issues.py::TestTaskIssueRelationship::test_get_tasks_by_issue_empty PASSED [ 79%]
tests/persistence/test_database_issues.py::TestTaskIssueRelationship::test_task_can_parallelize_flag PASSED [ 79%]
tests/persistence/test_database_issues.py::TestTaskIssueRelationship::test_get_tasks_by_parent_issue_number PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueConstraints::test_unique_issue_number_per_project PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueConstraints::test_same_issue_number_different_projects_allowed PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_status_constraint PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_priority_constraint PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueConstraints::test_task_foreign_key_to_issue PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueTaskQueries::test_get_issue_with_task_counts PASSED [ 79%]
tests/persistence/test_database_issues.py::TestIssueTaskQueries::test_get_issue_completion_status PASSED [ 80%]
tests/persistence/test_database_issues.py::TestIssueTaskQueries::test_list_issues_with_progress PASSED [ 80%]
tests/persistence/test_database_issues.py::TestIssueTaskIntegration::test_complete_issue_workflow PASSED [ 80%]
tests/persistence/test_database_issues.py::TestIssueTaskIntegration::test_parallel_task_execution PASSED [ 80%]
tests/persistence/test_database_issues.py::TestIssueTaskIntegration::test_hierarchical_numbering_consistency PASSED [ 80%]
tests/persistence/test_database_schema.py::test_projects_table_has_new_columns PASSED [ 80%]
tests/persistence/test_database_schema.py::test_source_type_check_constraint PASSED [ 80%]
tests/persistence/test_database_schema.py::test_description_not_null PASSED [ 80%]
tests/persistence/test_migration_001.py::TestMigration001::test_fresh_database_no_migration_needed PASSED [ 80%]
tests/persistence/test_migration_001.py::TestMigration001::test_migration_with_existing_data PASSED [ 80%]
tests/persistence/test_migration_001.py::TestMigration001::test_arbitrary_agent_types PASSED [ 80%]
tests/persistence/test_migration_001.py::TestMigration001::test_migration_tracking PASSED [ 80%]
tests/persistence/test_migration_001.py::TestMigration001::test_migration_idempotent PASSED [ 80%]
tests/persistence/test_migration_001.py::TestMigration001::test_rollback_migration PASSED [ 80%]
tests/persistence/test_migration_001.py::TestMigration001::test_rollback_fails_with_custom_types PASSED [ 80%]
tests/persistence/test_migration_006.py::TestMigration006Upgrade::test_creates_lint_results_table PASSED [ 80%]
tests/persistence/test_migration_006.py::TestMigration006Upgrade::test_adds_commit_sha_to_tasks PASSED [ 80%]
tests/persistence/test_migration_006.py::TestMigration006Upgrade::test_creates_composite_index_on_context_items PASSED [ 80%]
tests/persistence/test_migration_006.py::TestMigration006Upgrade::test_creates_lint_results_indexes PASSED [ 80%]
tests/persistence/test_migration_006.py::TestMigration006Upgrade::test_creates_partial_index_on_commit_sha PASSED [ 81%]
tests/persistence/test_migration_006.py::TestMigration006Downgrade::test_drops_lint_results_table PASSED [ 81%]
tests/persistence/test_migration_006.py::TestMigration006Downgrade::test_drops_composite_index PASSED [ 81%]
tests/persistence/test_migration_006.py::TestMigration006Downgrade::test_drops_lint_results_indexes PASSED [ 81%]
tests/persistence/test_migration_006.py::TestMigration006Downgrade::test_drops_partial_index_on_commit_sha PASSED [ 81%]
tests/persistence/test_migration_006.py::TestMigration006Idempotency::test_can_run_upgrade_twice_safely PASSED [ 81%]
tests/persistence/test_migration_006.py::TestMigration006Idempotency::test_can_run_downgrade_on_non_migrated_db PASSED [ 81%]
tests/persistence/test_project_agents.py::test_project_agents_table_exists PASSED [ 81%]
tests/persistence/test_project_agents.py::test_project_agents_indexes_exist PASSED [ 81%]
tests/persistence/test_project_agents.py::test_agents_table_no_project_id PASSED [ 81%]
tests/persistence/test_project_agents.py::test_assign_agent_to_project PASSED [ 81%]
tests/persistence/test_project_agents.py::test_assign_multiple_agents_to_project PASSED [ 81%]
tests/persistence/test_project_agents.py::test_assign_agent_to_multiple_projects PASSED [ 81%]
tests/persistence/test_project_agents.py::test_assign_duplicate_active_agent_fails PASSED [ 81%]
tests/persistence/test_project_agents.py::test_assign_agent_after_removal_succeeds PASSED [ 81%]
tests/persistence/test_project_agents.py::test_get_agents_for_project_empty PASSED [ 81%]
tests/persistence/test_project_agents.py::test_get_agents_for_project_active_only PASSED [ 81%]
tests/persistence/test_project_agents.py::test_get_agents_for_project_all PASSED [ 81%]
tests/persistence/test_project_agents.py::test_get_agents_for_project_includes_metadata PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_projects_for_agent_empty PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_projects_for_agent_active_only PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_projects_for_agent_all PASSED [ 82%]
tests/persistence/test_project_agents.py::test_remove_agent_from_project PASSED [ 82%]
tests/persistence/test_project_agents.py::test_remove_nonexistent_assignment PASSED [ 82%]
tests/persistence/test_project_agents.py::test_remove_already_removed_agent PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_agent_assignment PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_agent_assignment_nonexistent PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_agent_assignment_returns_latest PASSED [ 82%]
tests/persistence/test_project_agents.py::test_reassign_agent_role PASSED [ 82%]
tests/persistence/test_project_agents.py::test_reassign_role_nonexistent_assignment PASSED [ 82%]
tests/persistence/test_project_agents.py::test_reassign_role_inactive_assignment PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_available_agents_all PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_available_agents_filter_by_type PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_available_agents_exclude_project PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_available_agents_respects_capacity PASSED [ 82%]
tests/persistence/test_project_agents.py::test_get_available_agents_ordering PASSED [ 82%]
tests/persistence/test_project_agents.py::test_cascade_delete_project PASSED [ 82%]
tests/persistence/test_project_agents.py::test_cascade_delete_agent PASSED [ 83%]
tests/persistence/test_project_agents.py::test_unassigned_at_check_constraint PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_tables_created_on_startup PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_connection_lifecycle PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_uses_config_path PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_connection_survives_requests PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseAccess::test_database_accessible_from_endpoint PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseErrorHandling::test_server_handles_database_initialization_error PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseErrorHandling::test_database_path_defaults_correctly PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseIntegration::test_server_startup_with_database PASSED [ 83%]
tests/persistence/test_server_database.py::TestServerDatabaseIntegration::test_database_operations_during_requests PASSED [ 83%]
tests/planning/test_dependency_resolver.py::TestDAGConstruction::test_build_empty_graph PASSED [ 83%]
tests/planning/test_dependency_resolver.py::TestDAGConstruction::test_build_simple_linear_graph PASSED [ 83%]
tests/planning/test_dependency_resolver.py::TestDAGConstruction::test_build_complex_graph PASSED [ 83%]
tests/planning/test_dependency_resolver.py::TestDAGConstruction::test_build_graph_with_completed_tasks PASSED [ 83%]
tests/planning/test_dependency_resolver.py::TestDAGConstruction::test_build_graph_comma_separated_format PASSED [ 83%]
tests/planning/test_dependency_resolver.py::TestCycleDetection::test_detect_no_cycle_linear PASSED [ 83%]
tests/planning/test_dependency_resolver.py::TestCycleDetection::test_detect_no_cycle_complex PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestCycleDetection::test_detect_direct_cycle PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestCycleDetection::test_detect_indirect_cycle PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestCycleDetection::test_detect_self_dependency PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestReadyTasks::test_get_ready_tasks_no_dependencies PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestReadyTasks::test_get_ready_tasks_some_completed PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestReadyTasks::test_get_ready_tasks_all_dependencies_satisfied PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestReadyTasks::test_get_ready_tasks_exclude_completed PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestUnblocking::test_unblock_single_task PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestUnblocking::test_unblock_multiple_tasks PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestUnblocking::test_unblock_cascading PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestUnblocking::test_unblock_partial_dependencies PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestDependencyValidation::test_validate_valid_dependency PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestDependencyValidation::test_validate_would_create_cycle PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestDependencyValidation::test_validate_self_dependency PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestDependencyValidation::test_validate_safe_new_dependency PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestTopologicalSort::test_topological_sort_linear PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestTopologicalSort::test_topological_sort_complex PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestTopologicalSort::test_topological_sort_with_cycle PASSED [ 84%]
tests/planning/test_dependency_resolver.py::TestDependencyDepth::test_depth_no_dependencies PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestDependencyDepth::test_depth_linear_chain PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestDependencyDepth::test_depth_complex_graph PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestBlockedTasks::test_get_blocked_tasks_none PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestBlockedTasks::test_get_blocked_tasks_some PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestBlockedTasks::test_get_blocked_tasks_after_completion PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestEdgeCases::test_empty_graph_operations PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestEdgeCases::test_missing_task_reference PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestEdgeCases::test_invalid_depends_on_format PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestEdgeCases::test_clear_resets_state PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestIntegration::test_full_workflow_sequential PASSED [ 85%]
tests/planning/test_dependency_resolver.py::TestIntegration::test_full_workflow_parallel PASSED [ 85%]
tests/planning/test_issue_generator.py::TestPRDParsing::test_parse_prd_extracts_features_section PASSED [ 85%]
tests/planning/test_issue_generator.py::TestPRDParsing::test_parse_prd_identifies_feature_titles PASSED [ 85%]
tests/planning/test_issue_generator.py::TestPRDParsing::test_parse_prd_extracts_feature_descriptions PASSED [ 85%]
tests/planning/test_issue_generator.py::TestPRDParsing::test_parse_prd_handles_empty_prd PASSED [ 85%]
tests/planning/test_issue_generator.py::TestPRDParsing::test_parse_prd_handles_malformed_prd PASSED [ 85%]
tests/planning/test_issue_generator.py::TestPRDParsing::test_parse_prd_strips_priority_keywords_from_titles PASSED [ 85%]
tests/planning/test_issue_generator.py::TestPRDParsing::test_parse_prd_preserves_feature_order PASSED [ 86%]
tests/planning/test_issue_generator.py::TestPriorityAssignment::test_assign_priority_critical_keyword PASSED [ 86%]
tests/planning/test_issue_generator.py::TestPriorityAssignment::test_assign_priority_high_keyword PASSED [ 86%]
tests/planning/test_issue_generator.py::TestPriorityAssignment::test_assign_priority_medium_keyword PASSED [ 86%]
tests/planning/test_issue_generator.py::TestPriorityAssignment::test_assign_priority_low_keyword PASSED [ 86%]
tests/planning/test_issue_generator.py::TestPriorityAssignment::test_assign_priority_default_no_keyword PASSED [ 86%]
tests/planning/test_issue_generator.py::TestPriorityAssignment::test_assign_priority_case_insensitive PASSED [ 86%]
tests/planning/test_issue_generator.py::TestPriorityAssignment::test_assign_priority_with_multiple_keywords PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_creates_correct_count PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_assigns_sequential_numbers PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_with_different_sprint_numbers PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_sets_correct_titles PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_sets_descriptions PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_assigns_priorities_correctly PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_sets_status_to_pending PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_sets_workflow_step_to_zero PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_from_empty_prd_returns_empty_list PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueGeneration::test_generate_issues_handles_prd_without_priorities PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueValidation::test_issue_requires_title PASSED [ 86%]
tests/planning/test_issue_generator.py::TestIssueValidation::test_issue_number_format_validation PASSED [ 87%]
tests/planning/test_issue_generator.py::TestIssueValidation::test_issue_priority_range_validation PASSED [ 87%]
tests/planning/test_issue_generator.py::TestIssueGeneratorEdgeCases::test_generate_issues_with_very_long_features PASSED [ 87%]
tests/planning/test_issue_generator.py::TestIssueGeneratorEdgeCases::test_generate_issues_with_special_characters_in_titles PASSED [ 87%]
tests/planning/test_issue_generator.py::TestIssueGeneratorEdgeCases::test_generate_issues_with_nested_headers PASSED [ 87%]
tests/planning/test_issue_generator.py::TestIssueGeneratorEdgeCases::test_generate_issues_with_large_sprint_number PASSED [ 87%]
tests/planning/test_issue_generator.py::TestIssueGeneratorIntegration::test_issue_generator_creates_valid_issue_objects PASSED [ 87%]
tests/planning/test_issue_generator.py::TestIssueGeneratorIntegration::test_issue_generator_output_serializable PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDGenerationBasics::test_generate_prd_method_exists PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDGenerationBasics::test_generate_prd_loads_discovery_answers PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDGenerationBasics::test_generate_prd_sends_structured_prompt PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDStructure::test_prd_includes_required_sections PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDPersistence::test_prd_saved_to_file PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDPersistence::test_prd_stored_in_database PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDErrorHandling::test_generate_prd_handles_api_error PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDErrorHandling::test_generate_prd_requires_discovery_complete PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDErrorHandling::test_generate_prd_handles_empty_response PASSED [ 87%]
tests/planning/test_prd_generation.py::TestPRDTokenUsageTracking::test_prd_generation_logs_token_usage PASSED [ 87%]
tests/planning/test_task_decomposer.py::TestTaskDecomposerInitialization::test_task_decomposer_initializes_successfully PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_returns_list_of_tasks PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_creates_sequential_task_numbers PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_sets_parent_issue_number PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_creates_dependency_chain PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_sets_can_parallelize_to_false PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_inherits_priority_from_issue PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_sets_issue_id PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskDecomposition::test_decompose_issue_sets_project_id PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskValidation::test_decompose_issue_validates_task_has_title PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskValidation::test_decompose_issue_validates_task_has_description PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestTaskValidation::test_decompose_issue_raises_error_for_invalid_issue PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestAdaptiveTaskCount::test_simple_issue_generates_fewer_tasks PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestAdaptiveTaskCount::test_complex_issue_generates_more_tasks PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestPromptGeneration::test_build_decomposition_prompt_includes_issue_title PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestPromptGeneration::test_build_decomposition_prompt_includes_issue_description PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestPromptGeneration::test_build_decomposition_prompt_requests_3_to_8_tasks PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestResponseParsing::test_parse_claude_response_extracts_tasks PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestResponseParsing::test_parse_claude_response_handles_various_formats PASSED [ 88%]
tests/planning/test_task_decomposer.py::TestResponseParsing::test_parse_claude_response_handles_multiline_descriptions PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestResponseParsing::test_parse_claude_response_handles_empty_response PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestDependencyChainCreation::test_create_dependency_chain_sets_first_task_no_dependency PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestDependencyChainCreation::test_create_dependency_chain_links_sequential_tasks PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestDependencyChainCreation::test_create_dependency_chain_preserves_task_order PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestErrorHandling::test_decompose_issue_handles_provider_exception PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestErrorHandling::test_create_dependency_chain_with_empty_list PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestErrorHandling::test_parse_claude_response_truncates_too_many_tasks PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestTaskCountEstimation::test_estimate_task_count_for_short_description PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestTaskCountEstimation::test_estimate_task_count_for_medium_description PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestTaskCountEstimation::test_estimate_task_count_for_long_description PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestTaskCountEstimation::test_estimate_task_count_with_no_description PASSED [ 89%]
tests/planning/test_task_decomposer.py::TestTaskDecomposerIntegration::test_complete_decomposition_workflow PASSED [ 89%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderInitialization::test_provider_initialization_with_api_key PASSED [ 89%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderInitialization::test_provider_initialization_without_api_key_raises_error PASSED [ 89%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderInitialization::test_provider_initialization_with_empty_api_key_raises_error PASSED [ 89%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderInitialization::test_provider_initialization_with_custom_model PASSED [ 89%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderInitialization::test_provider_default_model PASSED [ 89%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderMessageSending::test_send_message_with_simple_conversation PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderMessageSending::test_send_message_with_multi_turn_conversation PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderMessageSending::test_send_message_handles_api_error PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderMessageSending::test_send_message_handles_timeout PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderMessageSending::test_send_message_with_empty_conversation_raises_error PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderMessageSending::test_send_message_with_invalid_role_raises_error PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderTokenUsage::test_send_message_returns_token_usage PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderTokenUsage::test_send_message_handles_missing_usage_data PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderErrorHandling::test_send_message_handles_authentication_error PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderErrorHandling::test_send_message_handles_rate_limit_error PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderErrorHandling::test_send_message_handles_api_connection_error PASSED [ 90%]
tests/providers/test_anthropic_provider.py::TestAnthropicProviderIntegration::test_complete_conversation_flow PASSED [ 90%]
tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_exists ERROR [ 90%]
tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_validates_request ERROR [ 90%]
tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_runs_quality_checks ERROR [ 90%]
tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_creates_blocker_on_failure ERROR [ 90%]
tests/test_review_api.py::TestReviewAPI::test_get_review_status_endpoint_exists ERROR [ 90%]
tests/test_review_api.py::TestReviewAPI::test_get_review_status_no_review_yet ERROR [ 90%]
tests/test_review_api.py::TestReviewAPI::test_get_review_stats_endpoint_exists ERROR [ 90%]
tests/test_review_api.py::TestReviewAPI::test_get_review_stats_aggregates_correctly ERROR [ 91%]
tests/test_review_api.py::TestReviewAPI::test_get_review_stats_no_reviews_yet ERROR [ 91%]
tests/testing/test_correction_attempt.py::TestCorrectionAttemptModel::test_correction_attempt_creation PASSED [ 91%]
tests/testing/test_correction_attempt.py::TestCorrectionAttemptModel::test_correction_attempt_minimal PASSED [ 91%]
tests/testing/test_correction_attempt.py::TestCorrectionAttemptModel::test_correction_attempt_validates_attempt_number PASSED [ 91%]
tests/testing/test_correction_attempt.py::TestCorrectionAttemptModel::test_correction_attempt_auto_timestamp PASSED [ 91%]
tests/testing/test_correction_attempt.py::TestCorrectionAttemptModel::test_correction_attempt_empty_strings PASSED [ 91%]
tests/testing/test_lint_runner.py::test_ruff_execution PASSED            [ 91%]
tests/testing/test_lint_runner.py::test_eslint_execution PASSED          [ 91%]
tests/testing/test_lint_runner.py::test_ruff_output_parsing PASSED       [ 91%]
tests/testing/test_lint_runner.py::test_eslint_output_parsing PASSED     [ 91%]
tests/testing/test_lint_runner.py::test_quality_gate_blocks_critical_errors PASSED [ 91%]
tests/testing/test_lint_runner.py::test_quality_gate_allows_warnings PASSED [ 91%]
tests/testing/test_lint_runner.py::test_pyproject_toml_config_loading PASSED [ 91%]
tests/testing/test_lint_runner.py::test_eslintrc_config_loading PASSED   [ 91%]
tests/testing/test_lint_runner.py::test_linter_not_found_graceful_handling PASSED [ 91%]
tests/testing/test_lint_runner.py::test_invalid_config_fallback_to_defaults PASSED [ 91%]
tests/testing/test_lint_runner.py::test_detect_language PASSED           [ 91%]
tests/testing/test_lint_runner.py::test_run_lint_parallel_execution PASSED [ 92%]
tests/testing/test_self_correction_integration.py::TestSelfCorrectionLoop::test_self_correction_successful_on_first_attempt PASSED [ 92%]
tests/testing/test_self_correction_integration.py::TestSelfCorrectionLoop::test_self_correction_exhausts_all_attempts PASSED [ 92%]
tests/testing/test_self_correction_integration.py::TestSelfCorrectionLoop::test_self_correction_successful_on_second_attempt PASSED [ 92%]
tests/testing/test_self_correction_integration.py::TestSelfCorrectionLoop::test_no_self_correction_when_tests_pass_initially PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestResultModel::test_test_result_creation PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestResultModel::test_test_result_default_values PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestResultModel::test_test_result_failed_status PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestResultModel::test_test_result_error_status PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerInit::test_test_runner_init_with_path PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerInit::test_test_runner_init_default_path PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerInit::test_test_runner_init_timeout PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerInit::test_test_runner_default_timeout PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_all_pass PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_some_fail PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_with_errors PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_no_tests_found PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_timeout PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_invalid_path PASSED [ 92%]
tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_pytest_not_installed PASSED [ 93%]
tests/testing/test_test_runner.py::TestPytestJSONParsing::test_parse_pytest_json_success PASSED [ 93%]
tests/testing/test_test_runner.py::TestPytestJSONParsing::test_parse_pytest_json_malformed PASSED [ 93%]
tests/testing/test_test_runner.py::TestPytestJSONParsing::test_parse_pytest_json_missing_fields PASSED [ 93%]
tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_real_pytest_passing FAILED [ 93%]
tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_real_pytest_failing FAILED [ 93%]
tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_real_pytest_errors FAILED [ 93%]
tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_specific_test_paths FAILED [ 93%]
tests/ui/test_deployment_mode.py::test_hosted_mode_blocks_local_path PASSED [ 93%]
tests/ui/test_deployment_mode.py::test_hosted_mode_allows_git_remote PASSED [ 93%]
tests/ui/test_deployment_mode.py::test_self_hosted_allows_all_sources PASSED [ 93%]
tests/ui/test_models.py::test_source_type_enum_values PASSED             [ 93%]
tests/ui/test_models.py::test_project_create_request_minimal PASSED      [ 93%]
tests/ui/test_models.py::test_project_create_request_git_remote PASSED   [ 93%]
tests/ui/test_models.py::test_project_create_request_validation_error PASSED [ 93%]
tests/ui/test_models.py::test_project_create_request_name_required PASSED [ 93%]
tests/ui/test_models.py::test_project_create_request_description_required PASSED [ 93%]
tests/ui/test_project_api.py::test_create_project_minimal PASSED         [ 93%]
tests/ui/test_project_api.py::test_create_project_git_remote PASSED      [ 94%]
tests/ui/test_project_api.py::test_create_project_validation_error PASSED [ 94%]
tests/ui/test_project_api.py::test_create_project_missing_description PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_status_basic PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_status_with_agent_and_progress PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_status_basic PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_status_with_task PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_test_result PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_commit_created_basic PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_commit_created_with_files PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_activity_update PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_progress_update PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_correction_attempt_in_progress PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_correction_attempt_failed PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_handles_exceptions PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_timestamp_format PASSED      [ 94%]
tests/ui/test_websocket_broadcasts.py::test_multiple_broadcasts_in_sequence PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_status_error_handling PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_test_result_error_handling PASSED [ 94%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_commit_created_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_activity_update_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_progress_update_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_correction_attempt_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_created_basic PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_created_with_completed_tasks PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_created_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_retired_basic PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_retired_default_tasks PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_retired_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_assigned_basic PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_assigned_with_title PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_assigned_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_blocked_basic PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_blocked_with_title PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_blocked_error_handling PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_unblocked_basic PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_unblocked_with_unblocked_by PASSED [ 95%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_unblocked_with_title PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_task_unblocked_error_handling PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_created_basic PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_created_with_optional_fields PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_created_no_task PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_created_error_handling PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_resolved_basic PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_resolved_error_handling PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_resumed_basic PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_resumed_error_handling PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_expired_basic PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_expired_no_task PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_blocker_expired_error_handling PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_answer_submitted_basic PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_answer_submitted_percentage_calculation PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_answer_submitted_zero_total PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_answer_submitted_clamping PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_answer_submitted_error_handling PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_question_presented_basic PASSED [ 96%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_question_presented_error_handling PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_progress_updated_basic PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_progress_updated_error_handling PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_completed_basic PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_completed_default_next_phase PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_discovery_completed_error_handling PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_progress_update_auto_calculation PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_progress_update_zero_total PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_progress_update_negative_total PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_progress_update_clamping_upper PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_progress_update_clamping_lower PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_agent_status_with_task_no_title PASSED [ 97%]
tests/ui/test_websocket_broadcasts.py::test_broadcast_commit_created_with_files_count PASSED [ 97%]
tests/workspace/test_workspace_manager.py::test_workspace_manager_creates_directory PASSED [ 97%]
tests/workspace/test_workspace_manager.py::test_workspace_manager_empty_source PASSED [ 97%]
tests/workspace/test_workspace_manager.py::test_workspace_manager_unique_paths PASSED [ 97%]
tests/workspace/test_workspace_manager_comprehensive.py::test_workspace_manager_init_creates_root PASSED [ 97%]
tests/workspace/test_workspace_manager_comprehensive.py::test_workspace_manager_init_existing_root PASSED [ 97%]
tests/workspace/test_workspace_manager_comprehensive.py::test_create_empty_workspace PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_create_empty_workspace_duplicate_fails PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_empty_git_called_process_error PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_empty_git_timeout PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_empty_git_not_found PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_success PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_missing_url PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_empty_url PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_network_error PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_repository_not_found PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_branch_not_found_specific PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_branch_pattern_match PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_authentication_failed PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_permission_denied PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_generic_error PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_timeout_expired PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_git_file_not_found PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_success PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_with_existing_git PASSED [ 98%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_missing_path PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_empty_path PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_nonexistent_path PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_file_not_directory PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_not_readable PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_copy_error PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_permission_error PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_git_init_fails_gracefully PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_is_safe_path_valid PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_is_safe_path_outside_home PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_is_safe_path_sensitive_directory PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_is_safe_path_nonexistent PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_local_unsafe_path PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_init_from_upload_placeholder PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_create_workspace_cleanup_on_failure PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_create_workspace_multiple_projects PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_workspace_root_conversion_to_path PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_create_workspace_nested_parent_dirs PASSED [ 99%]
tests/workspace/test_workspace_manager_comprehensive.py::test_git_clone_with_stderr_none PASSED [100%]

==================================== ERRORS ====================================
_______ ERROR at setup of TestReviewAPI.test_post_review_endpoint_exists _______

db = <codeframe.persistence.database.Database object at 0x70ce5f536f30>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce5f536f30>
original_db_path = None
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
_ ERROR at setup of TestReviewAPI.test_post_review_endpoint_validates_request __

db = <codeframe.persistence.database.Database object at 0x70ce6427b890>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce6427b890>
original_db_path = '/tmp/tmp5navzkog.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
_ ERROR at setup of TestReviewAPI.test_post_review_endpoint_runs_quality_checks _

db = <codeframe.persistence.database.Database object at 0x70ce5ef26090>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce5ef26090>
original_db_path = '/tmp/tmp_e_3dhf3.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
_ ERROR at setup of TestReviewAPI.test_post_review_endpoint_creates_blocker_on_failure _

db = <codeframe.persistence.database.Database object at 0x70ce6528f1d0>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce6528f1d0>
original_db_path = '/tmp/tmpdyxgu2fo.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
____ ERROR at setup of TestReviewAPI.test_get_review_status_endpoint_exists ____

db = <codeframe.persistence.database.Database object at 0x70ce5f54cef0>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce5f54cef0>
original_db_path = '/tmp/tmpx39v_kpq.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
_____ ERROR at setup of TestReviewAPI.test_get_review_status_no_review_yet _____

db = <codeframe.persistence.database.Database object at 0x70ce5f54d550>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce5f54d550>
original_db_path = '/tmp/tmpe7yzt3lm.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
____ ERROR at setup of TestReviewAPI.test_get_review_stats_endpoint_exists _____

db = <codeframe.persistence.database.Database object at 0x70ce5f54e870>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce5f54e870>
original_db_path = '/tmp/tmpe0_mt0uu.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
__ ERROR at setup of TestReviewAPI.test_get_review_stats_aggregates_correctly __

db = <codeframe.persistence.database.Database object at 0x70ce5f54e5d0>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce5f54e5d0>
original_db_path = '/tmp/tmp2wdd0gx5.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
_____ ERROR at setup of TestReviewAPI.test_get_review_stats_no_reviews_yet _____

db = <codeframe.persistence.database.Database object at 0x70ce6528f410>

    @pytest.fixture
    def client(db):
        """Create a test client with database."""
        # Save original environment
        original_db_path = os.environ.get("DATABASE_PATH")
    
        # Set environment variable
        os.environ["DATABASE_PATH"] = str(db.db_path)
    
        # Reload server module to pick up new environment
        from codeframe.ui import server
        from importlib import reload
        reload(server)
    
        # Set database on app state
        server.app.state.db = db
    
        # Clear review cache before each test
>       server.review_cache.clear()
        ^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'

db         = <codeframe.persistence.database.Database object at 0x70ce6528f410>
original_db_path = '/tmp/tmpxyv44fj5.db'
reload     = <function reload at 0x70ce6bf994e0>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

tests/test_review_api.py:49: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
=================================== FAILURES ===================================
____ TestStartAgentEndpoint.test_start_agent_endpoint_returns_202_accepted _____

self = <test_agent_lifecycle.TestStartAgentEndpoint object at 0x70ce687bd590>
test_client_with_db = <starlette.testclient.TestClient object at 0x70ce66f938c0>
sample_project = {'config': None, 'created_at': '2025-12-11 22:38:36', 'id': 1, 'name': 'Lifecycle Test Project', ...}
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x70ce66dd9f30>

    def test_start_agent_endpoint_returns_202_accepted(self, test_client_with_db, sample_project, monkeypatch):
        """Test that start endpoint returns 202 Accepted immediately (non-blocking).
    
        Requirement: cf-10.2 - Return 202 Accepted immediately (non-blocking)
        """
        # ARRANGE
        project_id = sample_project["id"]
        monkeypatch.setenv("ANTHROPIC_API_KEY", "test-api-key")
    
        # ACT
>       with patch("codeframe.ui.server.start_agent") as mock_start_agent:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x70ce66dd9f30>
project_id = 1
sample_project = {'config': None,
 'created_at': '2025-12-11 22:38:36',
 'id': 1,
 'name': 'Lifecycle Test Project',
 'phase': 'discovery',
 'status': 'init'}
self       = <test_agent_lifecycle.TestStartAgentEndpoint object at 0x70ce687bd590>
test_client_with_db = <starlette.testclient.TestClient object at 0x70ce66f938c0>

tests/agents/test_agent_lifecycle.py:126: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
        autospec   = None
        kwargs     = {}
        new        = sentinel.DEFAULT
        new_callable = None
        self       = <unittest.mock._patch object at 0x70ce66dcea40>
        spec       = None
        spec_set   = None
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x70ce66dcea40>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'> does not have the attribute 'start_agent'

local      = False
name       = 'start_agent'
original   = sentinel.DEFAULT
self       = <unittest.mock._patch object at 0x70ce66dcea40>
target     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
___ TestStartAgentEndpoint.test_start_agent_endpoint_handles_already_running ___

self = <test_agent_lifecycle.TestStartAgentEndpoint object at 0x70ce68a1f230>
test_client_with_db = <starlette.testclient.TestClient object at 0x70ce65bd9a90>
sample_project = {'config': None, 'created_at': '2025-12-11 22:38:38', 'id': 1, 'name': 'Lifecycle Test Project', ...}

    def test_start_agent_endpoint_handles_already_running(
        self, test_client_with_db, sample_project
    ):
        """Test that start endpoint is idempotent for already running projects.
    
        Requirement: cf-10.2 - Idempotent behavior for already running agents
        """
        # ARRANGE
        project_id = sample_project["id"]
    
        # Update project status to RUNNING - get db from reloaded server
        from codeframe.ui import server
    
        db = server.app.state.db
        db.update_project(project_id, {"status": ProjectStatus.RUNNING})
    
        # ACT
>       with patch("codeframe.ui.server.start_agent") as mock_start_agent:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

db         = <codeframe.persistence.database.Database object at 0x70ce65720050>
project_id = 1
sample_project = {'config': None,
 'created_at': '2025-12-11 22:38:38',
 'id': 1,
 'name': 'Lifecycle Test Project',
 'phase': 'discovery',
 'status': 'init'}
self       = <test_agent_lifecycle.TestStartAgentEndpoint object at 0x70ce68a1f230>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>
test_client_with_db = <starlette.testclient.TestClient object at 0x70ce65bd9a90>

tests/agents/test_agent_lifecycle.py:167: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
        autospec   = None
        kwargs     = {}
        new        = sentinel.DEFAULT
        new_callable = None
        self       = <unittest.mock._patch object at 0x70ce66458d60>
        spec       = None
        spec_set   = None
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x70ce66458d60>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'> does not have the attribute 'start_agent'

local      = False
name       = 'start_agent'
original   = sentinel.DEFAULT
self       = <unittest.mock._patch object at 0x70ce66458d60>
target     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>

../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:1467: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
__________________ TestChatEndpoint.test_send_message_success __________________

self = <test_chat_api.TestChatEndpoint object at 0x70ce68423610>
api_client = <starlette.testclient.TestClient object at 0x70ce65ac6360>
test_project = 1

    def test_send_message_success(self, api_client, test_project):
        """
        RED Test: Send message and get AI response
    
        Expected behavior:
        - Accept user message
        - Route to Lead Agent
        - Return AI response
        - Broadcast via WebSocket
        - Store message in database
        """
        # Arrange
        user_message = "Hello, I want to build a web app"
    
        # Import the server module to access running_agents
        from codeframe.ui import server
    
        # Mock Lead Agent
        mock_agent = Mock()
        mock_agent.chat.return_value = "Hi! Let's discuss your project. What features do you need?"
    
        # Add mock agent to running_agents dictionary
>       server.running_agents[test_project] = mock_agent
        ^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'running_agents'

api_client = <starlette.testclient.TestClient object at 0x70ce65ac6360>
mock_agent = <Mock id='124031765402288'>
self       = <test_chat_api.TestChatEndpoint object at 0x70ce68423610>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>
test_project = 1
user_message = 'Hello, I want to build a web app'

tests/api/test_chat_api.py:73: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
_____________ TestChatEndpoint.test_send_message_agent_not_started _____________

self = <test_chat_api.TestChatEndpoint object at 0x70ce68445ba0>
api_client = <starlette.testclient.TestClient object at 0x70ce65ac6360>

    def test_send_message_agent_not_started(self, api_client):
        """
        RED Test: Return 400 if Lead Agent not started for project
        """
        # Arrange: Create project without starting agent
        project_id = get_app().state.db.create_project(name="Project Without Agent", description="Project Without Agent project")
    
        # Act
>       response = api_client.post(f"/api/projects/{project_id}/chat", json={"message": "Hello"})
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

api_client = <starlette.testclient.TestClient object at 0x70ce65ac6360>
project_id = 1
self       = <test_chat_api.TestChatEndpoint object at 0x70ce68445ba0>

tests/api/test_chat_api.py:135: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.13/site-packages/starlette/testclient.py:552: in post
    return super().post(
        __class__  = <class 'starlette.testclient.TestClient'>
        auth       = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        content    = None
        cookies    = None
        data       = None
        extensions = None
        files      = None
        follow_redirects = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        headers    = None
        json       = {'message': 'Hello'}
        params     = None
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
        timeout    = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        url        = '/api/projects/1/chat'
.venv/lib/python3.13/site-packages/httpx/_client.py:1144: in post
    return self.request(
        auth       = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        content    = None
        cookies    = None
        data       = None
        extensions = None
        files      = None
        follow_redirects = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        headers    = None
        json       = {'message': 'Hello'}
        params     = None
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
        timeout    = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        url        = '/api/projects/1/chat'
.venv/lib/python3.13/site-packages/starlette/testclient.py:451: in request
    return super().request(
        __class__  = <class 'starlette.testclient.TestClient'>
        auth       = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        content    = None
        cookies    = None
        data       = None
        extensions = None
        files      = None
        follow_redirects = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        headers    = None
        json       = {'message': 'Hello'}
        method     = 'POST'
        params     = None
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
        timeout    = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        url        = URL('http://testserver/api/projects/1/chat')
.venv/lib/python3.13/site-packages/httpx/_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        auth       = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        content    = None
        cookies    = None
        data       = None
        extensions = None
        files      = None
        follow_redirects = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        headers    = None
        json       = {'message': 'Hello'}
        method     = 'POST'
        params     = None
        request    = <Request('POST', 'http://testserver/api/projects/1/chat')>
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
        timeout    = <httpx._client.UseClientDefault object at 0x70ce6a1e56a0>
        url        = URL('http://testserver/api/projects/1/chat')
.venv/lib/python3.13/site-packages/httpx/_client.py:914: in send
    response = self._send_handling_auth(
        auth       = <httpx.Auth object at 0x70ce651ec0f0>
        follow_redirects = True
        request    = <Request('POST', 'http://testserver/api/projects/1/chat')>
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
        stream     = False
.venv/lib/python3.13/site-packages/httpx/_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
        auth       = <httpx.Auth object at 0x70ce651ec0f0>
        auth_flow  = <generator object Auth.sync_auth_flow at 0x70ce66d7a7a0>
        follow_redirects = True
        history    = []
        request    = <Request('POST', 'http://testserver/api/projects/1/chat')>
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
.venv/lib/python3.13/site-packages/httpx/_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        follow_redirects = True
        history    = []
        request    = <Request('POST', 'http://testserver/api/projects/1/chat')>
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
.venv/lib/python3.13/site-packages/httpx/_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        request    = <Request('POST', 'http://testserver/api/projects/1/chat')>
        self       = <starlette.testclient.TestClient object at 0x70ce65ac6360>
        start      = 91810.139868655
        transport  = <starlette.testclient._TestClientTransport object at 0x70ce6572d550>
.venv/lib/python3.13/site-packages/starlette/testclient.py:354: in handle_request
    raise exc
        context    = None
        default_port = 80
        headers    = [(b'host', b'testserver'),
 (b'accept', b'*/*'),
 (b'accept-encoding', b'gzip, deflate'),
 (b'connection', b'keep-alive'),
 (b'user-agent', b'testclient'),
 (b'content-length', b'19'),
 (b'content-type', b'application/json')]
        host       = 'testserver'
        netloc     = 'testserver'
        path       = '/api/projects/1/chat'
        port       = 80
        portal     = <anyio._backends._asyncio.BlockingPortal object at 0x70ce66efbb60>
        query      = ''
        raw_kwargs = {'headers': [('content-length', '21'),
             ('content-type', 'text/plain; charset=utf-8')],
 'status_code': 500,
 'stream': <_io.BytesIO object at 0x70ce651ec5e0>}
        raw_path   = b'/api/projects/1/chat'
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        request    = <Request('POST', 'http://testserver/api/projects/1/chat')>
        request_complete = True
        response_complete = <anyio._backends._asyncio.Event object at 0x70ce651ecb40>
        response_started = True
        scheme     = 'http'
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <starlette.testclient._TestClientTransport object at 0x70ce6572d550>
        send       = <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>
        template   = None
.venv/lib/python3.13/site-packages/starlette/testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
        context    = None
        default_port = 80
        headers    = [(b'host', b'testserver'),
 (b'accept', b'*/*'),
 (b'accept-encoding', b'gzip, deflate'),
 (b'connection', b'keep-alive'),
 (b'user-agent', b'testclient'),
 (b'content-length', b'19'),
 (b'content-type', b'application/json')]
        host       = 'testserver'
        netloc     = 'testserver'
        path       = '/api/projects/1/chat'
        port       = 80
        portal     = <anyio._backends._asyncio.BlockingPortal object at 0x70ce66efbb60>
        query      = ''
        raw_kwargs = {'headers': [('content-length', '21'),
             ('content-type', 'text/plain; charset=utf-8')],
 'status_code': 500,
 'stream': <_io.BytesIO object at 0x70ce651ec5e0>}
        raw_path   = b'/api/projects/1/chat'
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        request    = <Request('POST', 'http://testserver/api/projects/1/chat')>
        request_complete = True
        response_complete = <anyio._backends._asyncio.Event object at 0x70ce651ecb40>
        response_started = True
        scheme     = 'http'
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <starlette.testclient._TestClientTransport object at 0x70ce6572d550>
        send       = <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>
        template   = None
.venv/lib/python3.13/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        args       = ({'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
  'client': ('testclient', 50000),
  'endpoint': <function chat_with_lead at 0x70ce683404a0>,
  'extensions': {'http.response.debug': {}},
  'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
  'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
  'headers': [(b'host', b'testserver'),
              (b'accept', b'*/*'),
              (b'accept-encoding', b'gzip, deflate'),
              (b'connection', b'keep-alive'),
              (b'user-agent', b'testclient'),
              (b'content-length', b'19'),
              (b'content-type', b'application/json')],
  'http_version': '1.1',
  'method': 'POST',
  'path': '/api/projects/1/chat',
  'path_params': {'project_id': '1'},
  'query_string': b'',
  'raw_path': b'/api/projects/1/chat',
  'root_path': '',
  'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
  'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
  'scheme': 'http',
  'server': ['testserver', 80],
  'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                    <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                    <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                    <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                   {}),
  'state': {},
  'type': 'http'},
 <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>,
 <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>)
        func       = <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>
        self       = <anyio._backends._asyncio.BlockingPortal object at 0x70ce66efbb60>
../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/concurrent/futures/_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
        self       = None
        timeout    = None
../../.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/concurrent/futures/_base.py:401: in __get_result
    raise self._exception
        self       = None
.venv/lib/python3.13/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
        args       = ({'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
  'client': ('testclient', 50000),
  'endpoint': <function chat_with_lead at 0x70ce683404a0>,
  'extensions': {'http.response.debug': {}},
  'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
  'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
  'headers': [(b'host', b'testserver'),
              (b'accept', b'*/*'),
              (b'accept-encoding', b'gzip, deflate'),
              (b'connection', b'keep-alive'),
              (b'user-agent', b'testclient'),
              (b'content-length', b'19'),
              (b'content-type', b'application/json')],
  'http_version': '1.1',
  'method': 'POST',
  'path': '/api/projects/1/chat',
  'path_params': {'project_id': '1'},
  'query_string': b'',
  'raw_path': b'/api/projects/1/chat',
  'root_path': '',
  'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
  'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
  'scheme': 'http',
  'server': ['testserver', 80],
  'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                    <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                    <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                    <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                   {}),
  'state': {},
  'type': 'http'},
 <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>,
 <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>)
        callback   = <function BlockingPortal._call_func.<locals>.callback at 0x70ce6571aac0>
        func       = <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>
        future     = <Future at 0x70ce6564f150 state=finished raised RecursionError>
        kwargs     = {}
        retval_or_awaitable = <coroutine object FastAPI.__call__ at 0x70ce657587c0>
        scope      = None
        self       = <anyio._backends._asyncio.BlockingPortal object at 0x70ce66efbb60>
.venv/lib/python3.13/site-packages/fastapi/applications.py:1133: in __call__
    await super().__call__(scope, receive, send)
        __class__  = <class 'fastapi.applications.FastAPI'>
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>
        send       = <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>
.venv/lib/python3.13/site-packages/starlette/applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>
        send       = <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>
.venv/lib/python3.13/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
        _send      = <function ServerErrorMiddleware.__call__.<locals>._send at 0x70ce6571aa20>
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        request    = <starlette.requests.Request object at 0x70ce657b68e0>
        response   = <starlette.responses.PlainTextResponse object at 0x70ce65514830>
        response_started = False
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <starlette.middleware.errors.ServerErrorMiddleware object at 0x70ce657896d0>
        send       = <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>
.venv/lib/python3.13/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
        _send      = <function ServerErrorMiddleware.__call__.<locals>._send at 0x70ce6571aa20>
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        request    = <starlette.requests.Request object at 0x70ce657b68e0>
        response   = <starlette.responses.PlainTextResponse object at 0x70ce65514830>
        response_started = False
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <starlette.middleware.errors.ServerErrorMiddleware object at 0x70ce657896d0>
        send       = <function _TestClientTransport.handle_request.<locals>.send at 0x70ce6571a980>
.venv/lib/python3.13/site-packages/starlette/middleware/cors.py:85: in __call__
    await self.app(scope, receive, send)
        headers    = Headers({'host': 'testserver', 'accept': '*/*', 'accept-encoding': 'gzip, deflate', 'connection': 'keep-alive', 'user-agent': 'testclient', 'content-length': '19', 'content-type': 'application/json'})
        method     = 'POST'
        origin     = None
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <starlette.middleware.cors.CORSMiddleware object at 0x70ce65719590>
        send       = <function ServerErrorMiddleware.__call__.<locals>._send at 0x70ce6571aa20>
.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py:63: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
        conn       = <starlette.requests.Request object at 0x70ce657b7a10>
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>
        send       = <function ServerErrorMiddleware.__call__.<locals>._send at 0x70ce6571aa20>
.venv/lib/python3.13/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
        app        = <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x70ce65789d30>
        conn       = <starlette.requests.Request object at 0x70ce657b7a10>
        exception_handlers = {<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
 <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
 <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
 <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>}
        handler    = None
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        response_started = False
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        send       = <function ServerErrorMiddleware.__call__.<locals>._send at 0x70ce6571aa20>
        sender     = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
        status_handlers = {}
.venv/lib/python3.13/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
        app        = <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x70ce65789d30>
        conn       = <starlette.requests.Request object at 0x70ce657b7a10>
        exception_handlers = {<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
 <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
 <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
 <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>}
        handler    = None
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        response_started = False
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        send       = <function ServerErrorMiddleware.__call__.<locals>._send at 0x70ce6571aa20>
        sender     = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
        status_handlers = {}
.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py:18: in __call__
    await self.app(scope, receive, send)
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x70ce65789d30>
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
        stack      = <contextlib.AsyncExitStack object at 0x70ce651ecd70>
.venv/lib/python3.13/site-packages/starlette/routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <fastapi.routing.APIRouter object at 0x70ce66d13d40>
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
.venv/lib/python3.13/site-packages/starlette/routing.py:736: in app
    await route.handle(scope, receive, send)
        child_scope = {'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'path_params': {'project_id': '1'},
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST'])}
        match      = <Match.FULL: 2>
        partial    = None
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        route      = APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST'])
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = <fastapi.routing.APIRouter object at 0x70ce66d13d40>
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
.venv/lib/python3.13/site-packages/starlette/routing.py:290: in handle
    await self.app(scope, receive, send)
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        self       = APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST'])
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
.venv/lib/python3.13/site-packages/fastapi/routing.py:123: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
        app        = <function request_response.<locals>.app.<locals>.app at 0x70ce6571af20>
        f          = <function get_request_handler.<locals>.app at 0x70ce656e00e0>
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        request    = <starlette.requests.Request object at 0x70ce657b7ac0>
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
.venv/lib/python3.13/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
        app        = <function request_response.<locals>.app.<locals>.app at 0x70ce6571af20>
        conn       = <starlette.requests.Request object at 0x70ce657b7ac0>
        exception_handlers = {<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
 <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
 <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
 <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>}
        handler    = None
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        response_started = False
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
        sender     = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce6571b7e0>
        status_handlers = {}
.venv/lib/python3.13/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
        app        = <function request_response.<locals>.app.<locals>.app at 0x70ce6571af20>
        conn       = <starlette.requests.Request object at 0x70ce657b7ac0>
        exception_handlers = {<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
 <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
 <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
 <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>}
        handler    = None
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        response_started = False
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce65719940>
        sender     = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce6571b7e0>
        status_handlers = {}
.venv/lib/python3.13/site-packages/fastapi/routing.py:109: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
        f          = <function get_request_handler.<locals>.app at 0x70ce656e00e0>
        receive    = <function _TestClientTransport.handle_request.<locals>.receive at 0x70ce6571ac00>
        request    = <starlette.requests.Request object at 0x70ce657b7ac0>
        response_awaited = False
        scope      = {'app': <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>,
 'client': ('testclient', 50000),
 'endpoint': <function chat_with_lead at 0x70ce683404a0>,
 'extensions': {'http.response.debug': {}},
 'fastapi_inner_astack': <contextlib.AsyncExitStack object at 0x70ce651ecdc0>,
 'fastapi_middleware_astack': <contextlib.AsyncExitStack object at 0x70ce651ecd70>,
 'headers': [(b'host', b'testserver'),
             (b'accept', b'*/*'),
             (b'accept-encoding', b'gzip, deflate'),
             (b'connection', b'keep-alive'),
             (b'user-agent', b'testclient'),
             (b'content-length', b'19'),
             (b'content-type', b'application/json')],
 'http_version': '1.1',
 'method': 'POST',
 'path': '/api/projects/1/chat',
 'path_params': {'project_id': '1'},
 'query_string': b'',
 'raw_path': b'/api/projects/1/chat',
 'root_path': '',
 'route': APIRoute(path='/api/projects/{project_id}/chat', name='chat_with_lead', methods=['POST']),
 'router': <fastapi.routing.APIRouter object at 0x70ce66d13d40>,
 'scheme': 'http',
 'server': ['testserver', 80],
 'starlette.exception_handlers': ({<class 'starlette.exceptions.WebSocketException'>: <bound method ExceptionMiddleware.websocket_exception of <starlette.middleware.exceptions.ExceptionMiddleware object at 0x70ce66ef9320>>,
                                   <class 'starlette.exceptions.HTTPException'>: <function http_exception_handler at 0x70ce68780400>,
                                   <class 'fastapi.exceptions.RequestValidationError'>: <function request_validation_exception_handler at 0x70ce687805e0>,
                                   <class 'fastapi.exceptions.WebSocketRequestValidationError'>: <function websocket_request_validation_exception_handler at 0x70ce68780680>},
                                  {}),
 'state': {},
 'type': 'http'}
        send       = <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x70ce6571b7e0>
        stack      = <contextlib.AsyncExitStack object at 0x70ce651ecdc0>
.venv/lib/python3.13/site-packages/fastapi/routing.py:411: in app
    content = await serialize_response(
        actual_response_class = <class 'starlette.responses.JSONResponse'>
        async_exit_stack = <contextlib.AsyncExitStack object at 0x70ce651ecdc0>
        body       = {'message': 'Hello'}
        body_bytes = b'{"message":"Hello"}'
        body_field = ModelField(field_info=Body(PydanticUndefined),
           name='message',
           mode='validation')
        content_type_value = 'application/json'
        current_status_code = None
        dependant  = Dependant(path_params=[ModelField(field_info=Path(PydanticUndefined),
                                  name='project_id',
                                  mode='validation')],
          query_params=[],
          header_params=[],
          cookie_params=[],
          body_params=[ModelField(field_info=Body(PydanticUndefined),
                                  name='message',
                                  mode='validation')],
          dependencies=[Dependant(path_params=[],
                                  query_params=[],
                                  header_params=[],
                                  cookie_params=[],
                                  body_params=[],
                                  dependencies=[],
                                  security_requirements=[],
                                  name='db',
                                  call=<function get_db at 0x70ce682d4cc0>,
                                  request_param_name='request',
                                  websocket_param_name=None,
                                  http_connection_param_name=None,
                                  response_param_name=None,
                                  background_tasks_param_name=None,
                                  security_scopes_param_name=None,
                                  security_scopes=[],
                                  use_cache=True,
                                  path='/api/projects/{project_id}/chat',
                                  cache_key=(<function get_db at 0x70ce682d4cc0>,
                                             ()))],
          security_requirements=[],
          name=None,
          call=<function chat_with_lead at 0x70ce683404a0>,
          request_param_name=None,
          websocket_param_name=None,
          http_connection_param_name=None,
          response_param_name=None,
          background_tasks_param_name=None,
          security_scopes_param_name=None,
          security_scopes=None,
          use_cache=True,
          path='/api/projects/{project_id}/chat',
          cache_key=(<function chat_with_lead at 0x70ce683404a0>, ()))
        dependency_overrides_provider = <fastapi.applications.FastAPI object at 0x70ce65a4ccd0>
        embed_body_fields = False
        errors     = []
        file_stack = <contextlib.AsyncExitStack object at 0x70ce651ecd70>
        is_body_form = False
        is_coroutine = True
        json_body  = {'message': 'Hello'}
        message    = <email.message.Message object at 0x70ce6571b930>
        raw_response = {'response': <Mock name='LeadAgent().chat()' id='124031765410352'>,
 'timestamp': '2025-12-11T22:41:29.602817Z'}
        request    = <starlette.requests.Request object at 0x70ce657b7ac0>
        response   = None
        response_args = {'background': None}
        response_field = None
        response_model_by_alias = True
        response_model_exclude = None
        response_model_exclude_defaults = False
        response_model_exclude_none = False
        response_model_exclude_unset = False
        response_model_include = None
        solved_result = SolvedDependency(values={'db': <codeframe.persistence.database.Database object at 0x70ce65789b50>,
                         'message': {'message': 'Hello'},
                         'project_id': 1},
                 errors=[],
                 background_tasks=None,
                 response=<starlette.responses.Response object at 0x70ce66d89160>,
                 dependency_cache={(<function get_db at 0x70ce682d4cc0>, ()): <codeframe.persistence.database.Database object at 0x70ce65789b50>})
        status_code = None
        subtype    = 'json'
.venv/lib/python3.13/site-packages/fastapi/routing.py:277: in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        by_alias   = True
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        field      = None
        include    = None
        is_coroutine = True
        response_content = {'response': <Mock name='LeadAgent().chat()' id='124031765410352'>,
 'timestamp': '2025-12-11T22:41:29.602817Z'}
.venv/lib/python3.13/site-packages/fastapi/encoders.py:297: in jsonable_encoder
    encoded_value = jsonable_encoder(
        allowed_keys = {'response', 'timestamp'}
        by_alias   = True
        custom_encoder = {}
        encoded_dict = {}
        encoded_key = 'response'
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        include    = None
        key        = 'response'
        obj        = {'response': <Mock name='LeadAgent().chat()' id='124031765410352'>,
 'timestamp': '2025-12-11T22:41:29.602817Z'}
        sqlalchemy_safe = True
        value      = <Mock name='LeadAgent().chat()' id='124031765410352'>
.venv/lib/python3.13/site-packages/fastapi/encoders.py:341: in jsonable_encoder
    return jsonable_encoder(
        by_alias   = True
        classes_tuple = (<class 're.Pattern'>,)
        custom_encoder = {}
        data       = {'_mock_call_args': None,
 '_mock_call_args_list': [],
 '_mock_call_count': 0,
 '_mock_called': False,
 '_mock_children': {'keys': <Mock name='LeadAgent().chat().keys' id='124031765405312'>},
 '_mock_delegate': None,
 '_mock_methods': None,
 '_mock_mock_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()],
 '_mock_name': None,
 '_mock_new_name': '()',
 '_mock_new_parent': <Mock name='LeadAgent().chat' id='124031765411696'>,
 '_mock_parent': None,
 '_mock_return_value': sentinel.DEFAULT,
 '_mock_sealed': False,
 '_mock_side_effect': None,
 '_mock_unsafe': False,
 '_mock_wraps': None,
 '_spec_asyncs': [],
 '_spec_class': None,
 '_spec_set': None,
 '_spec_signature': None,
 'method_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()]}
        encoder    = <function <lambda> at 0x70ce68966b60>
        errors     = [TypeError('Mock.keys() returned a non-iterable (type Mock)')]
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        include    = None
        obj        = <Mock name='LeadAgent().chat()' id='124031765410352'>
        sqlalchemy_safe = True
.venv/lib/python3.13/site-packages/fastapi/encoders.py:297: in jsonable_encoder
    encoded_value = jsonable_encoder(
        allowed_keys = {'_mock_call_args',
 '_mock_call_args_list',
 '_mock_call_count',
 '_mock_called',
 '_mock_children',
 '_mock_delegate',
 '_mock_methods',
 '_mock_mock_calls',
 '_mock_name',
 '_mock_new_name',
 '_mock_new_parent',
 '_mock_parent',
 '_mock_return_value',
 '_mock_sealed',
 '_mock_side_effect',
 '_mock_unsafe',
 '_mock_wraps',
 '_spec_asyncs',
 '_spec_class',
 '_spec_set',
 '_spec_signature',
 'method_calls'}
        by_alias   = True
        custom_encoder = {}
        encoded_dict = {'_mock_name': None,
 '_mock_new_name': '()',
 '_mock_parent': None,
 '_mock_return_value': {'name': 'DEFAULT'}}
        encoded_key = '_mock_new_parent'
        encoded_value = '()'
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        include    = None
        key        = '_mock_new_parent'
        obj        = {'_mock_call_args': None,
 '_mock_call_args_list': [],
 '_mock_call_count': 0,
 '_mock_called': False,
 '_mock_children': {'keys': <Mock name='LeadAgent().chat().keys' id='124031765405312'>},
 '_mock_delegate': None,
 '_mock_methods': None,
 '_mock_mock_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()],
 '_mock_name': None,
 '_mock_new_name': '()',
 '_mock_new_parent': <Mock name='LeadAgent().chat' id='124031765411696'>,
 '_mock_parent': None,
 '_mock_return_value': sentinel.DEFAULT,
 '_mock_sealed': False,
 '_mock_side_effect': None,
 '_mock_unsafe': False,
 '_mock_wraps': None,
 '_spec_asyncs': [],
 '_spec_class': None,
 '_spec_set': None,
 '_spec_signature': None,
 'method_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()]}
        sqlalchemy_safe = True
        value      = <Mock name='LeadAgent().chat' id='124031765411696'>
.venv/lib/python3.13/site-packages/fastapi/encoders.py:341: in jsonable_encoder
    return jsonable_encoder(
        by_alias   = True
        classes_tuple = (<class 're.Pattern'>,)
        custom_encoder = {}
        data       = {'_mock_call_args': call('Hello'),
 '_mock_call_args_list': [call('Hello')],
 '_mock_call_count': 1,
 '_mock_called': True,
 '_mock_children': {'keys': <Mock name='LeadAgent().chat.keys' id='124031765412032'>},
 '_mock_delegate': None,
 '_mock_methods': None,
 '_mock_mock_calls': [call('Hello'),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys()],
 '_mock_name': 'chat',
 '_mock_new_name': 'chat',
 '_mock_new_parent': <Mock name='LeadAgent()' id='124031781107568'>,
 '_mock_parent': <Mock name='LeadAgent()' id='124031781107568'>,
 '_mock_return_value': <Mock name='LeadAgent().chat()' id='124031765410352'>,
 '_mock_sealed': False,
 '_mock_side_effect': None,
 '_mock_unsafe': False,
 '_mock_wraps': None,
 '_spec_asyncs': [],
 '_spec_class': None,
 '_spec_set': None,
 '_spec_signature': None,
 'method_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()]}
        encoder    = <function <lambda> at 0x70ce68966b60>
        errors     = [TypeError('Mock.keys() returned a non-iterable (type Mock)')]
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        include    = None
        obj        = <Mock name='LeadAgent().chat' id='124031765411696'>
        sqlalchemy_safe = True
.venv/lib/python3.13/site-packages/fastapi/encoders.py:297: in jsonable_encoder
    encoded_value = jsonable_encoder(
        allowed_keys = {'_mock_call_args',
 '_mock_call_args_list',
 '_mock_call_count',
 '_mock_called',
 '_mock_children',
 '_mock_delegate',
 '_mock_methods',
 '_mock_mock_calls',
 '_mock_name',
 '_mock_new_name',
 '_mock_new_parent',
 '_mock_parent',
 '_mock_return_value',
 '_mock_sealed',
 '_mock_side_effect',
 '_mock_unsafe',
 '_mock_wraps',
 '_spec_asyncs',
 '_spec_class',
 '_spec_set',
 '_spec_signature',
 'method_calls'}
        by_alias   = True
        custom_encoder = {}
        encoded_dict = {}
        encoded_key = '_mock_return_value'
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        include    = None
        key        = '_mock_return_value'
        obj        = {'_mock_call_args': call('Hello'),
 '_mock_call_args_list': [call('Hello')],
 '_mock_call_count': 1,
 '_mock_called': True,
 '_mock_children': {'keys': <Mock name='LeadAgent().chat.keys' id='124031765412032'>},
 '_mock_delegate': None,
 '_mock_methods': None,
 '_mock_mock_calls': [call('Hello'),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys(),
 call().keys(),
 call.keys()],
 '_mock_name': 'chat',
 '_mock_new_name': 'chat',
 '_mock_new_parent': <Mock name='LeadAgent()' id='124031781107568'>,
 '_mock_parent': <Mock name='LeadAgent()' id='124031781107568'>,
 '_mock_return_value': <Mock name='LeadAgent().chat()' id='124031765410352'>,
 '_mock_sealed': False,
 '_mock_side_effect': None,
 '_mock_unsafe': False,
 '_mock_wraps': None,
 '_spec_asyncs': [],
 '_spec_class': None,
 '_spec_set': None,
 '_spec_signature': None,
 'method_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()]}
        sqlalchemy_safe = True
        value      = <Mock name='LeadAgent().chat()' id='124031765410352'>
.venv/lib/python3.13/site-packages/fastapi/encoders.py:341: in jsonable_encoder
    return jsonable_encoder(
        by_alias   = True
        classes_tuple = (<class 're.Pattern'>,)
        custom_encoder = {}
        data       = {'_mock_call_args': None,
 '_mock_call_args_list': [],
 '_mock_call_count': 0,
 '_mock_called': False,
 '_mock_children': {'keys': <Mock name='LeadAgent().chat().keys' id='124031765405312'>},
 '_mock_delegate': None,
 '_mock_methods': None,
 '_mock_mock_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()],
 '_mock_name': None,
 '_mock_new_name': '()',
 '_mock_new_parent': <Mock name='LeadAgent().chat' id='124031765411696'>,
 '_mock_parent': None,
 '_mock_return_value': sentinel.DEFAULT,
 '_mock_sealed': False,
 '_mock_side_effect': None,
 '_mock_unsafe': False,
 '_mock_wraps': None,
 '_spec_asyncs': [],
 '_spec_class': None,
 '_spec_set': None,
 '_spec_signature': None,
 'method_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()]}
        encoder    = <function <lambda> at 0x70ce68966b60>
        errors     = [TypeError('Mock.keys() returned a non-iterable (type Mock)')]
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        include    = None
        obj        = <Mock name='LeadAgent().chat()' id='124031765410352'>
        sqlalchemy_safe = True
.venv/lib/python3.13/site-packages/fastapi/encoders.py:297: in jsonable_encoder
    encoded_value = jsonable_encoder(
E   RecursionError: maximum recursion depth exceeded
        allowed_keys = {'_mock_call_args',
 '_mock_call_args_list',
 '_mock_call_count',
 '_mock_called',
 '_mock_children',
 '_mock_delegate',
 '_mock_methods',
 '_mock_mock_calls',
 '_mock_name',
 '_mock_new_name',
 '_mock_new_parent',
 '_mock_parent',
 '_mock_return_value',
 '_mock_sealed',
 '_mock_side_effect',
 '_mock_unsafe',
 '_mock_wraps',
 '_spec_asyncs',
 '_spec_class',
 '_spec_set',
 '_spec_signature',
 'method_calls'}
        by_alias   = True
        custom_encoder = {}
        encoded_dict = {'_mock_name': None,
 '_mock_new_name': '()',
 '_mock_parent': None,
 '_mock_return_value': {'name': 'DEFAULT'}}
        encoded_key = '_mock_new_parent'
        encoded_value = '()'
        exclude    = None
        exclude_defaults = False
        exclude_none = False
        exclude_unset = False
        include    = None
        key        = '_mock_new_parent'
        obj        = {'_mock_call_args': None,
 '_mock_call_args_list': [],
 '_mock_call_count': 0,
 '_mock_called': False,
 '_mock_children': {'keys': <Mock name='LeadAgent().chat().keys' id='124031765405312'>},
 '_mock_delegate': None,
 '_mock_methods': None,
 '_mock_mock_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()],
 '_mock_name': None,
 '_mock_new_name': '()',
 '_mock_new_parent': <Mock name='LeadAgent().chat' id='124031765411696'>,
 '_mock_parent': None,
 '_mock_return_value': sentinel.DEFAULT,
 '_mock_sealed': False,
 '_mock_side_effect': None,
 '_mock_unsafe': False,
 '_mock_wraps': None,
 '_spec_asyncs': [],
 '_spec_class': None,
 '_spec_set': None,
 '_spec_signature': None,
 'method_calls': [call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys(),
 call.keys()]}
        sqlalchemy_safe = True
        value      = <Mock name='LeadAgent().chat' id='124031765411696'>
!!! Recursion detected (same locals & position)
__________ TestChatWebSocketIntegration.test_chat_broadcasts_message ___________

self = <test_chat_api.TestChatWebSocketIntegration object at 0x70ce68423b10>
api_client = <starlette.testclient.TestClient object at 0x70ce65ba2580>
test_project = 1

    @pytest.mark.asyncio
    async def test_chat_broadcasts_message(self, api_client, test_project):
        """
        RED Test: Verify chat message broadcasts via WebSocket
        """
        # Arrange
        from codeframe.ui import server
    
        # Mock Lead Agent
        mock_agent = Mock()
        mock_agent.chat.return_value = "AI response"
    
        # Add mock agent to running_agents dictionary
>       server.running_agents[test_project] = mock_agent
        ^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'running_agents'

api_client = <starlette.testclient.TestClient object at 0x70ce65ba2580>
mock_agent = <Mock id='124031765408000'>
self       = <test_chat_api.TestChatWebSocketIntegration object at 0x70ce68423b10>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>
test_project = 1

tests/api/test_chat_api.py:280: AttributeError
---------------------------- Captured stdout setup -----------------------------
 CORS Configuration:
   CORS_ALLOWED_ORIGINS env: ''
   Parsed allowed origins: ['http://localhost:3000', 'http://localhost:5173']
------------------------------ Captured log setup ------------------------------
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 001 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 002 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 003 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 004 cannot be applied, skipping
WARNING  codeframe.persistence.migrations:__init__.py:67 Migration 006 cannot be applied, skipping
____ TestChatWebSocketIntegration.test_chat_continues_when_broadcast_fails _____

self = <test_chat_api.TestChatWebSocketIntegration object at 0x70ce68423c50>
api_client = <starlette.testclient.TestClient object at 0x70ce65ba2580>
test_project = 1

    @pytest.mark.asyncio
    async def test_chat_continues_when_broadcast_fails(self, api_client, test_project):
        """
        Test: Chat continues working even if WebSocket broadcast fails
    
        Covers edge case where broadcast exception is caught and ignored (line 512-514)
        """
        # Arrange
        from codeframe.ui import server
    
        mock_agent = Mock()
        mock_agent.chat.return_value = "Response despite broadcast failure"
>       server.running_agents[test_project] = mock_agent
        ^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: module 'codeframe.ui.server' has no attribute 'running_agents'

api_client = <starlette.testclient.TestClient object at 0x70ce65ba2580>
mock_agent = <Mock id='124031765401280'>
self       = <test_chat_api.TestChatWebSocketIntegration object at 0x70ce68423c50>
server     = <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'>
test_project = 1

tests/api/test_chat_api.py:321: AttributeError
__ TestTestRunnerRealPytestExecution.test_run_tests_with_real_pytest_passing ___

self = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66e01810>
tmp_path = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes0')

        def test_run_tests_with_real_pytest_passing(self, tmp_path):
            """Test run_tests executes real pytest with passing tests."""
            # Create a simple test file
            test_file = tmp_path / "test_simple.py"
            test_file.write_text(
                """
    def test_addition():
        assert 1 + 1 == 2
    
    def test_subtraction():
        assert 5 - 3 == 2
    """
            )
    
            runner = TestRunner(project_root=tmp_path)
            result = runner.run_tests()
    
>           assert result.status == "passed"
E           AssertionError: assert 'error' == 'passed'
E             
E             - passed
E             + error

result     = TestResult(status='error',
           total=0,
           passed=0,
           failed=0,
           errors=0,
           skipped=0,
           duration=0.0,
           output='Failed to parse pytest output: Expecting value: line 1 '
                  'column 1 (char 0)')
runner     = <codeframe.testing.test_runner.TestRunner object at 0x70ce5ec20d70>
self       = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66e01810>
test_file  = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes0/test_simple.py')
tmp_path   = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes0')

tests/testing/test_test_runner.py:295: AssertionError
------------------------------ Captured log call -------------------------------
ERROR    codeframe.testing.test_runner:test_runner.py:146 Failed to parse pytest JSON output: Expecting value: line 1 column 1 (char 0)
__ TestTestRunnerRealPytestExecution.test_run_tests_with_real_pytest_failing ___

self = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66e01950>
tmp_path = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes1')

        def test_run_tests_with_real_pytest_failing(self, tmp_path):
            """Test run_tests executes real pytest with failing tests."""
            # Create a test file with failures
            test_file = tmp_path / "test_failures.py"
            test_file.write_text(
                """
    def test_pass():
        assert True
    
    def test_fail():
        assert False, "This test should fail"
    
    def test_also_pass():
        assert 1 == 1
    """
            )
    
            runner = TestRunner(project_root=tmp_path)
            result = runner.run_tests()
    
>           assert result.status == "failed"
E           AssertionError: assert 'error' == 'failed'
E             
E             - failed
E             + error

result     = TestResult(status='error',
           total=0,
           passed=0,
           failed=0,
           errors=0,
           skipped=0,
           duration=0.0,
           output='Failed to parse pytest output: Expecting value: line 1 '
                  'column 1 (char 0)')
runner     = <codeframe.testing.test_runner.TestRunner object at 0x70ce640a4c50>
self       = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66e01950>
test_file  = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes1/test_failures.py')
tmp_path   = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes1')

tests/testing/test_test_runner.py:321: AssertionError
------------------------------ Captured log call -------------------------------
ERROR    codeframe.testing.test_runner:test_runner.py:146 Failed to parse pytest JSON output: Expecting value: line 1 column 1 (char 0)
___ TestTestRunnerRealPytestExecution.test_run_tests_with_real_pytest_errors ___

self = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66fe1810>
tmp_path = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes2')

        def test_run_tests_with_real_pytest_errors(self, tmp_path):
            """Test run_tests executes real pytest with test errors.
    
            Note: pytest treats exceptions in tests as 'failed', not 'error'.
            Errors in pytest are typically collection failures or fixture issues.
            """
            # Create a test file with an exception (pytest treats this as failed)
            test_file = tmp_path / "test_errors.py"
            test_file.write_text(
                """
    def test_pass():
        assert True
    
    def test_error():
        raise ValueError("This is an error")
    """
            )
    
            runner = TestRunner(project_root=tmp_path)
            result = runner.run_tests()
    
            # pytest treats exceptions in test bodies as "failed", not "error"
>           assert result.status == "failed"
E           AssertionError: assert 'error' == 'failed'
E             
E             - failed
E             + error

result     = TestResult(status='error',
           total=0,
           passed=0,
           failed=0,
           errors=0,
           skipped=0,
           duration=0.0,
           output='Failed to parse pytest output: Expecting value: line 1 '
                  'column 1 (char 0)')
runner     = <codeframe.testing.test_runner.TestRunner object at 0x70ce640a4dd0>
self       = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66fe1810>
test_file  = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes2/test_errors.py')
tmp_path   = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_real_pytes2')

tests/testing/test_test_runner.py:349: AssertionError
------------------------------ Captured log call -------------------------------
ERROR    codeframe.testing.test_runner:test_runner.py:146 Failed to parse pytest JSON output: Expecting value: line 1 column 1 (char 0)
__ TestTestRunnerRealPytestExecution.test_run_tests_with_specific_test_paths ___

self = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66fe1940>
tmp_path = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_specific_t0')

        def test_run_tests_with_specific_test_paths(self, tmp_path):
            """Test run_tests can run specific test files."""
            # Create multiple test files
            test1 = tmp_path / "test_one.py"
            test1.write_text(
                """
    def test_one():
        assert True
    """
            )
    
            test2 = tmp_path / "test_two.py"
            test2.write_text(
                """
    def test_two():
        assert True
    
    def test_two_b():
        assert True
    """
            )
    
            runner = TestRunner(project_root=tmp_path)
            # Run only test_two.py
            result = runner.run_tests(test_paths=["test_two.py"])
    
>           assert result.status == "passed"
E           AssertionError: assert 'error' == 'passed'
E             
E             - passed
E             + error

result     = TestResult(status='error',
           total=0,
           passed=0,
           failed=0,
           errors=0,
           skipped=0,
           duration=0.0,
           output='Failed to parse pytest output: Expecting value: line 1 '
                  'column 1 (char 0)')
runner     = <codeframe.testing.test_runner.TestRunner object at 0x70ce5ec23ef0>
self       = <test_test_runner.TestTestRunnerRealPytestExecution object at 0x70ce66fe1940>
test1      = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_specific_t0/test_one.py')
test2      = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_specific_t0/test_two.py')
tmp_path   = PosixPath('/tmp/pytest-of-frankbria/pytest-18/test_run_tests_with_specific_t0')

tests/testing/test_test_runner.py:381: AssertionError
------------------------------ Captured log call -------------------------------
ERROR    codeframe.testing.test_runner:test_runner.py:146 Failed to parse pytest JSON output: Expecting value: line 1 column 1 (char 0)
=============================== warnings summary ===============================
tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/socket.py:233: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66fcb010>
    _socket.socket.__init__(self, family, type, proto, fileno)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/socket.py:233: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657d32e0>
    _socket.socket.__init__(self, family, type, proto, fileno)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/socket.py:233: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657d34c0>
    _socket.socket.__init__(self, family, type, proto, fileno)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/socket.py:233: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657d3100>
    _socket.socket.__init__(self, family, type, proto, fileno)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/socket.py:233: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657d3b50>
    _socket.socket.__init__(self, family, type, proto, fileno)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentContextBuilding::test_build_context_with_related_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/socket.py:233: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657d36a0>
    _socket.socket.__init__(self, family, type, proto, fileno)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentExecution::test_execute_task_handles_api_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664bb5b0>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentExecution::test_execute_task_handles_api_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664ba200>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentExecution::test_execute_task_handles_api_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664bb880>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentExecution::test_execute_task_handles_api_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664bb2e0>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTestRunnerIntegration::test_execute_task_handles_test_failures
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664bae30>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_agent.py::TestBackendWorkerAgentTestRunnerIntegration::test_execute_task_handles_test_failures
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664bad40>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_backend_worker_auto_commit.py::test_backend_worker_graceful_commit_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664bb3d0>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_hybrid_worker.py::TestTaskExecution::test_execute_task_saves_result_to_context
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664ba5c0>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentInitialization::test_lead_agent_loads_existing_conversation
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:398: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce6552eb60>
    msg = str(self.msg)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentInitialization::test_lead_agent_loads_existing_conversation
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:398: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce6552ec50>
    msg = str(self.msg)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bece50>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66dd7010>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66dd7f10>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66dd7b50>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bed7b0>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bed990>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bed210>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent.py::TestLeadAgentConversationPersistence::test_conversation_handles_long_history
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:802: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bee890>
    return object.__setattr__(self, name, value)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664ba3e0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664b8c70>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664ba2f0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64becf40>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bec9a0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bee200>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bee980>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bee6b0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_blocker_handling.py::TestLeadAgentAsyncBlockerHandling::test_async_blocker_allows_all_work_to_continue
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64beea70>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_lead_agent_git_integration.py::TestLeadAgentStartIssueWork::test_start_issue_work_with_existing_active_branch
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/functools.py:544: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664b9300>
    def decorating_function(user_function):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_basic
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:285: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bef4c0>
    yield field, getattr(node, field)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_basic
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:285: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bed030>
    yield field, getattr(node, field)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_basic
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:285: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64beed40>
    yield field, getattr(node, field)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_basic
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:285: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64befe20>
    yield field, getattr(node, field)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_basic
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:285: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64befa60>
    yield field, getattr(node, field)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_execute_task_basic
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:285: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64befd30>
    yield field, getattr(node, field)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64beee30>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65954f40>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce659556c0>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65955210>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65955a80>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65956f20>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65954400>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65955b70>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce659572e0>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce659555d0>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65957010>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65954e50>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce659563e0>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65954310>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65954c70>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65955f30>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65956b60>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65956890>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65956a70>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce659566b0>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce659565c0>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/agents/test_review_worker_agent.py::TestReviewWorkerAgent::test_iteration_tracking
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce659558a0>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_api_metrics.py::TestProjectCostMetricsEndpoint::test_endpoint_exists
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/pydantic/_internal/_generate_schema.py:933: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce664bb790>
    if get_schema is None and (validators := getattr(obj, '__get_validators__', None)) is not None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_api_metrics.py::TestProjectCostMetricsEndpoint::test_endpoint_exists
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/pydantic/_internal/_generate_schema.py:933: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce64bee7a0>
    if get_schema is None and (validators := getattr(obj, '__get_validators__', None)) is not None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_api_metrics.py::TestProjectCostMetricsEndpoint::test_endpoint_exists
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/pydantic/_internal/_generate_schema.py:933: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65956110>
    if get_schema is None and (validators := getattr(obj, '__get_validators__', None)) is not None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_projects_api_progress.py::test_list_projects_progress_with_no_tasks
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/pydantic/_internal/_config.py:330: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce656e9210>
    return ConfigDict()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_projects_api_progress.py::test_list_projects_progress_with_all_completed
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/pydantic/_internal/_generate_schema.py:2202: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce6575a4d0>
    def inner_handler(obj: Any) -> CoreSchema:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_projects_api_progress.py::test_list_projects_progress_multiple_projects
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/pydantic_core/core_schema.py:4333: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce65759e40>
    return {k: v for k, v in kwargs.items() if v is not None}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_workspace_cleanup.py::TestWorkspaceCleanupAPI::test_workspace_cleanup_after_git_clone_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/pydantic/_internal/_utils.py:105: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce6575b880>
    return isinstance(cls, type) and issubclass(cls, class_or_tuple)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ad120>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ae2f0>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657adb70>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ad3f0>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657afc40>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657acb80>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ac130>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657af4c0>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryFlowInitialization::test_start_discovery_initializes_discovery_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ac040>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40c040>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40e6b0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40ce50>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40c310>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40c400>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40e980>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40c220>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657aec50>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ac5e0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/discovery/test_discovery_integration.py::TestDiscoveryCompletionDetection::test_get_discovery_status_returns_completion_state
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ac4f0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ad6c0>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657acc70>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657acf40>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ad4e0>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ae5c0>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657aeb60>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657aca90>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f40ef20>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d66980>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/e2e/test_full_workflow.py::test_project_creation
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:468: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d64d60>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/enforcement/test_skip_detector.py::TestSkipDetection::test_performance_on_large_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:54: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce657ade40>
    return compile(source, filename, mode, flags,
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_dashboard_access.py::TestServerAccess::test_dashboard_accessible_after_serve
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/threading.py:297: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed98a0>
    self._waiters = _deque()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_dashboard_access.py::TestServerAccess::test_dashboard_accessible_after_serve
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/threading.py:297: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed85e0>
    self._waiters = _deque()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_dashboard_access.py::TestServerAccess::test_dashboard_accessible_after_serve
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/threading.py:297: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed9300>
    self._waiters = _deque()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_quality_gates_integration.py::TestQualityGatesIntegration::test_quality_gate_workflow_review_failure
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eeda890>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_quality_gates_integration.py::TestQualityGatesIntegration::test_quality_gate_workflow_review_failure
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eedb1f0>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed95d0>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed93f0>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eeda980>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eedb5b0>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed8130>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eeda3e0>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eedaa70>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eedaf20>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_review_workflow.py::TestReviewWorkflow::test_iteration_tracking_in_database
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/ast.py:278: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eedbe20>
    def iter_fields(node):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_session_lifecycle.py::TestCtrlCSessionSave::test_keyboard_interrupt_saves_session
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eeda200>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_session_lifecycle.py::TestCtrlCSessionSave::test_keyboard_interrupt_saves_session
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed8220>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_session_lifecycle.py::TestCtrlCSessionSave::test_keyboard_interrupt_saves_session
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed9f30>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointCreation::test_create_checkpoint_backs_up_database
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/__init__.py:119: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f019e40>
    cursor = conn.execute("SELECT 1 FROM schema_migrations WHERE version = ?", (version,))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f01a110>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f01a020>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f0193f0>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f0194e0>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f0196c0>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f019120>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f019c60>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed9c60>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eedb790>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed87c0>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f0197b0>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f019b70>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f019d50>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f019210>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_checkpoint_manager.py::TestCheckpointValidation::test_validate_checkpoint_checks_files
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/json/__init__.py:180: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4400>
    fp.write(chunk)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c63e0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f01a5c0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f01a3e0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6e30>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4310>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c45e0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c46d0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6a70>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c64d0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4220>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_empty_checks_list
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c67a0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_run_specific_gates
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6d40>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_run_specific_gates
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6980>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_run_specific_gates
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6c50>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_run_specific_gates
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6f20>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_run_specific_gates
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6200>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_run_specific_gates
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6890>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed9120>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eeda110>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f01a4d0>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c5300>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6b60>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c65c0>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c5f30>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_review_gate_with_issues
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c7100>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_type_check_gate_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c74c0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_type_check_gate_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c73d0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_execution_time_positive
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c44f0>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_execution_time_positive
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c76a0>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_execution_time_positive
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c75b0>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_execution_time_positive
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c71f0>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gate_tool.py::test_execution_time_positive
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c66b0>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_critical_review
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c5210>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_critical_review
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4b80>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_critical_review
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4d60>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_critical_review
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4040>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_critical_review
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c54e0>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGates::test_block_on_critical_review
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:1250: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4a90>
    def emit(self, record):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/re/_parser.py:260: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c62f0>
    def get(self):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/re/_parser.py:260: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c53f0>
    def get(self):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/re/_parser.py:260: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c7e20>
    def get(self):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/re/_parser.py:260: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c7c40>
    def get(self):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/re/_parser.py:260: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c5a80>
    def get(self):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_eslint_failure
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/re/_parser.py:260: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c6020>
    def get(self):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c7d30>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c47c0>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4f40>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed97b0>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eedb4c0>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee5120>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6200>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6d40>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_mypy_not_found
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/coverage/collector.py:239: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7790>
    def lock_data(self) -> None:
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_ruff_not_found
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c5b70>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_ruff_not_found
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7d30>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_ruff_not_found
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee72e0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_ruff_not_found
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee5e40>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_ruff_not_found
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee45e0>
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eed9210>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee4f40>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee64d0>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6c50>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6980>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7a60>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6b60>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee5300>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6020>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/lib/test_quality_gates.py::TestQualityGatesIntegration::test_risky_file_patterns
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:799: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6e30>
    def __setattr__(self, name, value):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:419: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c72e0>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:419: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c7790>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:419: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c4c70>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:419: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c5030>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:419: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee4130>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:419: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee57b0>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_desktop.py::TestFireAndForget::test_logs_error_on_failure
  /home/frankbria/projects/codeframe/.venv/lib/python3.13/site-packages/_pytest/fixtures.py:419: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee63e0>
    @property
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_timeout
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_client_error
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_unexpected_error
tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_http_error_status
  /home/frankbria/projects/codeframe/codeframe/notifications/webhook.py:133: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    async with session.post(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/notifications/test_webhook_notifications.py::TestWebhookNotificationService::test_send_blocker_notification_correct_payload
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2247: RuntimeWarning: coroutine 'WebhookNotificationService.send_blocker_notification' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7b50>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee75b0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee66b0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee5210>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee47c0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee4e50>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7970>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee6890>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7c40>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7e20>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7010>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee55d0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee4b80>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee76a0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee65c0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee4d60>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee7880>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee56c0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee71f0>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database.py::TestMemoryCRUD::test_get_memory
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:456: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee5a80>
    return self._fmt.find(self.asctime_search) >= 0
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee5c60>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df2e0>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df6a0>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df1f0>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df5b0>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dfc40>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dfb50>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df4c0>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df970>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dea70>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df100>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dfe20>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dff10>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dee30>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dfa60>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dfd30>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_git_branches.py::TestGetBranchesByStatus::test_get_active_branches
  /home/frankbria/projects/codeframe/codeframe/persistence/migrations/migration_007_sprint10_review_polish.py:146: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3def20>
    columns = {row[1] for row in cursor.fetchall()}
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3ded40>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dc5e0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3df880>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3de890>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dc220>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dc6d0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dc7c0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dc8b0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dc9a0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dca90>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dcb80>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dcc70>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dcd60>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dce50>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dcf40>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd030>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd120>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd210>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd300>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd3f0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd4e0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd5d0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd6c0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_database_issues.py::TestIssueConstraints::test_issue_foreign_key_to_project
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/logging/__init__.py:148: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd7b0>
    result = _levelToName.get(level)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd990>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dda80>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3ddb70>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3ddc60>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3ddd50>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dde40>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3ddf30>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3de020>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dc400>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3de6b0>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9e7a0>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9cf40>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c310>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c6d0>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d3f0>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c7c0>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9cb80>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_project_agents.py::test_get_agents_for_project_empty
  /home/frankbria/projects/codeframe/codeframe/persistence/database.py:479: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d7b0>
    cursor.execute(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee49a0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee5990>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee4a90>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee48b0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c220>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c130>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d120>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c8b0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d030>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c4f0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9ca90>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9cc70>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c9a0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c5e0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d4e0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d5d0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d6c0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d300>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9c040>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9ce50>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9e4d0>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d210>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:2426: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d990>
    for offset, name in enumerate(positional[non_default_count:]):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:1832: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5eee4c70>
    if type not in _static_getmro(objtype):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:1832: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f3dd8a0>
    if type not in _static_getmro(objtype):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/persistence/test_server_database.py::TestServerDatabaseInitialization::test_database_initialized_on_startup
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/inspect.py:1832: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce66d9d8a0>
    if type not in _static_getmro(objtype):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/testing/test_self_correction_integration.py::TestSelfCorrectionLoop::test_self_correction_successful_on_second_attempt
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:676: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5ebf6020>
    key=lambda entry: entry[0].count('.')):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/testing/test_self_correction_integration.py::TestSelfCorrectionLoop::test_self_correction_successful_on_second_attempt
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:676: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5ebf58a0>
    key=lambda entry: entry[0].count('.')):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_some_fail
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5ebf5b70>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/testing/test_test_runner.py::TestTestRunnerExecution::test_run_tests_some_fail
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5ebf5e40>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/ui/test_websocket_broadcasts.py::test_timestamp_format
  /home/frankbria/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/unittest/mock.py:2193: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x70ce5f6c7010>
    setattr(_type, entry, MagicProxy(entry, self))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.13.3-final-0 ________________

Name                                                                             Stmts   Miss   Cover   Missing
---------------------------------------------------------------------------------------------------------------
codeframe/__init__.py                                                                6      0 100.00%
codeframe/agents/__init__.py                                                         5      0 100.00%
codeframe/agents/agent_pool_manager.py                                             136      8  94.12%   51-53, 116, 259, 329, 358-359
codeframe/agents/backend_worker_agent.py                                           382     97  74.61%   101-105, 111, 189-190, 303-308, 336-338, 487-488, 496-497, 525-561, 566, 570-595, 626, 650-687, 720, 778-780, 817-831, 854-856, 905-922, 948, 1035-1049, 1111, 1114, 1127, 1145-1158, 1175-1190, 1196-1198, 1241, 1263-1264
codeframe/agents/definition_loader.py                                               89      8  91.01%   148, 159, 163, 167, 214-215, 225-226
codeframe/agents/dependency_resolver.py                                            164      9  94.51%   81-85, 284-285, 298, 360-361, 369
codeframe/agents/factory.py                                                         53      6  88.68%   43, 50-56
codeframe/agents/frontend_worker_agent.py                                          254     61  75.98%   118-119, 159-160, 187-189, 203-214, 306-308, 458-459, 469-470, 502-534, 539, 546, 560-566, 592, 599, 604, 607, 638-651, 668-683, 689-691, 725, 732, 748, 757-773, 782
codeframe/agents/hybrid_worker.py                                                   96      5  94.79%   189-190, 323, 328-329
codeframe/agents/lead_agent.py                                                     694    248  64.27%   121-122, 134-135, 234-235, 303-304, 330-331, 346-347, 380-382, 418, 451, 584-585, 596, 621-666, 678-688, 717-823, 835-865, 881-902, 925, 980, 1067-1069, 1082, 1121-1125, 1146, 1208-1220, 1233-1237, 1270-1284, 1356-1364, 1393, 1420, 1446-1450, 1455-1459, 1475-1479, 1510-1513, 1539, 1569, 1580, 1633-1634, 1643-1724, 1729-1730, 1750-1751
codeframe/agents/review_agent.py                                                   143     25  82.52%   423-435, 439, 583-596, 623, 657, 698, 810-858
codeframe/agents/review_worker_agent.py                                            139     17  87.77%   101, 107, 157-158, 168-169, 185-186, 273-276, 302, 327, 345-346, 357-358
codeframe/agents/simple_assignment.py                                               35     10  71.43%   185-196, 213-214
codeframe/agents/subagent_generator.py                                             138     13  90.58%   150, 156, 158, 176-179, 197-198, 334-337
codeframe/agents/worker_agent.py                                                   113     57  49.56%   54, 60, 128, 161, 186, 219, 253, 291-303, 346-419, 445-491
codeframe/cli.py                                                                   155     77  50.32%   30-39, 52-53, 61-67, 75-81, 89-101, 110-117, 127-151, 160, 169, 229-234, 246-247, 283-285
codeframe/context/__init__.py                                                        0      0 100.00%
codeframe/core/__init__.py                                                           4      0 100.00%
codeframe/core/config.py                                                           158     35  77.85%   166-167, 207, 225-235, 239-242, 272-288, 292-302
codeframe/core/models.py                                                           411     23  94.40%   319-321, 475, 480, 484, 573, 629, 631, 713-715, 739, 754-768, 829-832
codeframe/core/port_utils.py                                                        27      0 100.00%
codeframe/core/project.py                                                           71     56  21.13%   14-17, 31-59, 64-66, 71-72, 85-136, 141, 152-154, 166-167
codeframe/core/session_manager.py                                                   32      2  93.75%   66-67
codeframe/deployment/__init__.py                                                     0      0 100.00%
codeframe/deployment/deployer.py                                                    48     12  75.00%   88-89, 102-117, 153-154
codeframe/discovery/__init__.py                                                      3      0 100.00%
codeframe/discovery/answers.py                                                     131      2  98.47%   196, 237
codeframe/discovery/questions.py                                                    58      0 100.00%
codeframe/enforcement/__init__.py                                                    8      0 100.00%
codeframe/enforcement/adaptive_test_runner.py                                      127     19  85.04%   124-129, 132-133, 139-143, 151-155, 245, 325, 385-406, 410-412
codeframe/enforcement/evidence_verifier.py                                          70     25  64.29%   183, 195, 199, 260-265, 276-283, 304-338
codeframe/enforcement/language_detector.py                                         116     12  89.66%   149-156, 175-176, 198, 351-352
codeframe/enforcement/quality_tracker.py                                            78     20  74.36%   94-95, 126, 138, 172, 189, 272-283, 307-319
codeframe/enforcement/skip_pattern_detector.py                                     206     18  91.26%   81, 119, 169, 184-186, 202, 212, 267, 300, 328, 357, 386, 416, 426, 434-446
codeframe/git/__init__.py                                                            2      0 100.00%
codeframe/git/workflow_manager.py                                                  156     14  91.03%   108-109, 170, 177-179, 202-209, 283, 400-401
codeframe/indexing/__init__.py                                                       3      0 100.00%
codeframe/indexing/codebase_index.py                                                52      2  96.15%   120-121
codeframe/indexing/models.py                                                        21      0 100.00%
codeframe/indexing/parsers/__init__.py                                               3      0 100.00%
codeframe/indexing/parsers/python_parser.py                                         87     16  81.61%   35-37, 44-46, 169, 210-231
codeframe/indexing/parsers/typescript_parser.py                                    145     20  86.21%   45-46, 57-58, 64-65, 69-70, 115-128, 159-172, 195, 273
codeframe/lib/__init__.py                                                            0      0 100.00%
codeframe/lib/checkpoint_manager.py                                                161     18  88.82%   233-235, 279-280, 436-437, 491-493, 514-515, 529, 556, 575, 600-606
codeframe/lib/context_manager.py                                                    60     10  83.33%   118-146
codeframe/lib/importance_scorer.py                                                  31      2  93.55%   59, 86
codeframe/lib/lint_utils.py                                                         56     18  67.86%   54, 67-72, 94-98, 115-118, 150-155
codeframe/lib/metrics_tracker.py                                                    94      1  98.94%   175
codeframe/lib/quality/__init__.py                                                    4      0 100.00%
codeframe/lib/quality/complexity_analyzer.py                                       135     23  82.96%   77-79, 90-91, 97-98, 104-105, 140-145, 150, 197, 235-237, 294, 302, 307-308
codeframe/lib/quality/owasp_patterns.py                                             78      5  93.59%   76-78, 216, 220
codeframe/lib/quality/security_scanner.py                                           96     16  83.33%   58-60, 81-88, 186, 194, 228, 241-242
codeframe/lib/quality_gate_tool.py                                                  84      3  96.43%   119, 214, 345
codeframe/lib/quality_gates.py                                                     256      0 100.00%
codeframe/lib/sdk_hooks.py                                                          71      9  87.32%   53-59, 310-312
codeframe/lib/token_counter.py                                                      38      0 100.00%
codeframe/notifications/__init__.py                                                  0      0 100.00%
codeframe/notifications/desktop.py                                                  85     13  84.71%   94-98, 113-114, 128-129, 195-196, 208-209, 213-214
codeframe/notifications/router.py                                                   30      2  93.33%   88-89
codeframe/notifications/webhook.py                                                  42      4  90.48%   147-151, 154-155
codeframe/persistence/__init__.py                                                    2      0 100.00%
codeframe/persistence/database.py                                                  851    104  87.78%   543-547, 736, 744, 1016, 1056, 1061, 1168, 1266, 1642, 1873, 1876, 1882-1883, 1935, 1937, 1941-1942, 1992-1999, 2306, 2407-2437, 2448-2458, 2469-2479, 2488-2515, 2523-2541, 2554-2589, 2742-2744, 3011-3022, 3147, 3246-3275, 3292-3303, 3314-3326, 3600-3650
codeframe/persistence/migrations/__init__.py                                        73     14  80.82%   27, 81-84, 96, 99-100, 124-131
codeframe/persistence/migrations/migration_001_remove_agent_type_constraint.py      53      2  96.23%   42-43
codeframe/persistence/migrations/migration_002_refactor_projects_schema.py          46     27  41.30%   53-54, 64, 71-124, 131-158
codeframe/persistence/migrations/migration_003_update_blockers_schema.py            64     45  29.69%   49-50, 60, 67-173, 180-214
codeframe/persistence/migrations/migration_004_add_context_checkpoints.py           39     23  41.03%   53-54, 61-91, 98-117
codeframe/persistence/migrations/migration_005_add_context_indexes.py               41     13  68.29%   46-47, 63-64, 111-124
codeframe/persistence/migrations/migration_006_mvp_completion.py                    70      7  90.00%   49-50, 67, 118, 134-139
codeframe/persistence/migrations/migration_007_sprint10_review_polish.py           116     42  63.79%   41-42, 59-61, 157, 165, 173-179, 192, 198, 204, 210, 216-222, 232-236, 243-273
codeframe/persistence/migrations/migration_008_add_session_id.py                    14     14   0.00%   11-57
codeframe/persistence/migrations/migration_009_add_project_agents.py                79     79   0.00%   22-293
codeframe/planning/__init__.py                                                       2      0 100.00%
codeframe/planning/issue_generator.py                                               70      2  97.14%   104, 214
codeframe/planning/task_decomposer.py                                               74      4  94.59%   140-141, 144, 173
codeframe/providers/__init__.py                                                      0      0 100.00%
codeframe/providers/anthropic.py                                                    42      2  95.24%   14-15
codeframe/providers/sdk_client.py                                                   47     27  42.55%   17-18, 49-55, 82-105, 119-125
codeframe/tasks/__init__.py                                                          0      0 100.00%
codeframe/tasks/expire_blockers.py                                                  55     20  63.64%   59-60, 80-81, 97-98, 108-151
codeframe/testing/__init__.py                                                        0      0 100.00%
codeframe/testing/lint_runner.py                                                   119     24  79.83%   50-51, 60-61, 108-109, 117, 156, 188-190, 244-250, 270-281
codeframe/testing/models.py                                                         28      1  96.43%   43
codeframe/ui/__init__.py                                                             0      0 100.00%
codeframe/ui/dependencies.py                                                         7      0 100.00%
codeframe/ui/models.py                                                              84      0 100.00%
codeframe/ui/routers/__init__.py                                                     0      0 100.00%
codeframe/ui/routers/agents.py                                                     140     53  62.14%   67, 75, 99-112, 130-143, 179-181, 239-241, 280-282, 308-363, 410-412, 448-450
codeframe/ui/routers/blockers.py                                                    46     16  65.22%   50-57, 97-105, 130-135, 214-216
codeframe/ui/routers/chat.py                                                        40      2  95.00%   62, 85
codeframe/ui/routers/checkpoints.py                                                167    142  14.97%   89-114, 175-220, 271-288, 331-372, 430-484, 516-647
codeframe/ui/routers/context.py                                                     69     42  39.13%   54-74, 96-105, 138-143, 175-180, 216-242, 278-287, 324-349, 391-404
codeframe/ui/routers/discovery.py                                                   69      9  86.96%   74, 101-103, 128, 144-145, 234-236
codeframe/ui/routers/lint.py                                                        60     44  26.67%   36-37, 55-56, 74-85, 116-209
codeframe/ui/routers/metrics.py                                                     72     10  86.11%   96, 129-131, 212-214, 342-344
codeframe/ui/routers/projects.py                                                   125     16  87.20%   131-132, 139-140, 157-158, 168-169, 220, 240-247, 381
codeframe/ui/routers/quality_gates.py                                               80     63  21.25%   68-76, 128-329
codeframe/ui/routers/review.py                                                     159     98  38.36%   84-164, 188-207, 232-270, 314-383, 400, 404, 408, 429, 433, 437, 508-576
codeframe/ui/routers/session.py                                                     20     11  45.00%   43-80
codeframe/ui/routers/websocket.py                                                   20     12  40.00%   46-63
codeframe/ui/server.py                                                              75      6  92.00%   67, 132, 187-188, 231-233
codeframe/ui/services/__init__.py                                                    0      0 100.00%
codeframe/ui/services/agent_service.py                                              36     23  36.11%   27-28, 39-50, 61-69, 80-88, 99, 110
codeframe/ui/services/review_service.py                                             29     29   0.00%   7-98
codeframe/ui/shared.py                                                              40      6  85.00%   23-24, 27, 32-34
codeframe/ui/websocket_broadcasts.py                                               174      0 100.00%
codeframe/workspace/__init__.py                                                      2      0 100.00%
codeframe/workspace/manager.py                                                     114      2  98.25%   133-134
---------------------------------------------------------------------------------------------------------------
TOTAL                                                                             9453   2075  78.05%
Required test coverage of 65.0% reached. Total coverage: 78.05%
============================= slowest 10 durations =============================
60.10s call     tests/agents/test_test_worker_agent.py::TestErrorHandling::test_handle_execution_timeout
5.34s setup    tests/lib/test_quality_gates.py::TestQualityGatesErrorHandling::test_task_has_typescript_files_default
4.53s setup    tests/api/test_blocker_resolution_api.py::TestBlockerResolutionConflicts::test_duplicate_resolution_returns_409
4.23s setup    tests/api/test_endpoints_database.py::TestProjectStatusEndpoint::test_get_project_status_success
3.97s setup    tests/api/test_discovery_endpoints.py::TestDiscoveryAnswerEndpoint::test_post_discovery_answer_returns_200_with_valid_answer
3.86s setup    tests/api/test_endpoints_database.py::TestAgentsEndpoint::test_get_agents_empty_list
3.86s setup    tests/api/test_endpoints_database.py::TestEndpointDatabaseIntegration::test_complete_project_workflow_via_api
3.71s setup    tests/api/test_blocker_resolution_api.py::TestBlockerResolutionValidation::test_resolve_requires_answer_field
3.59s setup    tests/api/test_health_endpoint.py::test_health_endpoint_returns_json
3.57s setup    tests/api/test_health_endpoint.py::test_health_endpoint_structure
=========================== short test summary info ============================
ERROR tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_exists - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_validates_request - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_runs_quality_checks - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_post_review_endpoint_creates_blocker_on_failure - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_get_review_status_endpoint_exists - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_get_review_status_no_review_yet - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_get_review_stats_endpoint_exists - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_get_review_stats_aggregates_correctly - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
ERROR tests/test_review_api.py::TestReviewAPI::test_get_review_stats_no_reviews_yet - AttributeError: module 'codeframe.ui.server' has no attribute 'review_cache'
FAILED tests/agents/test_agent_lifecycle.py::TestStartAgentEndpoint::test_start_agent_endpoint_returns_202_accepted - AttributeError: <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'> does not have the attribute 'start_agent'
FAILED tests/agents/test_agent_lifecycle.py::TestStartAgentEndpoint::test_start_agent_endpoint_handles_already_running - AttributeError: <module 'codeframe.ui.server' from '/home/frankbria/projects/codeframe/codeframe/ui/server.py'> does not have the attribute 'start_agent'
FAILED tests/api/test_chat_api.py::TestChatEndpoint::test_send_message_success - AttributeError: module 'codeframe.ui.server' has no attribute 'running_agents'
FAILED tests/api/test_chat_api.py::TestChatEndpoint::test_send_message_agent_not_started - RecursionError: maximum recursion depth exceeded
FAILED tests/api/test_chat_api.py::TestChatWebSocketIntegration::test_chat_broadcasts_message - AttributeError: module 'codeframe.ui.server' has no attribute 'running_agents'
FAILED tests/api/test_chat_api.py::TestChatWebSocketIntegration::test_chat_continues_when_broadcast_fails - AttributeError: module 'codeframe.ui.server' has no attribute 'running_agents'
FAILED tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_real_pytest_passing - AssertionError: assert 'error' == 'passed'
  
  - passed
  + error
FAILED tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_real_pytest_failing - AssertionError: assert 'error' == 'failed'
  
  - failed
  + error
FAILED tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_real_pytest_errors - AssertionError: assert 'error' == 'failed'
  
  - failed
  + error
FAILED tests/testing/test_test_runner.py::TestTestRunnerRealPytestExecution::test_run_tests_with_specific_test_paths - AssertionError: assert 'error' == 'passed'
  
  - passed
  + error
===== 10 failed, 1833 passed, 322 warnings, 9 errors in 533.15s (0:08:53) ======

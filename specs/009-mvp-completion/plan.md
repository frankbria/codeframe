# Implementation Plan: Sprint 9 MVP Completion

**Branch**: `009-mvp-completion` | **Date**: 2025-11-15 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/home/frankbria/projects/codeframe/specs/009-mvp-completion/spec.md`

**Note**: This plan was generated by the `/speckit.plan` command following the speckit workflow.

## Summary

Sprint 9 completes the MVP feature set by adding 5 critical capabilities identified in the architectural spec audit:

1. **Review Agent Implementation** - Automated code quality checks (complexity, security, style) with LLM-powered analysis
2. **Auto-Commit Integration** - Git commits created automatically after task completion for version control continuity
3. **Linting Integration** - ruff (Python) and eslint (TypeScript) integrated as quality gates to prevent technical debt
4. **Desktop Notifications** - Native OS notifications for SYNC blockers to improve local development UX
5. **Composite Index Fix** - Performance optimization for context queries (50%+ speedup)

**Technical Approach**:
- ReviewWorkerAgent extends existing WorkerAgent pattern (consistent with Backend/Frontend/Test agents)
- Radon (complexity) + Bandit (security) + OWASP patterns for rule-based review
- LintRunner class for language-agnostic linting (similar to AdaptiveTestRunner)
- Platform-specific notification libraries with fallbacks (pync/win10toast/notify-send)
- Database migration_006 adds commit_sha column, lint_results table, and composite index

**Success Criteria**:
- All 5 features integrated and working together
- 75+ new tests passing (≥85% coverage maintained)
- No regressions in existing functionality
- Performance improvement validated (context queries 50%+ faster)
- CODEFRAME_SPEC.md updated with 9 corrections

---

## Technical Context

**Language/Version**: Python 3.11+ (backend), TypeScript 5.3+ (frontend)

**Primary Dependencies**:
- Backend: `radon==6.0.1`, `bandit==1.7.5`, `ruff` (already installed), `pync==2.0.3` (macOS, optional), `win10toast==0.9` (Windows, optional)
- Frontend: `eslint` (already installed), `@typescript-eslint/parser`, `@typescript-eslint/eslint-plugin`
- Existing: `anthropic` (AsyncAnthropic), `FastAPI`, `aiosqlite`, `pytest`, `React 18`, `tiktoken`

**Storage**: SQLite with async support (aiosqlite)
- New table: `lint_results` (6 columns, 2 indexes)
- Modified table: `tasks` (+ `commit_sha` column)
- New index: `idx_context_project_agent` on `context_items(project_id, agent_id, current_tier)`

**Testing**: pytest (backend), jest (frontend)
- 75 new unit tests
- 5 integration tests
- Manual testing on macOS, Linux, Windows

**Target Platform**: Linux/macOS/Windows desktop (local development environment)

**Project Type**: Web application (backend + frontend dashboard)

**Performance Goals**:
- Context queries: 50%+ faster (5-10ms vs 50-100ms with 1000+ items)
- Review execution: <30 seconds per task (depends on file count)
- Lint execution: <5 seconds for Python (100 files), <10 seconds for TypeScript
- Desktop notification delivery: <500ms (fire-and-forget)

**Constraints**:
- Test coverage: Maintain ≥87% (existing baseline)
- Zero regressions: All existing tests must pass
- Backward compatibility: Old tasks without commit_sha still work
- Cross-platform support: macOS 10.14+, Linux (D-Bus), Windows 10+

**Scale/Scope**:
- 5 features (Review Agent, Auto-Commit, Linting, Notifications, Index)
- ~75 new tests
- 6 new Python modules
- 3 new React components
- 1 database migration
- 7-10 day sprint

---

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### ✅ Test-First Development (NON-NEGOTIABLE)

**Compliance**: All features specify tests before implementation
- Review Agent: 25 tests covering complexity, security, workflow
- Auto-Commit: 15 tests covering integration, error handling
- Linting: 20 tests covering ruff, eslint, quality gates
- Desktop Notifications: 10 tests covering platform detection, delivery
- Composite Index: 5 tests covering migration, query plans

**Red-Green-Refactor**: Tests written first, implementation follows

### ✅ Async-First Architecture

**Compliance**: All I/O operations use async/await
- ReviewWorkerAgent uses AsyncAnthropic for LLM calls
- LintRunner uses asyncio for parallel linter execution (ruff + eslint)
- Desktop notifications fire-and-forget (don't block)
- Database operations already async (aiosqlite)

### ✅ Context Efficiency

**Compliance**: Composite index improves context loading performance
- Query time reduced 50-90% (O(n) → O(log n))
- Index covers most common filter: `(project_id, agent_id, current_tier)`
- Enables index-only scans for HOT tier loading

### ✅ Multi-Agent Coordination

**Compliance**: ReviewWorkerAgent follows hierarchical pattern
- Lead Agent coordinates (Step 11: Code Review)
- Review Agent executes independently
- Shared SQLite state (no direct agent-to-agent communication)
- Blocker system for review failures

### ✅ Observability & Traceability

**Compliance**: All features include observability
- Auto-commit: Git commits link to tasks (task_id → commit_sha)
- Lint results: Stored in database for trend analysis
- Review findings: Stored in blockers with structured details
- WebSocket broadcasts: `review_started`, `review_completed`, `lint_completed`, etc.

### ✅ Type Safety

**Compliance**: Type hints required
- Python: All new functions have type hints (enforced by mypy)
- TypeScript: Strict mode enabled, interfaces defined
- Pydantic models: `LintResult`, `ReviewFinding`, `ReviewReport`

### ✅ Incremental Delivery

**Compliance**: Features prioritized P0 → P1
- **P0 (Must Have)**: Review Agent, Auto-Commit, Linting (critical for MVP)
- **P1 (Should Have)**: Desktop Notifications (UX improvement), Composite Index (performance)
- Each feature independently testable and deployable

**Constitution Violations**: None

---

## Project Structure

### Documentation (this feature)

```
specs/009-mvp-completion/
├── plan.md              # This file (/speckit.plan output)
├── spec.md              # Feature specification (input)
├── research.md          # Phase 0 research findings
├── data-model.md        # Phase 1 database schema
├── quickstart.md        # Phase 1 usage guide
├── contracts/           # Phase 1 API specifications
│   ├── review-api.md
│   ├── lint-api.md
│   └── notification-service.md
└── tasks.md             # Phase 2 output (/speckit.tasks - NOT created yet)
```

### Source Code (repository root)

**Structure Decision**: Web application (backend + frontend)

```
codeframe/                           # Python package (backend)
├── agents/
│   ├── worker_agent.py              # Base class (existing)
│   ├── backend_worker_agent.py      # MODIFIED: auto-commit integration
│   ├── frontend_worker_agent.py     # MODIFIED: auto-commit integration
│   ├── test_worker_agent.py         # MODIFIED: auto-commit integration
│   ├── review_worker_agent.py       # NEW: Review Agent implementation
│   ├── lead_agent.py                # MODIFIED: Step 11 review integration
│   └── agent_pool_manager.py        # MODIFIED: Register review agent
├── git/
│   └── workflow_manager.py          # MODIFIED: Auto-commit integration
├── testing/
│   ├── adaptive_test_runner.py      # Existing
│   └── lint_runner.py               # NEW: Linting execution
├── notifications/
│   ├── webhook.py                   # Existing
│   ├── desktop.py                   # NEW: Desktop notification service
│   └── router.py                    # NEW: Notification routing
├── lib/
│   ├── context_manager.py           # Benefits from composite index
│   └── quality/                     # NEW: Quality analysis tools
│       ├── __init__.py
│       ├── complexity_analyzer.py   # NEW: Radon integration
│       ├── security_scanner.py      # NEW: Bandit integration
│       └── owasp_patterns.py        # NEW: OWASP Top 10 checks
├── persistence/
│   ├── database.py                  # MODIFIED: New methods for lint_results, commit_sha
│   └── migrations/
│       └── migration_006_mvp_completion.py  # NEW: Schema changes
└── ui/
    └── server.py                    # MODIFIED: Review/lint API endpoints

web-ui/                              # React frontend (dashboard)
├── src/
│   ├── components/
│   │   ├── review/                  # NEW: Review components
│   │   │   ├── ReviewResultsPanel.tsx
│   │   │   ├── ReviewFindingsList.tsx
│   │   │   └── ReviewScoreChart.tsx
│   │   ├── lint/                    # NEW: Lint components
│   │   │   ├── LintTrendChart.tsx
│   │   │   └── LintResultsTable.tsx
│   │   └── Dashboard.tsx            # MODIFIED: Add review/lint panels
│   ├── api/
│   │   ├── review.ts                # NEW: Review API client
│   │   └── lint.ts                  # NEW: Lint API client
│   └── types/
│       ├── review.ts                # NEW: Review type definitions
│       └── lint.ts                  # NEW: Lint type definitions
└── __tests__/
    ├── components/
    │   ├── ReviewResultsPanel.test.tsx
    │   └── LintTrendChart.test.tsx
    └── api/
        ├── review.test.ts
        └── lint.test.ts

tests/                               # Backend tests
├── agents/
│   ├── test_review_worker_agent.py  # NEW: 25 tests
│   ├── test_backend_worker_agent.py # MODIFIED: auto-commit tests
│   ├── test_frontend_worker_agent.py # MODIFIED: auto-commit tests
│   └── test_test_worker_agent.py    # MODIFIED: auto-commit tests
├── git/
│   └── test_workflow_manager.py     # MODIFIED: auto-commit tests
├── testing/
│   └── test_lint_runner.py          # NEW: 20 tests
├── notifications/
│   ├── test_desktop.py              # NEW: 10 tests
│   └── test_router.py               # NEW: Integration tests
├── persistence/
│   ├── test_database.py             # MODIFIED: lint_results, commit_sha tests
│   └── test_migration_006.py        # NEW: Migration tests
└── integration/
    ├── test_review_workflow.py      # NEW: End-to-end review
    ├── test_lint_workflow.py        # NEW: End-to-end linting
    └── test_auto_commit_workflow.py # NEW: End-to-end auto-commit
```

**Key Additions** (NEW files):
- 1 new agent: `review_worker_agent.py`
- 1 new runner: `lint_runner.py`
- 2 new notification modules: `desktop.py`, `router.py`
- 3 new quality modules: `complexity_analyzer.py`, `security_scanner.py`, `owasp_patterns.py`
- 1 new migration: `migration_006_mvp_completion.py`
- 6 new React components (review + lint panels)
- 4 new API clients (TypeScript)

**Key Modifications** (MODIFIED files):
- 3 worker agents: Backend/Frontend/Test (auto-commit)
- 1 coordinator: Lead Agent (review step)
- 1 manager: Agent Pool (review agent registration)
- 1 git module: Workflow Manager (auto-commit)
- 1 database: New methods for lint/commit
- 1 UI server: Review/lint endpoints
- 1 dashboard: New panels

**Test Files** (75+ tests):
- 25 Review Agent tests
- 15 Auto-Commit tests
- 20 Linting tests
- 10 Desktop Notification tests
- 5 Composite Index tests

---

## Complexity Tracking

*Fill ONLY if Constitution Check has violations that must be justified*

**No violations detected.** All features comply with constitution principles:
- Test-first approach followed for all features
- Async-first maintained (AsyncAnthropic, asyncio)
- Incremental delivery with P0/P1 prioritization
- Type safety enforced (mypy, TypeScript strict mode)
- Multi-agent coordination via Lead Agent
- Observability via WebSocket + database logging

---

## Implementation Phases

### Phase 0: Research & Outline ✅ COMPLETE

**Deliverables**:
- [x] Research code quality tools (Radon, Bandit, OWASP)
- [x] Research desktop notification libraries (pync, win10toast, notify-send)
- [x] Decide Review Agent architecture (standalone vs subagent)
- [x] Define lint configuration defaults (ruff, eslint rule sets)
- [x] Define performance targets for composite index (50%+ improvement)
- [x] Document in `research.md`

**Key Decisions**:
1. **Code Quality**: Radon + Bandit + OWASP patterns (rule-based, defer LLM to v2)
2. **Desktop Notifications**: Platform-specific with fallbacks (pync → osascript, notify-send → dbus, win10toast → plyer)
3. **Review Agent**: Standalone ReviewWorkerAgent (consistent with existing pattern)
4. **Lint Config**: Ruff (F, E, W, I, N), ESLint (recommended + typescript)
5. **Composite Index**: `(project_id, agent_id, current_tier)` covers most common query

### Phase 1: Design & Contracts ✅ COMPLETE

**Deliverables**:
- [x] Database schema changes in `data-model.md`
- [x] API contracts in `contracts/` (review-api.md, lint-api.md, notification-service.md)
- [x] Usage guide in `quickstart.md`
- [x] Update Claude context (CLAUDE.md)

**Outputs**:
- `lint_results` table schema
- `tasks.commit_sha` column
- `idx_context_project_agent` index
- Review API: POST /api/agents/{id}/review, GET /api/tasks/{id}/review-status
- Lint API: POST /api/lint/run, GET /api/lint/results, GET /api/lint/trend
- Notification service interface
- Pydantic models: LintResult, ReviewFinding, ReviewReport

### Phase 2: Generate Tasks ⏳ NEXT STEP

**Command**: `/speckit.tasks`

**Expected Output**: `tasks.md` with actionable task list organized by user story:
1. **Review Agent Implementation** (P0)
   - T001: Create ReviewWorkerAgent skeleton
   - T002: Integrate Radon for complexity analysis
   - T003: Integrate Bandit for security scanning
   - T004: Implement OWASP pattern checks
   - T005: Generate review reports
   - T006: Integrate with Lead Agent workflow (Step 11)
   - T007-T025: Tests (25 tests)

2. **Auto-Commit Integration** (P0)
   - T026: Add commit_sha column to tasks table
   - T027: Integrate auto-commit in BackendWorkerAgent
   - T028: Integrate auto-commit in FrontendWorkerAgent
   - T029: Integrate auto-commit in TestWorkerAgent
   - T030: Update GitWorkflowManager
   - T031-T040: Tests (15 tests)

3. **Linting Integration** (P0)
   - T041: Create LintRunner class
   - T042: Integrate ruff for Python
   - T043: Integrate eslint for TypeScript
   - T044: Add quality gate to worker agents
   - T045: Create lint_results table
   - T046-T060: Tests (20 tests)

4. **Desktop Notifications** (P1)
   - T061: Create DesktopNotificationService
   - T062: Implement macOS notifications (pync)
   - T063: Implement Linux notifications (notify-send)
   - T064: Implement Windows notifications (win10toast)
   - T065: Create NotificationRouter
   - T066-T070: Tests (10 tests)

5. **Composite Index Fix** (P1)
   - T071: Create migration_006
   - T072: Add composite index
   - T073: Benchmark query performance
   - T074-T075: Tests (5 tests)

6. **Documentation & Integration** (P0)
   - T076: Update CODEFRAME_SPEC.md (9 corrections)
   - T077: Update CLAUDE.md (auto-commit, review, lint)
   - T078: Update README.md (MVP completion)
   - T079: Integration testing (5 tests)
   - T080: Manual testing checklist

**Total**: ~80 tasks

### Phase 3: Implementation ⏳ FUTURE

**Command**: `/speckit.implement`

**Execution**: Agent pool executes tasks from tasks.md
- Backend agents: Python implementation
- Frontend agents: React components
- Test agents: Test suite
- Review agents: Code review

---

## Risk Mitigation

### High Risk: Review Agent Complexity

**Risk**: LLM-based quality analysis may be unpredictable or slow

**Mitigation**:
- Start with rule-based checks (radon, bandit) - reliable and fast
- Defer LLM layer to v2 (optional enhancement)
- Set timeout for review execution (30 seconds max)
- Graceful degradation if review fails (log error, don't block task)

### Medium Risk: Desktop Notification Compatibility

**Risk**: Platform-specific code for 3 OSes may have edge cases

**Mitigation**:
- Implement fallback for each platform (osascript, dbus, plyer)
- Fire-and-forget delivery (notification failure doesn't block blocker creation)
- Manual testing on all 3 platforms before release
- Detailed error logging for debugging

### Low Risk: Auto-Commit Integration

**Risk**: Minimal - GitWorkflowManager.commit_task_changes() already exists

**Mitigation**:
- Graceful error handling (dirty working tree, commit failures)
- Don't block task completion if commit fails (log warning)
- Create ASYNC blocker if persistent issue

### Low Risk: Linting Integration

**Risk**: Minimal - ruff and eslint are well-established tools

**Mitigation**:
- Use default configurations if project config missing
- Handle missing linter gracefully (log error, skip linting)
- Quality gate configurable (can disable blocking)

### Low Risk: Composite Index

**Risk**: Minimal - standard database optimization

**Mitigation**:
- Test migration up/down paths
- Verify query plan with EXPLAIN
- Benchmark before/after performance

---

## Testing Strategy

### Unit Testing (70 tests)

**Review Agent** (25 tests):
- Complexity analysis: 8 tests (radon integration, thresholds)
- Security scanning: 8 tests (bandit integration, severity mapping)
- Review workflow: 5 tests (approve, changes_requested, reject)
- Blocker creation: 2 tests (review failure, findings format)
- Report generation: 2 tests (JSON serialization, markdown formatting)

**Auto-Commit** (15 tests):
- Backend integration: 3 tests (commit creation, SHA recording, message format)
- Frontend integration: 3 tests (same as backend)
- Test integration: 3 tests (same as backend)
- Error handling: 4 tests (dirty tree, commit failure, missing git)
- Database updates: 2 tests (commit_sha column, task lookup)

**Linting** (20 tests):
- Ruff integration: 6 tests (execution, parsing, error detection)
- ESLint integration: 6 tests (same as ruff)
- Quality gate: 4 tests (blocking on critical, warnings allowed)
- Database storage: 2 tests (lint_results creation, retrieval)
- Configuration: 2 tests (pyproject.toml, .eslintrc.json loading)

**Desktop Notifications** (10 tests):
- Platform detection: 3 tests (macOS, Linux, Windows)
- Delivery: 3 tests (pync, notify-send, win10toast)
- Fallbacks: 2 tests (osascript, dbus, plyer)
- Router: 2 tests (desktop + webhook, SYNC vs ASYNC)

**Composite Index** (5 tests):
- Migration: 2 tests (upgrade, downgrade)
- Query plan: 2 tests (EXPLAIN, index usage)
- Performance: 1 test (benchmark improvement)

### Integration Testing (5 tests)

1. **Full Workflow**: Task → Lint → Review → Auto-Commit → Complete
   - Create task, assign to backend agent
   - Agent executes, linting passes
   - Review Agent approves
   - Auto-commit creates git commit
   - Task marked complete

2. **Review Failure**: Review creates blocker, agent fixes, re-review
   - Review finds critical security issue
   - Blocker created with findings
   - Agent reads blocker, fixes code
   - Re-review passes, task proceeds

3. **Lint Blocking**: Critical lint errors block task
   - Agent writes code with undefined variable
   - Linting detects F821 error (undefined name)
   - Task blocked with lint blocker
   - Agent fixes error, linting passes

4. **Desktop Notification**: SYNC blocker triggers notification
   - Create SYNC blocker
   - Desktop notification sent (platform-specific)
   - Webhook also sent (if configured)

5. **Query Performance**: Composite index improves speed
   - Create 1000+ context items
   - Measure query time without index
   - Apply migration_006
   - Measure query time with index
   - Assert 50%+ improvement

### Manual Testing Checklist

**Review Agent**:
- [ ] Review passes for clean code (score ≥70)
- [ ] Review blocks code with high complexity (CC > 10)
- [ ] Review blocks code with security issues (hardcoded secrets)
- [ ] Review findings displayed in blocker with line numbers
- [ ] Review iteration works (max 2 attempts)

**Auto-Commit**:
- [ ] Git commit created after task completion
- [ ] Commit message follows conventional format
- [ ] commit_sha recorded in tasks table
- [ ] Task lookup by commit SHA works
- [ ] Dirty working tree handled gracefully

**Linting**:
- [ ] Ruff detects Python errors (F401, E501)
- [ ] ESLint detects TypeScript errors (@typescript-eslint/no-explicit-any)
- [ ] Critical errors block task completion
- [ ] Warnings logged but don't block
- [ ] Lint results stored in database

**Desktop Notifications**:
- [ ] macOS: Notification Center displays notification
- [ ] macOS: Sound plays, click opens dashboard
- [ ] Linux (GNOME): Top-right notification appears
- [ ] Linux (KDE): System tray notification appears
- [ ] Windows: Toast notification bottom-right
- [ ] Fallbacks work when primary library unavailable

**Composite Index**:
- [ ] Migration applies successfully
- [ ] Index exists in schema (sqlite3 .schema)
- [ ] EXPLAIN shows index usage
- [ ] Query time improved 50%+

---

## Performance Targets

### Context Queries (Composite Index)

**Before**:
- Query time: 50-100ms (1000 context items)
- Execution: Full table scan with agent_id filter

**After**:
- Query time: 5-10ms (1000 context items)
- Execution: Index seek
- **Target**: ≥50% improvement (✅ Expected: 50-90%)

### Review Execution

- **Target**: <30 seconds per task
- **Breakdown**:
  - Radon: <5 seconds (100 files)
  - Bandit: <10 seconds (100 files)
  - Report generation: <5 seconds
  - Parallel execution (radon + bandit): ~10-15 seconds total

### Lint Execution

- **Ruff**: <5 seconds (100 Python files)
- **ESLint**: <10 seconds (100 TypeScript files)
- **Parallel**: ~10 seconds (ruff + eslint concurrently)

### Desktop Notifications

- **Delivery**: <500ms (fire-and-forget)
- **Timeout**: 5 seconds max (fallback if primary fails)

### Database Operations

- Insert lint_result: <50ms
- Update task commit_sha: <50ms
- Get lint trend (7 days): <200ms

---

## Documentation Updates

### CODEFRAME_SPEC.md (9 corrections)

1. **Context Scoring Formula** (lines 326-330)
   - Remove `manual_boost` parameter (not implemented)
   - Update weights: time_decay 0.3→0.4, access_boost 0.1→0.2

2. **Agent Maturity System** (lines 406-475)
   - Mark as "Postponed" (not in MVP scope)

3. **Subagent Architecture** (lines 180-246)
   - Mark as "v2 Enhancement" (not implemented yet)

4. **Multi-Provider Support** (lines 761-844)
   - Update to "Claude (Implemented), GPT-4 (Planned)"

5. **Review Agent** (lines 133, 451-457, 983)
   - Update to "Implemented in Sprint 9"

6. **Checkpoint System** (lines 694-743)
   - Clarify: "Context Checkpoints (Implemented), Full State Snapshots (Future)"

7. **Notification System** (lines 615-689)
   - Update: "Webhook + Desktop (Implemented), Email/SMS (Planned)"

8. **Add Quality Enforcement Section** (after line 906)
   - Document Sprint 8 + Sprint 9 quality innovations

9. **Add Multi-Agent Scoping Note** (after line 163)
   - Document `(project_id, agent_id)` pattern for context

### CLAUDE.md

Add to "Recent Changes" section:
```markdown
- 2025-11-15: 009-mvp-completion - MVP Completion (Sprint 9) ✅
  * Review Agent: Code quality checks (complexity, security, style)
  * Auto-Commit: Git commits after task completion
  * Linting: ruff (Python), eslint (TypeScript) quality gates
  * Desktop Notifications: Native OS notifications for SYNC blockers
  * Composite Index: 50%+ faster context queries
  * **Tests**: 80/80 passing (100%) - Full MVP test coverage
```

Add to "Commands" section:
```bash
# Review code quality
cf review task-456

# View lint results
cf lint --trend --days=7

# Configure notifications
cf config set notifications.desktop.enabled true
```

### README.md

Update "Status" section:
```markdown
## Status

✅ **MVP Complete** (Sprint 9: 2025-11-15)

Core features implemented:
- Multi-agent coordination (Lead, Backend, Frontend, Test, Review)
- Context management (HOT/WARM/COLD tiering)
- Quality enforcement (testing, linting, code review)
- Version control (auto-commit, git workflow)
- Desktop notifications (macOS, Linux, Windows)
- Real-time dashboard (WebSocket, React)

**Next**: Sprint 10 - Comprehensive E2E Testing
```

---

## Definition of Done

### Functional Requirements

- [ ] Review Agent integrated into workflow (Step 11)
- [ ] Auto-commit creates commits after each task completion
- [ ] Linting blocks tasks with critical errors
- [ ] Desktop notifications delivered for SYNC blockers
- [ ] Composite index improves query performance (measured)
- [ ] All 5 features working together (integration test passes)
- [ ] No regressions in existing features (all tests pass)

### Testing Requirements

- [ ] 75 unit tests written and passing (≥85% coverage)
- [ ] 5 integration tests passing
- [ ] Manual testing checklist completed (25 items)
- [ ] Performance benchmarks show improvement (context queries 50%+ faster)

### Code Quality

- [ ] All code reviewed (self-review or code-reviewer subagent)
- [ ] No TODOs in production code
- [ ] Linting passes (ruff, eslint)
- [ ] Type hints complete (mypy passes)
- [ ] Git commits follow conventional format

### Documentation

- [ ] CODEFRAME_SPEC.md updated (9 corrections)
- [ ] CLAUDE.md updated (recent changes, commands)
- [ ] README.md updated (MVP status)
- [ ] Quickstart guide complete (quickstart.md)
- [ ] API contracts documented (contracts/)

### Integration

- [ ] Database migration_006 applied successfully
- [ ] WebSocket events working (review_started, lint_completed, etc.)
- [ ] Dashboard displays new data (review status, lint trends)
- [ ] All features configurable via config.json

---

## Dependencies

### External Dependencies (New)

**Python**:
```bash
pip install radon==6.0.1         # Complexity analysis
pip install bandit==1.7.5        # Security scanning
pip install pync==2.0.3          # macOS notifications (optional)
pip install win10toast==0.9      # Windows notifications (optional)
```

**System** (Linux):
```bash
sudo apt-get install libnotify-bin  # notify-send (Ubuntu/Debian)
```

### Internal Dependencies (Sprint Completion)

**Required**:
- ✅ Sprint 8: Quality Enforcement (AdaptiveTestRunner, EvidenceVerifier)
- ✅ Sprint 7: Context Management (ContextManager, ImportanceScorer, TokenCounter)
- ✅ Sprint 4: Multi-Agent Coordination (AgentPoolManager, LeadAgent)
- ✅ Sprint 3: Git Workflow (GitWorkflowManager)

**No Blockers**: All prerequisites complete

---

## Post-Sprint Actions

### Immediate (Sprint 10: E2E Testing)

1. Comprehensive E2E tests covering full MVP workflow
2. Review Agent behavior validation (approve vs reject scenarios)
3. Auto-commit and linting integration tests
4. Performance regression testing (context queries, review, lint)
5. Cross-platform testing (macOS, Linux, Windows)

### Future (v2 Enhancements)

**Review Agent**:
- LLM-powered architectural review (Claude API)
- ML-based code quality scoring
- Advanced security scanning (dependency vulnerabilities)

**Notifications**:
- Multi-channel (email, SMS, Slack)
- Global notification preferences
- Rich notifications (images, buttons, actions)

**Linting**:
- Auto-fix suggestions
- Pre-commit hooks
- Custom linting rules
- Lint budget (fail if warnings increase)

**Auto-Commit**:
- Squash commits before merge
- Interactive rebase support
- Commit templates

---

## Timeline Estimate

**Total Duration**: 7-10 days

**Day 1-3: Review Agent** (P0)
- Day 1: Skeleton, radon/bandit integration
- Day 2: Quality analysis, report generation
- Day 3: Workflow integration, testing

**Day 4: Auto-Commit + Composite Index** (Quick Wins)
- Morning: Auto-commit in all worker agents
- Afternoon: Migration_006, composite index
- Evening: Testing

**Day 5-6: Linting Integration** (P0)
- Day 5: LintRunner, ruff/eslint integration
- Day 6: Quality gate, database, testing

**Day 7: Desktop Notifications + Polish** (P1)
- Morning: DesktopNotificationService
- Afternoon: Platform-specific implementations
- Evening: CODEFRAME_SPEC.md corrections

**Day 8-10: Buffer & Integration**
- Day 8: Integration testing across all 5 features
- Day 9: Performance benchmarking, documentation
- Day 10: Sprint retrospective, handoff to Sprint 10

---

## Next Steps

1. **Run `/speckit.tasks`** - Generate actionable task list in tasks.md
2. **Review tasks.md** - Validate task breakdown and estimates
3. **Run `/speckit.implement`** - Execute tasks with agent pool
4. **Monitor dashboard** - Track progress, review blockers
5. **Complete Sprint 9** - Run `/speckit.checklist` to validate DoD

**Command to proceed**:
```bash
/speckit.tasks
```
